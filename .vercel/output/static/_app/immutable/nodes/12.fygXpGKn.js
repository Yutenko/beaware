import{s as Kt,q as Su,e as W,c as Y,b as K,f as L,m as N,I as Ot,i as ht,v as Eu,w as yu,x as Du,t as Ft,d as Lt,h as k,j as nr,n as Ct,J as jr,a as at,g as it,l as It,ag as is,N as wn,k as ee,P as Mn,p as Nt,L as Ge,y as Ke,B as ne,S as os,z as xu,ah as Cu,ad as Gi,ai as Ni,Q as wu,T as Je,R as ss,F as ls,o as Yr,a9 as ia,K as Fi}from"../chunks/scheduler.cOHHkP0m.js";import{S as Jt,i as Qt,t as ct,a as bt,b as At,d as Ht,m as kt,e as Bt,g as kr,f as Br,k as Tn,h as us}from"../chunks/index.44LrZ0tY.js";import{e as Ua,b as Mu}from"../chunks/MS365Login.svelte_svelte_type_style_lang.B6GZ_MWG.js";import{d as Ne,t as fs}from"../chunks/index.hwPIL90K.js";import"../chunks/entry.tU5bMAfH.js";import{e as Or}from"../chunks/each.6w4Ej4nR.js";import{f as On}from"../chunks/index.Npw_Vmj7.js";import{M as cs}from"../chunks/Modal.N9oYkXC9.js";import{t as yr,L as Tu}from"../chunks/types.h7Ee4kEe.js";import{w as Ou}from"../chunks/index.MoR2mFp7.js";import{t as vs}from"../chunks/index.d2CmnkrZ.js";function Ru(r){let t,e;const n=r[2].default,a=Su(n,r,r[1],null);return{c(){t=W("section"),a&&a.c(),this.h()},l(i){t=Y(i,"SECTION",{class:!0,style:!0});var o=K(t);a&&a.l(o),o.forEach(L),this.h()},h(){N(t,"class","bg svelte-1n1g92y"),Ot(t,"background-image","url("+r[0].background+")")},m(i,o){ht(i,t,o),a&&a.m(t,null),e=!0},p(i,[o]){a&&a.p&&(!e||o&2)&&Eu(a,n,i,i[1],e?Du(n,i[1],o,null):yu(i[1]),null)},i(i){e||(ct(a,i),e=!0)},o(i){bt(a,i),e=!1},d(i){i&&L(t),a&&a.d(i)}}}function Iu(r,t,e){let{$$slots:n={},$$scope:a}=t;const i={background:"/media/learningenvironment/backgrounds/Background_01_BeAware.svg"};return r.$$set=o=>{"$$scope"in o&&e(1,a=o.$$scope)},[i,a,n]}class Pu extends Jt{constructor(t){super(),Qt(this,t,Iu,Ru,Kt,{})}}function zu(r){let t,e;return{c(){t=W("span"),e=Ft(r[0]),this.h()},l(n){t=Y(n,"SPAN",{class:!0});var a=K(t);e=Lt(a,r[0]),a.forEach(L),this.h()},h(){N(t,"class","text-base-100")},m(n,a){ht(n,t,a),k(t,e)},p(n,[a]){a&1&&nr(e,n[0])},i:Ct,o:Ct,d(n){n&&L(t)}}}let Li="HH:mm";function Au(r,t,e){let n=Ne().format(Li);return jr(()=>{const a=setInterval(()=>{e(0,n=Ne().format(Li))},1e3);return()=>{clearInterval(a)}}),[n]}class ku extends Jt{constructor(t){super(),Qt(this,t,Au,zu,Kt,{})}}function Bu(r){let t,e,n,a,i,o,s='<li class="menu-title">Zeit und Datum</li> <li><a>Item 1</a></li> <li><a>Item 2</a></li> <li><a>Item 3</a></li>';return{c(){t=W("div"),e=W("div"),n=W("span"),a=Ft(r[0]),i=at(),o=W("ul"),o.innerHTML=s,this.h()},l(l){t=Y(l,"DIV",{class:!0});var u=K(t);e=Y(u,"DIV",{tabindex:!0,role:!0,class:!0});var f=K(e);n=Y(f,"SPAN",{class:!0});var c=K(n);a=Lt(c,r[0]),c.forEach(L),f.forEach(L),i=it(u),o=Y(u,"UL",{class:!0,"data-svelte-h":!0}),It(o)!=="svelte-129unj2"&&(o.innerHTML=s),u.forEach(L),this.h()},h(){N(n,"class","text-base-100"),N(e,"tabindex","0"),N(e,"role","button"),N(e,"class","text-base-100 btn btn-ghost"),N(o,"class","menu bg-base-200 w-56 rounded-box dropdown-content z-10"),N(t,"class","dropdown")},m(l,u){ht(l,t,u),k(t,e),k(e,n),k(n,a),k(t,i),k(t,o)},p(l,[u]){u&1&&nr(a,l[0])},i:Ct,o:Ct,d(l){l&&L(t)}}}let Hi="ddd D MMMM";function Gu(r,t,e){let n=Ne().format(Hi),a;function i(){e(0,n=Ne().format(Hi)),o()}function o(){const s=Ne(),u=s.add(1,"day").startOf("day").diff(s);a=setTimeout(i,u)}return jr(()=>{o()}),is(()=>{clearTimeout(a)}),[n]}let Nu=class extends Jt{constructor(t){super(),Qt(this,t,Gu,Bu,Kt,{})}};function Fu(r){let t,e='<div tabindex="0" role="button" class="text-base-100 btn btn-ghost">Christian</div> <ul class="menu bg-base-200 w-56 rounded-box dropdown-content z-10"><li class="menu-title">Profile</li> <li><a>Item 1</a></li> <li><details open=""><summary>Auswertung</summary> <ul><li><a>Collection-ID 1</a></li> <li><a>Collection-ID 2</a></li></ul></details></li> <li><a>Item 3</a></li></ul>';return{c(){t=W("div"),t.innerHTML=e,this.h()},l(n){t=Y(n,"DIV",{class:!0,"data-svelte-h":!0}),It(t)!=="svelte-1k23pbl"&&(t.innerHTML=e),this.h()},h(){N(t,"class","dropdown dropdown-end")},m(n,a){ht(n,t,a)},p:Ct,i:Ct,o:Ct,d(n){n&&L(t)}}}class Lu extends Jt{constructor(t){super(),Qt(this,t,null,Fu,Kt,{})}}function Hu(r){let t,e='<div tabindex="0" role="button" class="text-base-100 btn btn-ghost"><span class="text-base-100"><i class="fas fa-wifi"></i></span></div> <ul class="menu bg-base-200 w-56 rounded-box dropdown-content z-10"><li class="menu-title">WLAN</li> <li><a>Item 1</a></li> <li><a>Item 2</a></li> <li><a>Item 3</a></li></ul>';return{c(){t=W("div"),t.innerHTML=e,this.h()},l(n){t=Y(n,"DIV",{class:!0,"data-svelte-h":!0}),It(t)!=="svelte-3dbn8b"&&(t.innerHTML=e),this.h()},h(){N(t,"class","dropdown dropdown-end")},m(n,a){ht(n,t,a)},p:Ct,i:Ct,o:Ct,d(n){n&&L(t)}}}class Vu extends Jt{constructor(t){super(),Qt(this,t,null,Hu,Kt,{})}}function Wu(r){let t,e,n,a,i,o,s,l,u,f='<li class="menu-title">Power</li> <li><a>Item 1</a></li> <li><a>Item 2</a></li> <li><a>Item 3</a></li>';return{c(){t=W("div"),e=W("div"),n=W("span"),a=Ft(Vi),i=Ft(`%
            `),o=W("i"),l=at(),u=W("ul"),u.innerHTML=f,this.h()},l(c){t=Y(c,"DIV",{class:!0});var v=K(t);e=Y(v,"DIV",{tabindex:!0,role:!0,class:!0});var d=K(e);n=Y(d,"SPAN",{class:!0});var p=K(n);a=Lt(p,Vi),i=Lt(p,`%
            `),o=Y(p,"I",{class:!0}),K(o).forEach(L),p.forEach(L),d.forEach(L),l=it(v),u=Y(v,"UL",{class:!0,"data-svelte-h":!0}),It(u)!=="svelte-1py0hqv"&&(u.innerHTML=f),v.forEach(L),this.h()},h(){N(o,"class",s="fal fa-2x fa-battery-"+r[1][r[0]]),N(n,"class","flex items-center text-base-100 gap-2"),N(e,"tabindex","0"),N(e,"role","button"),N(e,"class","text-base-100 btn btn-ghost"),N(u,"class","menu bg-base-200 w-56 rounded-box dropdown-content z-10"),N(t,"class","dropdown dropdown-end")},m(c,v){ht(c,t,v),k(t,e),k(e,n),k(n,a),k(n,i),k(n,o),k(t,l),k(t,u)},p(c,[v]){v&1&&s!==(s="fal fa-2x fa-battery-"+c[1][c[0]])&&N(o,"class",s)},i:Ct,o:Ct,d(c){c&&L(t)}}}let Vi=84;function Yu(r,t,e){const n=["full","half","quarter","empty"].reverse();let a=0;return jr(()=>{setInterval(()=>{a+1>n.length-1?e(0,a=0):e(0,a+=1)},450)}),[a,n]}class Xu extends Jt{constructor(t){super(),Qt(this,t,Yu,Wu,Kt,{})}}function $u(r){let t,e,n,a,i,o,s,l,u,f,c,v,d;return n=new ku({}),i=new Nu({}),l=new Lu({}),f=new Vu({}),v=new Xu({}),{c(){t=W("div"),e=W("div"),At(n.$$.fragment),a=at(),At(i.$$.fragment),o=at(),s=W("div"),At(l.$$.fragment),u=at(),At(f.$$.fragment),c=at(),At(v.$$.fragment),this.h()},l(p){t=Y(p,"DIV",{class:!0});var h=K(t);e=Y(h,"DIV",{class:!0});var g=K(e);Ht(n.$$.fragment,g),a=it(g),Ht(i.$$.fragment,g),g.forEach(L),o=it(h),s=Y(h,"DIV",{class:!0});var m=K(s);Ht(l.$$.fragment,m),u=it(m),Ht(f.$$.fragment,m),c=it(m),Ht(v.$$.fragment,m),m.forEach(L),h.forEach(L),this.h()},h(){N(e,"class","flex flex-1 items-center gap-4"),N(s,"class","flex flex-none items-center gap-2"),N(t,"class","flex flex-row pt-2 pl-2 pb-2 pr-2")},m(p,h){ht(p,t,h),k(t,e),kt(n,e,null),k(e,a),kt(i,e,null),k(t,o),k(t,s),kt(l,s,null),k(s,u),kt(f,s,null),k(s,c),kt(v,s,null),d=!0},p:Ct,i(p){d||(ct(n.$$.fragment,p),ct(i.$$.fragment,p),ct(l.$$.fragment,p),ct(f.$$.fragment,p),ct(v.$$.fragment,p),d=!0)},o(p){bt(n.$$.fragment,p),bt(i.$$.fragment,p),bt(l.$$.fragment,p),bt(f.$$.fragment,p),bt(v.$$.fragment,p),d=!1},d(p){p&&L(t),Bt(n),Bt(i),Bt(l),Bt(f),Bt(v)}}}class qu extends Jt{constructor(t){super(),Qt(this,t,null,$u,Kt,{})}}const fn=15,St={CLOSED:0,OPEN:1,MINIMIZED:2,MAXIMIZED:3};function ju(){const{update:r,subscribe:t}=Ou({config:{apps:{1234:{id:"1234",title:"PHedge",icon:"phedge",program:yr.BROWSER,badge:0,target:null,state:St.CLOSED,opened:null,isResizing:!1,width:0,height:0},2345:{id:"2345",title:"PHmail",icon:"mail",program:yr.MAIL,badge:2,target:null,state:St.CLOSED,opened:null,isResizing:!1,width:0,height:0},3456:{id:"3456",title:"Datenschutz Allgemein",icon:"quiz",program:yr.LEARNINGUNIT,badge:15,target:null,state:St.CLOSED,opened:null,isResizing:!1,width:0,height:0},4567:{id:"4567",title:"WiMA",icon:"quiz",program:yr.LEARNINGUNIT,badge:4,target:null,state:St.CLOSED,opened:null,isResizing:!1,width:0,height:0},5678:{id:"5678",title:"Resultate",icon:"stats",program:yr.LEARNINGUNIT,badge:4,target:null,state:St.CLOSED,opened:null,isResizing:!1,width:0,height:0},6789:{id:"6789",title:"Main",icon:"main",program:yr.LEARNINGUNIT,badge:4,target:null,state:St.CLOSED,opened:null,isResizing:!1,width:0,height:0}}},currentApp:{}});function e(l,u){r(f=>(f.config.apps[l].target=u,f.currentApp=f.config.apps[l],{...f}))}function n(l,u,f){r(c=>(c.currentApp.isResizing=l,c.currentApp.width=u,c.currentApp.height=f,{...c}))}function a(l,u){r(f=>(f.currentApp.width=l,f.currentApp.height=u,{...f}))}function i(l,u){r(f=>{if(f.config.apps[l].state=u,u===St.OPEN&&(f.config.apps[l].opened=new Date().getTime()),u===St.CLOSED||u===St.MINIMIZED){const c=Object.values(f.config.apps).filter(d=>d.state===St.OPEN),v=c.length;v>0&&setTimeout(function(){e(c[v-1].id,c[v-1].target)})}return{...f}})}function o(){r(l=>(Object.values(l.config.apps).forEach(u=>{u.state===St.OPEN&&i(u.id,St.MINIMIZED)}),{...l}))}function s(){r(l=>(Object.values(l.config.apps).forEach(u=>{u.state===St.MINIMIZED&&i(u.id,St.OPEN)}),{...l}))}return{subscribe:t,setCurrentApp:e,setAppState:i,setAppResizing:n,setAppDimensions:a,minimizeAllOpenApps:o,openAllMinimizedApps:s}}const rr=ju();function Wi(r){let t,e,n,a,i,o,s,l,u,f,c,v,d,p,h,g,m,_,b,S,y,D,x,E=!r[8]&&Yi(r);h=new ra({props:{icon:r[2],width:8,opacity:80}});let C=r[6]&&Xi(r);var w=r[4];function P(O,M){return{}}return w&&(_=Mn(w,P())),{c(){t=W("div"),E&&E.c(),e=at(),n=W("div"),a=W("div"),i=W("div"),o=at(),s=W("div"),l=at(),u=W("div"),f=at(),c=W("div"),v=Ft(r[3]),d=at(),p=W("div"),At(h.$$.fragment),g=at(),C&&C.c(),m=at(),_&&At(_.$$.fragment),this.h()},l(O){t=Y(O,"DIV",{class:!0,style:!0});var M=K(t);E&&E.l(M),e=it(M),n=Y(M,"DIV",{class:!0});var I=K(n);a=Y(I,"DIV",{class:!0});var z=K(a);i=Y(z,"DIV",{class:!0}),K(i).forEach(L),o=it(z),s=Y(z,"DIV",{class:!0}),K(s).forEach(L),l=it(z),u=Y(z,"DIV",{class:!0}),K(u).forEach(L),z.forEach(L),f=it(I),c=Y(I,"DIV",{class:!0});var F=K(c);v=Lt(F,r[3]),F.forEach(L),d=it(I),p=Y(I,"DIV",{class:!0});var H=K(p);Ht(h.$$.fragment,H),H.forEach(L),I.forEach(L),g=it(M),C&&C.l(M),m=it(M),_&&Ht(_.$$.fragment,M),M.forEach(L),this.h()},h(){N(i,"class","close svelte-12zxj86"),N(s,"class","minimize svelte-12zxj86"),N(u,"class","maximize svelte-12zxj86"),N(a,"class","buttons svelte-12zxj86"),N(c,"class","title svelte-12zxj86"),N(p,"class","pr-4"),N(n,"class","title-bar svelte-12zxj86"),N(t,"class",b="mockup-window "+(r[9]?"hidden":"")+" mac-window fixed top-4 left-8 border border-base-300 bg-base-200 "+(r[8]?"shadow-lg":"")+" svelte-12zxj86"),Ot(t,"width",Ju+"px"),Ot(t,"height",Qu+"px"),Ot(t,"z-index",r[8]?"999999":"30")},m(O,M){ht(O,t,M),E&&E.m(t,null),k(t,e),k(t,n),k(n,a),k(a,i),k(a,o),k(a,s),k(a,l),k(a,u),k(n,f),k(n,c),k(c,v),k(n,d),k(n,p),kt(h,p,null),k(t,g),C&&C.m(t,null),k(t,m),_&&kt(_,t,null),r[17](t),y=!0,D||(x=[Nt(i,"click",r[12]),Nt(s,"click",r[13]),Nt(u,"click",r[14]),Nt(n,"dblclick",r[14]),Nt(t,"click",r[18])],D=!0)},p(O,M){O[8]?E&&(E.d(1),E=null):E?E.p(O,M):(E=Yi(O),E.c(),E.m(t,e)),(!y||M&8)&&nr(v,O[3]);const I={};if(M&4&&(I.icon=O[2]),h.$set(I),O[6]?C?C.p(O,M):(C=Xi(O),C.c(),C.m(t,m)):C&&(C.d(1),C=null),M&16&&w!==(w=O[4])){if(_){kr();const z=_;bt(z.$$.fragment,1,0,()=>{Bt(z,1)}),Br()}w?(_=Mn(w,P()),At(_.$$.fragment),ct(_.$$.fragment,1),kt(_,t,null)):_=null}(!y||M&768&&b!==(b="mockup-window "+(O[9]?"hidden":"")+" mac-window fixed top-4 left-8 border border-base-300 bg-base-200 "+(O[8]?"shadow-lg":"")+" svelte-12zxj86"))&&N(t,"class",b),(!y||M&256)&&Ot(t,"z-index",O[8]?"999999":"30")},i(O){y||(ct(h.$$.fragment,O),_&&ct(_.$$.fragment,O),O&&Ge(()=>{y&&(S||(S=Tn(t,On,{},!0)),S.run(1))}),y=!0)},o(O){bt(h.$$.fragment,O),_&&bt(_.$$.fragment,O),O&&(S||(S=Tn(t,On,{},!1)),S.run(0)),y=!1},d(O){O&&L(t),E&&E.d(),Bt(h),C&&C.d(),_&&Bt(_),r[17](null),O&&S&&S.end(),D=!1,Ke(x)}}}function Yi(r){let t,e,n;return{c(){t=W("div"),this.h()},l(a){t=Y(a,"DIV",{class:!0}),K(t).forEach(L),this.h()},h(){N(t,"class","absolute w-full h-full top-0 left-0 z-50")},m(a,i){ht(a,t,i),e||(n=Nt(t,"click",r[16]),e=!0)},p:Ct,d(a){a&&L(t),e=!1,n()}}}function Xi(r){let t,e,n=r[7].w+"",a,i,o=r[7].h+"",s,l;return{c(){t=W("div"),e=W("p"),a=Ft(n),i=Ft("px x "),s=Ft(o),l=Ft("px"),this.h()},l(u){t=Y(u,"DIV",{class:!0});var f=K(t);e=Y(f,"P",{class:!0});var c=K(e);a=Lt(c,n),i=Lt(c,"px x "),s=Lt(c,o),l=Lt(c,"px"),c.forEach(L),f.forEach(L),this.h()},h(){N(e,"class","text-lg"),N(t,"class","absolute top-0 left-0 w-full h-full z-20 flex items-center justify-center flex-col bg-opacity-75 bg-base-100")},m(u,f){ht(u,t,f),k(t,e),k(e,a),k(e,i),k(e,s),k(e,l)},p(u,f){f&128&&n!==(n=u[7].w+"")&&nr(a,n),f&128&&o!==(o=u[7].h+"")&&nr(s,o)},d(u){u&&L(t)}}}function $i(r){let t,e,n;function a(o){r[19](o)}let i={fullscreen:!0,$$slots:{body:[Zu],header:[Uu]},$$scope:{ctx:r}};return r[10]!==void 0&&(i.open=r[10]),t=new cs({props:i}),ne.push(()=>us(t,"open",a)),t.$on("close",r[12]),{c(){At(t.$$.fragment)},l(o){Ht(t.$$.fragment,o)},m(o,s){kt(t,o,s),n=!0},p(o,s){const l={};s&2097172&&(l.$$scope={dirty:s,ctx:o}),!e&&s&1024&&(e=!0,l.open=o[10],os(()=>e=!1)),t.$set(l)},i(o){n||(ct(t.$$.fragment,o),n=!0)},o(o){bt(t.$$.fragment,o),n=!1},d(o){Bt(t,o)}}}function Uu(r){let t,e,n,a,i,o,s='<div class="btn btn-circle btn-ghost"><i class="fal fa-times"></i></div>',l,u,f;return a=new ra({props:{icon:r[2],width:8,opacity:80}}),{c(){t=W("div"),e=W("div"),n=W("a"),At(a.$$.fragment),i=at(),o=W("div"),o.innerHTML=s,this.h()},l(c){t=Y(c,"DIV",{class:!0,slot:!0});var v=K(t);e=Y(v,"DIV",{class:!0});var d=K(e);n=Y(d,"A",{class:!0});var p=K(n);Ht(a.$$.fragment,p),p.forEach(L),d.forEach(L),i=it(v),o=Y(v,"DIV",{class:!0,"data-svelte-h":!0}),It(o)!=="svelte-1ddd538"&&(o.innerHTML=s),v.forEach(L),this.h()},h(){N(n,"class","font-bold text-xl pl-4"),N(e,"class","flex-1"),N(o,"class","flex-none gap-2"),N(t,"class","navbar bg-base-100"),N(t,"slot","header")},m(c,v){ht(c,t,v),k(t,e),k(e,n),kt(a,n,null),k(t,i),k(t,o),l=!0,u||(f=Nt(o,"click",r[12]),u=!0)},p(c,v){const d={};v&4&&(d.icon=c[2]),a.$set(d)},i(c){l||(ct(a.$$.fragment,c),l=!0)},o(c){bt(a.$$.fragment,c),l=!1},d(c){c&&L(t),Bt(a),u=!1,f()}}}function Zu(r){let t,e,n;var a=r[4];function i(o,s){return{}}return a&&(e=Mn(a,i())),{c(){t=W("div"),e&&At(e.$$.fragment),this.h()},l(o){t=Y(o,"DIV",{class:!0,slot:!0});var s=K(t);e&&Ht(e.$$.fragment,s),s.forEach(L),this.h()},h(){N(t,"class","h-[100vh]"),N(t,"slot","body")},m(o,s){ht(o,t,s),e&&kt(e,t,null),n=!0},p(o,s){if(s&16&&a!==(a=o[4])){if(e){kr();const l=e;bt(l.$$.fragment,1,0,()=>{Bt(l,1)}),Br()}a?(e=Mn(a,i()),At(e.$$.fragment),ct(e.$$.fragment,1),kt(e,t,null)):e=null}},i(o){n||(e&&ct(e.$$.fragment,o),n=!0)},o(o){e&&bt(e.$$.fragment,o),n=!1},d(o){o&&L(t),e&&Bt(e)}}}function Ku(r){let t,e,n,a=r[1]!==St.CLOSED&&!r[11]&&Wi(r),i=r[1]!==St.CLOSED&&r[11]&&$i(r);return{c(){a&&a.c(),t=at(),i&&i.c(),e=wn()},l(o){a&&a.l(o),t=it(o),i&&i.l(o),e=wn()},m(o,s){a&&a.m(o,s),ht(o,t,s),i&&i.m(o,s),ht(o,e,s),n=!0},p(o,[s]){o[1]!==St.CLOSED&&!o[11]?a?(a.p(o,s),s&2&&ct(a,1)):(a=Wi(o),a.c(),ct(a,1),a.m(t.parentNode,t)):a&&(kr(),bt(a,1,1,()=>{a=null}),Br()),o[1]!==St.CLOSED&&o[11]?i?(i.p(o,s),s&2&&ct(i,1)):(i=$i(o),i.c(),ct(i,1),i.m(e.parentNode,e)):i&&(kr(),bt(i,1,1,()=>{i=null}),Br())},i(o){n||(ct(a),ct(i),n=!0)},o(o){bt(a),bt(i),n=!1},d(o){o&&(L(t),L(e)),a&&a.d(o),i&&i.d(o)}}}let Ju=1100,Qu=600;function tf(r,t,e){let n,a,i,o,s,l;ee(r,rr,E=>e(15,l=E));let{id:u}=t,{state:f=St.CLOSED}=t,{icon:c}=t,{title:v}=t,{component:d}=t,p=Ua(),h=null,g={};function m(){rr.setAppState(u,St.CLOSED)}function _(){rr.setAppState(u,St.MINIMIZED)}function b(){f===St.MAXIMIZED?(e(5,h.style.width=g.width,h),e(5,h.style.height=g.height,h),e(5,h.style.transform=g.transform,h),e(5,h.style.left="3rem",h),e(5,h.style.top="3rem",h),rr.setAppState(u,St.OPEN)):(g.width=h.style.width,g.height=h.style.height,g.transform=h.style.transform,e(5,h.style.width="100vw",h),e(5,h.style.height="100vh",h),e(5,h.style.maxHeight="100vh",h),e(5,h.style.top="0",h),e(5,h.style.left="0",h),e(5,h.style.transform="",h),rr.setAppState(u,St.MAXIMIZED))}jr(()=>{Tu.sender.init({onCloseCurrentAppwindow:m})});const S=()=>rr.setCurrentApp(u,h);function y(E){ne[E?"unshift":"push"](()=>{h=E,e(5,h)})}const D=()=>rr.setCurrentApp(u,h);function x(E){n=E,e(10,n),e(1,f)}return r.$$set=E=>{"id"in E&&e(0,u=E.id),"state"in E&&e(1,f=E.state),"icon"in E&&e(2,c=E.icon),"title"in E&&e(3,v=E.title),"component"in E&&e(4,d=E.component)},r.$$.update=()=>{var E,C;r.$$.dirty&2&&e(10,n=f!==St.CLOSED),r.$$.dirty&35&&f===St.OPEN&&rr.setCurrentApp(u,h),r.$$.dirty&2&&e(9,a=f===St.MINIMIZED),r.$$.dirty&32800&&e(8,i=l.currentApp.target===h),r.$$.dirty&32768&&e(7,o={w:l.currentApp.width?l.currentApp.width:(E=l.currentApp.target)==null?void 0:E.clientWidth,h:l.currentApp.height?l.currentApp.height:(C=l.currentApp.target)==null?void 0:C.clientHeight}),r.$$.dirty&32800&&e(6,s=l.currentApp.target===h&&l.currentApp.isResizing)},[u,f,c,v,d,h,s,o,i,a,n,p,m,_,b,l,S,y,D,x]}class rf extends Jt{constructor(t){super(),Qt(this,t,tf,Ku,Kt,{id:0,state:1,icon:2,title:3,component:4})}}function qi(r){let t,e='<svg class="svelte-1flgbg1"><circle cx="50" cy="50" r="25" fill="transparent" stroke-width="50" stroke-dasharray="360" stroke-dashoffset="360" class="svelte-1flgbg1"></circle></svg>';return{c(){t=W("div"),t.innerHTML=e,this.h()},l(n){t=Y(n,"DIV",{class:!0,"data-svelte-h":!0}),It(t)!=="svelte-kqegbw"&&(t.innerHTML=e),this.h()},h(){N(t,"class","progress z-10 svelte-1flgbg1")},m(n,a){ht(n,t,a)},d(n){n&&L(t)}}}function ji(r){let t,e=r[4].badge+"",n;return{c(){t=W("span"),n=Ft(e),this.h()},l(a){t=Y(a,"SPAN",{class:!0,style:!0});var i=K(t);n=Lt(i,e),i.forEach(L),this.h()},h(){N(t,"class","w-10 h-10 indicator-item badge svelte-1flgbg1"),Ot(t,"width",r[5]+"px"),Ot(t,"height",r[5]+"px")},m(a,i){ht(a,t,i),k(t,n)},p(a,i){i&16&&e!==(e=a[4].badge+"")&&nr(n,e)},d(a){a&&L(t)}}}function ef(r){let t,e,n,a,i,o,s,l,u,f=r[4].title+"",c,v,d,p,h;t=new rf({props:{component:r[4].component,state:r[4].state,title:r[4].title,icon:r[4].icon,id:r[4].id}});let g=!r[0]&&qi();s=new ra({props:{icon:r[4].icon}});let m=r[4].badge>0&&ji(r);return{c(){At(t.$$.fragment),e=at(),n=W("div"),a=W("div"),g&&g.c(),i=at(),o=W("div"),At(s.$$.fragment),l=at(),u=W("p"),c=Ft(f),v=at(),m&&m.c(),this.h()},l(_){Ht(t.$$.fragment,_),e=it(_),n=Y(_,"DIV",{class:!0,style:!0});var b=K(n);a=Y(b,"DIV",{class:!0,style:!0});var S=K(a);g&&g.l(S),i=it(S),o=Y(S,"DIV",{class:!0});var y=K(o);Ht(s.$$.fragment,y),l=it(y),u=Y(y,"P",{class:!0});var D=K(u);c=Lt(D,f),D.forEach(L),y.forEach(L),v=it(S),m&&m.l(S),S.forEach(L),b.forEach(L),this.h()},h(){N(u,"class","text-base-100 mt-2"),N(o,"class","absolute top-0 left-0 p-1"),N(a,"class","app-icon svelte-1flgbg1"),Ot(a,"--appiconsize",r[3]+"px"),Ot(a,"--installed",r[0]?"":"'"),Ot(a,"--appiconsizeunitless",r[3]),Ot(a,"--progressopacity",af),Ot(a,"--progressfillcolor",nf),Ot(a,"--progressdurationplustwo",r[6]+2+"s"),Ot(a,"--progressdurationplusthree",r[6]+3+"s"),N(n,"class","indicator items-center mb-[1rem] mt-[1rem]"),Ot(n,"padding",(r[2].isSm?0:1)+"rem")},m(_,b){kt(t,_,b),ht(_,e,b),ht(_,n,b),k(n,a),g&&g.m(a,null),k(a,i),k(a,o),kt(s,o,null),k(o,l),k(o,u),k(u,c),k(a,v),m&&m.m(a,null),d=!0,p||(h=Nt(n,"click",r[8]),p=!0)},p(_,[b]){const S={};b&16&&(S.component=_[4].component),b&16&&(S.state=_[4].state),b&16&&(S.title=_[4].title),b&16&&(S.icon=_[4].icon),b&16&&(S.id=_[4].id),t.$set(S),_[0]?g&&(g.d(1),g=null):g||(g=qi(),g.c(),g.m(a,i));const y={};b&16&&(y.icon=_[4].icon),s.$set(y),(!d||b&16)&&f!==(f=_[4].title+"")&&nr(c,f),_[4].badge>0?m?m.p(_,b):(m=ji(_),m.c(),m.m(a,null)):m&&(m.d(1),m=null),(!d||b&8)&&Ot(a,"--appiconsize",_[3]+"px"),(!d||b&1)&&Ot(a,"--installed",_[0]?"":"'"),(!d||b&8)&&Ot(a,"--appiconsizeunitless",_[3]),(!d||b&4)&&Ot(n,"padding",(_[2].isSm?0:1)+"rem")},i(_){d||(ct(t.$$.fragment,_),ct(s.$$.fragment,_),d=!0)},o(_){bt(t.$$.fragment,_),bt(s.$$.fragment,_),d=!1},d(_){_&&(L(e),L(n)),Bt(t,_),g&&g.d(),Bt(s),m&&m.d(),p=!1,h()}}}const nf="white",af=.9;function of(r,t,e){let n,a,i;ee(r,Mu,p=>e(2,a=p)),ee(r,rr,p=>e(7,i=p));let{installed:o=!0}=t,{id:s}=t,l=100,u=l*29/100;const f=o?0:10;function c(p){p.isSm?e(3,l=70):p.isMd?e(3,l=90):p.isLg?e(3,l=110):p.isXl?e(3,l=140):p.is2Xl?e(3,l=150):e(3,l=170)}function v(){if(n.program===yr.BROWSER)return Zp;if(n.program===yr.MAIL)return Lp;if(n.program===yr.LEARNINGUNIT)return Jp}jr(()=>{e(4,n.component=v(),n)});const d=()=>rr.setAppState(s,St.OPEN);return r.$$set=p=>{"installed"in p&&e(0,o=p.installed),"id"in p&&e(1,s=p.id)},r.$$.update=()=>{r.$$.dirty&130&&e(4,n=i.config.apps[s]||{}),r.$$.dirty&4&&c(a)},[o,s,a,l,n,u,f,i,d]}class sf extends Jt{constructor(t){super(),Qt(this,t,of,ef,Kt,{installed:0,id:1})}}function lf(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return t.map(function(n){return n.split(" ").map(function(a){return a?""+r+a:""}).join(" ")}).join(" ")}function uf(r,t){return t.replace(/([^}{]*){/gm,function(e,n){return n.replace(/\.([^{,\s\d.]+)/g,"."+r+"$1")+"{"})}function Pr(r,t){return function(e){e&&(r[t]=e)}}function ds(r,t,e){return function(n){n&&(r[t][e]=n)}}function Ui(r,t){return function(e){var n=e.prototype;r.forEach(function(a){t(n,a)})}}function ff(r,t){return t===void 0&&(t={}),function(e,n){r.forEach(function(a){var i=t[a]||a;i in e||(e[i]=function(){for(var o,s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];var u=(o=this[n])[a].apply(o,s);return u===this[n]?this:u})})}}var cf="function",vf="object",df="string",pf="number",Za="undefined",ps=typeof window!==Za,hf=typeof document!==Za&&document,gf=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],Xt=1e-7,cn={cm:function(r){return r*96/2.54},mm:function(r){return r*96/254},in:function(r){return r*96},pt:function(r){return r*96/72},pc:function(r){return r*96/6},"%":function(r,t){return r*t/100},vw:function(r,t){return t===void 0&&(t=window.innerWidth),r/100*t},vh:function(r,t){return t===void 0&&(t=window.innerHeight),r/100*t},vmax:function(r,t){return t===void 0&&(t=Math.max(window.innerWidth,window.innerHeight)),r/100*t},vmin:function(r,t){return t===void 0&&(t=Math.min(window.innerWidth,window.innerHeight)),r/100*t}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function mf(){for(var r=0,t=0,e=arguments.length;t<e;t++)r+=arguments[t].length;for(var n=Array(r),a=0,t=0;t<e;t++)for(var i=arguments[t],o=0,s=i.length;o<s;o++,a++)n[a]=i[o];return n}function Rn(r,t,e,n){return(r*n+t*e)/(e+n)}function Vn(r){return typeof r===Za}function Cr(r){return r&&typeof r===vf}function $t(r){return Array.isArray(r)}function vr(r){return typeof r===df}function be(r){return typeof r===pf}function Ka(r){return typeof r===cf}function _f(r,t){var e=r===""||r==" ",n=t===""||t==" ";return n&&e||r===t}function hs(r,t,e,n,a){var i=Ja(r,t,e);return i?e:bf(r,t,e+1,n,a)}function Ja(r,t,e){if(!r.ignore)return null;var n=t.slice(Math.max(e-3,0),e+3).join("");return new RegExp(r.ignore).exec(n)}function bf(r,t,e,n,a){for(var i=function(u){var f=t[u].trim();if(f===r.close&&!Ja(r,t,u))return{value:u};var c=u,v=dr(a,function(d){var p=d.open;return p===f});if(v&&(c=hs(v,t,u,n,a)),c===-1)return o=u,"break";u=c,o=u},o,s=e;s<n;++s){var l=i(s);if(s=o,typeof l=="object")return l.value;if(l==="break")break}return-1}function Qa(r,t){var e=vr(t)?{separator:t}:t,n=e.separator,a=n===void 0?",":n,i=e.isSeparateFirst,o=e.isSeparateOnlyOpenClose,s=e.isSeparateOpenClose,l=s===void 0?o:s,u=e.openCloseCharacters,f=u===void 0?gf:u,c=f.map(function(x){var E=x.open,C=x.close;return E===C?E:E+"|"+C}).join("|"),v="(\\s*"+a+"\\s*|"+c+"|\\s+)",d=new RegExp(v,"g"),p=r.split(d).filter(function(x){return x&&x!=="undefined"}),h=p.length,g=[],m=[];function _(){return m.length?(g.push(m.join("")),m=[],!0):!1}for(var b=function(x){var E=p[x].trim(),C=x,w=dr(f,function(M){var I=M.open;return I===E}),P=dr(f,function(M){var I=M.close;return I===E});if(w){if(C=hs(w,p,x,h,f),C!==-1&&l)return _()&&i||(g.push(p.slice(x,C+1).join("")),x=C,i)?(S=x,"break"):(S=x,"continue")}else if(P&&!Ja(P,p,x)){var O=mf(f);return O.splice(f.indexOf(P),1),{value:Qa(r,{separator:a,isSeparateFirst:i,isSeparateOnlyOpenClose:o,isSeparateOpenClose:l,openCloseCharacters:O})}}else if(_f(E,a)&&!o)return _(),i?(S=x,"break"):(S=x,"continue");C===-1&&(C=h-1),m.push(p.slice(x,C+1).join("")),x=C,S=x},S,y=0;y<h;++y){var D=b(y);if(y=S,typeof D=="object")return D.value;if(D==="break")break}return m.length&&g.push(m.join("")),g}function Xr(r){return Qa(r,"")}function re(r){return Qa(r,",")}function gs(r){var t=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(r);return!t||t.length<4?{}:{prefix:t[1],value:t[2],suffix:t[3]}}function Qe(r){var t=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(r);if(!t)return{prefix:"",unit:"",value:NaN};var e=t[1],n=t[2],a=t[3];return{prefix:e,unit:a,value:parseFloat(n)}}function ms(r){return r.replace(/[\s-_]+([^\s-_])/g,function(t,e){return e.toUpperCase()})}function xn(r,t){return t===void 0&&(t="-"),r.replace(/([a-z])([A-Z])/g,function(e,n,a){return""+n+t+a.toLowerCase()})}function Xe(){return Date.now?Date.now():new Date().getTime()}function Gr(r,t,e){e===void 0&&(e=-1);for(var n=r.length,a=0;a<n;++a)if(t(r[a],a,r))return a;return e}function dr(r,t,e){var n=Gr(r,t);return n>-1?r[n]:e}var _s=function(){var r=Xe(),t=ps&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return t?t.bind(window):function(e){var n=Xe(),a=setTimeout(function(){e(n-r)},1e3/60);return a}}(),Sf=function(){var r=ps&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return r?r.bind(window):function(t){clearTimeout(t)}}();function Nr(r){return Object.keys(r)}function Ef(r){var t=Nr(r);return t.map(function(e){return r[e]})}function wt(r,t){var e=Qe(r),n=e.value,a=e.unit;if(Cr(t)){var i=t[a];if(i){if(Ka(i))return i(n);if(cn[a])return cn[a](n,i)}}else if(a==="%")return n*t/100;return cn[a]?cn[a](n):n}function Ea(r,t,e){return Math.max(t,Math.min(r,e))}function Zi(r,t,e,n){return n===void 0&&(n=r[0]/r[1]),[[pt(t[0],Xt),pt(t[0]/n,Xt)],[pt(t[1]*n,Xt),pt(t[1],Xt)]].filter(function(a){return a.every(function(i,o){var s=t[o],l=pt(s,Xt);return e?i<=s||i<=l:i>=s||i>=l})})[0]||r}function bs(r,t,e,n){if(!n)return r.map(function(d,p){return Ea(d,t[p],e[p])});var a=r[0],i=r[1],o=n===!0?a/i:n,s=Zi(r,t,!1,o),l=s[0],u=s[1],f=Zi(r,e,!0,o),c=f[0],v=f[1];return a<l||i<u?(a=l,i=u):(a>c||i>v)&&(a=c,i=v),[a,i]}function yf(r){for(var t=r.length,e=0,n=t-1;n>=0;--n)e+=r[n];return e}function ya(r){for(var t=r.length,e=0,n=t-1;n>=0;--n)e+=r[n];return t?e/t:0}function Wt(r,t){var e=t[0]-r[0],n=t[1]-r[1],a=Math.atan2(n,e);return a>=0?a:a+Math.PI*2}function Df(r){return[0,1].map(function(t){return ya(r.map(function(e){return e[t]}))})}function Ki(r){var t=Df(r),e=Wt(t,r[0]),n=Wt(t,r[1]);return e<n&&n-e<Math.PI||e>n&&n-e<-Math.PI?1:-1}function zr(r,t){return Math.sqrt(Math.pow((t?t[0]:0)-r[0],2)+Math.pow((t?t[1]:0)-r[1],2))}function pt(r,t){if(!t)return r;var e=1/t;return Math.round(r/t)/e}function Ji(r,t){return r.forEach(function(e,n){r[n]=pt(r[n],t)}),r}function xf(r){for(var t=[],e=0;e<r;++e)t.push(e);return t}function Ss(r){return r.reduce(function(t,e){return t.concat(e)},[])}function Es(r,t){r.indexOf(t)===-1&&r.push(t)}function Ut(r,t){return r.classList?r.classList.contains(t):!!r.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function ys(r,t){r.classList?r.classList.add(t):r.className+=" "+t}function Ds(r,t){if(r.classList)r.classList.remove(t);else{var e=new RegExp("(\\s|^)"+t+"(\\s|$)");r.className=r.className.replace(e," ")}}function er(r,t,e,n){r.addEventListener(t,e,n)}function jt(r,t,e,n){r.removeEventListener(t,e,n)}function we(r){return(r==null?void 0:r.ownerDocument)||hf}function ti(r){return we(r).documentElement}function Ur(r){return we(r).body}function Wr(r){var t;return((t=r==null?void 0:r.ownerDocument)===null||t===void 0?void 0:t.defaultView)||window}function xs(r){return r&&"postMessage"in r&&"blur"in r&&"self"in r}function Me(r){return Cr(r)&&r.nodeName&&r.nodeType&&"ownerDocument"in r}var Cf=function(){function r(){this.keys=[],this.values=[]}var t=r.prototype;return t.get=function(e){return this.values[this.keys.indexOf(e)]},t.set=function(e,n){var a=this.keys,i=this.values,o=a.indexOf(e),s=o===-1?a.length:o;a[s]=e,i[s]=n},r}(),wf=function(){function r(){this.object={}}var t=r.prototype;return t.get=function(e){return this.object[e]},t.set=function(e,n){this.object[e]=n},r}(),Mf=typeof Map=="function",Tf=function(){function r(){}var t=r.prototype;return t.connect=function(e,n){this.prev=e,this.next=n,e&&(e.next=this),n&&(n.prev=this)},t.disconnect=function(){var e=this.prev,n=this.next;e&&(e.next=n),n&&(n.prev=e)},t.getIndex=function(){for(var e=this,n=-1;e;)e=e.prev,++n;return n},r}();function Of(r,t){var e=[],n=[];return r.forEach(function(a){var i=a[0],o=a[1],s=new Tf;e[i]=s,n[o]=s}),e.forEach(function(a,i){a.connect(e[i-1])}),r.filter(function(a,i){return!t[i]}).map(function(a,i){var o=a[0],s=a[1];if(o===s)return[0,0];var l=e[o],u=n[s-1],f=l.getIndex();l.disconnect(),u?l.connect(u,u.next):l.connect(void 0,e[0]);var c=l.getIndex();return[f,c]})}var Rf=function(){function r(e,n,a,i,o,s,l,u){this.prevList=e,this.list=n,this.added=a,this.removed=i,this.changed=o,this.maintained=s,this.changedBeforeAdded=l,this.fixed=u}var t=r.prototype;return Object.defineProperty(t,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(t,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),t.caculateOrdered=function(){var e=Of(this.changedBeforeAdded,this.fixed),n=this.changed,a=[];this.cacheOrdered=e.filter(function(i,o){var s=i[0],l=i[1],u=n[o],f=u[0],c=u[1];if(s!==l)return a.push([f,c]),!0}),this.cachePureChanged=a},r}();function tn(r,t,e){var n=Mf?Map:e?wf:Cf,a=e||function(_){return _},i=[],o=[],s=[],l=r.map(a),u=t.map(a),f=new n,c=new n,v=[],d=[],p={},h=[],g=0,m=0;return l.forEach(function(_,b){f.set(_,b)}),u.forEach(function(_,b){c.set(_,b)}),l.forEach(function(_,b){var S=c.get(_);typeof S>"u"?(++m,o.push(b)):p[S]=m}),u.forEach(function(_,b){var S=f.get(_);typeof S>"u"?(i.push(b),++g):(s.push([S,b]),m=p[b]||0,v.push([S-m,b-g]),d.push(b===S),S!==b&&h.push([S,b]))}),o.reverse(),new Rf(r,t,i,o,h,s,v,d)}var If=function(){function r(e,n){e===void 0&&(e=[]),this.findKeyCallback=n,this.list=[].slice.call(e)}var t=r.prototype;return t.update=function(e){var n=[].slice.call(e),a=tn(this.list,n,this.findKeyCallback);return this.list=n,a},r}(),Da=function(r,t){return Da=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])},Da(r,t)};function rn(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Da(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Mr=function(){return Mr=Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Mr.apply(this,arguments)};function Cs(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(r);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(r,n[a])&&(e[n[a]]=r[n[a]]);return e}function Qi(r,t,e){if(e||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return r.concat(i||Array.prototype.slice.call(t))}function to(r){var t=0;return r.map(function(e){return e==null?"$compat".concat(++t):"".concat(e)})}function ws(r){var t=[];return r.forEach(function(e){t=t.concat($t(e)?ws(e):e)}),t}function oa(r,t){if(!t)return r;for(var e in t)Vn(r[e])&&(r[e]=t[e]);return r}function In(r,t){if(r===t)return!1;for(var e in r)if(!(e in t))return!0;for(var e in t)if(r[e]!==t[e])return!0;return!1}function ro(r){var t=r.className,e=Cs(r,["className"]);return t!=null&&(e.class=t),delete e.style,delete e.children,e}function eo(r){var t={},e={};for(var n in r)n.indexOf("on")===0?e[n]=r[n]:t[n]=r[n];return[t,e]}function Wn(r){if(!r)return null;var t=r.b;return Me(t)?t:Wn(r.c)}function Ms(r){var t=r.parentNode;t&&t.removeChild(r)}function Ts(r){r.forEach(function(t){t()})}function Pf(){return this.constructor(this.props,this.context)}var ri=0,Yn=function(){function r(e,n,a,i,o,s,l){l===void 0&&(l={}),this.t=e,this.d=n,this.k=a,this.i=i,this.c=o,this.ref=s,this.ps=l,this.typ="prov",this._ps=[],this._cs={},this._hyd=null,this._sel=!1}var t=r.prototype;return t.s=function(){return!0},t.u=function(e,n,a,i,o){var s=this,l=s.d,u=Ef(n).filter(function(p){return p.$_req}),f=ws(u.map(function(p){return p.$_subs})),c=dr(f,function(p){return p.d===l});if(s.b&&!vr(a)&&!o&&!s.s(a.props,i)&&!c){var v=f.reduce(function(p,h){var g=h.d;return p[0]?p[0].d===g&&p.push(h):g>l&&p.push(h),p},[]);return v.forEach(function(p){en(p,p._ps,[p.o],e,n,!0)}),!1}s.o=a,s.ss(i);var d=s.ps;return vr(a)||(s.ps=a.props,s.ref=a.ref),ei(this),s.r(e,n,s.b?d:{},i),!0},t.md=function(){this.rr()},t.ss=function(){},t.ud=function(){this.rr()},t.rr=function(){var e=this,n=e.ref,a=e.fr;n&&n(a?a.current:e.b)},r}();function Os(){return Object.__CROACT_CURRENT_INSTNACE__}function zf(){return ri}function Af(r){ri=r}function ei(r){return Object.__CROACT_CURRENT_INSTNACE__=r,ri=0,r}var ni=function(){function r(e,n){e===void 0&&(e={}),this.props=e,this.context=n,this.state={},this.$_timer=0,this.$_state={},this.$_subs=[],this.$_cs={}}var t=r.prototype;return t.render=function(){return null},t.shouldComponentUpdate=function(e,n){return this.props!==e||this.state!==n},t.setState=function(e,n,a){var i=this;i.$_timer||(i.$_state={}),clearTimeout(i.$_timer),i.$_timer=0,i.$_state=Mr(Mr({},i.$_state),e),a?i.$_setState(n,a):i.$_timer=window.setTimeout(function(){i.$_timer=0,i.$_setState(n,a)})},t.forceUpdate=function(e){this.setState({},e,!0)},t.componentDidMount=function(){},t.componentDidUpdate=function(e,n){},t.componentWillUnmount=function(){},t.$_setState=function(e,n){var a=[],i=this.$_p,o=en(i.c,[i],[i.o],a,i._cs,Mr(Mr({},this.state),this.$_state),n);o&&(e&&a.push(e),Ts(a),ei(null))},r}(),Rs=function(r){rn(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}var e=t.prototype;return e.shouldComponentUpdate=function(n,a){return In(this.props,n)||In(this.state,a)},t}(ni);function Is(r){var t=function(e){t.current=e};return t.current=r,t}function kf(r){return r._fr=!0,r}function Bf(r,t,e,n){var a,i;return!((a=r==null?void 0:r.prototype)===null||a===void 0)&&a.render?i=new r(t,e):(i=new ni(t,e),i.constructor=r,r._fr?(n.fr=Is(),i.render=function(){return this.constructor(this.props,n.fr)}):i.render=Pf),i.$_p=n,i}var Gf=function(r){rn(t,r);function t(n,a,i,o,s,l,u){u===void 0&&(u={});var f=r.call(this,n,a,i,o,s,l,oa(u,n.defaultProps))||this;return f.typ="comp",f._usefs=[],f._uefs=[],f._defs=[],f}var e=t.prototype;return e.s=function(n,a){var i=this.b;return i.shouldComponentUpdate(oa(n,this.t.defaultProps),a||i.state)!==!1},e.r=function(n,a,i){var o,s,l=this,u=l.t;l.ps=oa(l.ps,l.t.defaultProps);var f=l.ps,c=!l.b,v=u.contextType,d=l.b,p=v==null?void 0:v.get(l);l._cs=a,c?(d=Bf(u,f,p,l),l.b=d):(d.props=f,d.context=p);var h=d.state;l._usefs=[],l._uefs=[];var g=d.render();((s=(o=g==null?void 0:g.props)===null||o===void 0?void 0:o.children)===null||s===void 0?void 0:s.length)===0&&(g.props.children=l.ps.children);var m=Mr(Mr({},a),d.$_cs);en(l,l._ps,g?[g]:[],n,m),c?l._uefs.push(function(){v==null||v.register(l),d.componentDidMount()}):l._uefs.push(function(){d.componentDidUpdate(i,h)}),n.push(function(){l._usefs.forEach(function(_){_()}),c?l.md():l.ud(),l._defs=l._uefs.map(function(_){return _()})})},e.ss=function(n){var a=this.b;!a||!n||(a.state=n)},e.un=function(){var n,a=this;a._ps.forEach(function(o){o.un()});var i=a.t;(n=i.contextType)===null||n===void 0||n.unregister(a),clearTimeout(a.b.$_timer),a._defs.forEach(function(o){o&&o()}),a.b.componentWillUnmount()},t}(Yn);function Nf(r,t,e){var n=ai(ro(r),ro(t)),a=n.added,i=n.removed,o=n.changed;for(var s in a)e.setAttribute(s,a[s]);for(var l in o)e.setAttribute(l,o[l][1]);for(var u in i)e.removeAttribute(u)}function Ff(r,t,e){var n=ai(r,t),a=n.added,i=n.removed;for(var o in i)e.e(o,!0);for(var s in a)e.e(s)}function ai(r,t){var e=Nr(r),n=Nr(t),a=tn(e,n,function(l){return l}),i={},o={},s={};return a.added.forEach(function(l){var u=n[l];i[u]=t[u]}),a.removed.forEach(function(l){var u=e[l];o[u]=r[u]}),a.maintained.forEach(function(l){var u=l[0],f=e[u],c=[r[f],t[f]];r[f]!==t[f]&&(s[f]=c)}),{added:i,removed:o,changed:s}}function Lf(r,t,e){var n=e.style,a=ai(r,t),i=a.added,o=a.removed,s=a.changed;for(var l in i){var u=xn(l,"-");n.setProperty(u,i[l])}for(var l in s){var f=xn(l,"-");n.setProperty(f,s[l][1])}for(var l in o){var c=xn(l,"-");n.removeProperty(c)}}function Hf(r){return r.replace(/^on/g,"").toLowerCase()}var Vf=function(r){rn(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.typ="elem",n._es={},n._svg=!1,n}var e=t.prototype;return e.e=function(n,a){var i=this,o=i._es,s=i.b,l=Hf(n);a?(jt(s,l,o[n]),delete o[n]):(o[n]=function(u){var f,c;(c=(f=i.ps)[n])===null||c===void 0||c.call(f,u)},er(s,l,o[n]))},e.s=function(n){return In(this.ps,n)},e.r=function(n,a,i){var o,s=this,l=!s.b,u=s.ps;if(l){var f=Wn(s.c),c=!1;s._svg||s.t==="svg"?c=!0:c=f&&f.ownerSVGElement,s._svg=c;var v=(o=s._hyd)===null||o===void 0?void 0:o.splice(0,1)[0],d=s.t;if(v)s._hyd=[].slice.call(v.children||[]);else{var p=we(f);c?v=p.createElementNS("http://www.w3.org/2000/svg",d):v=p.createElement(d)}s.b=v}en(s,s._ps,u.children,n,a);var h=s.b,g=eo(i),m=g[0],_=g[1],b=eo(u),S=b[0],y=b[1];return Nf(m,S,h),Ff(_,y,s),Lf(i.style||{},u.style||{},h),n.push(function(){l?s.md():s.ud()}),!0},e.un=function(){var n=this,a=n._es,i=n.b;for(var o in a)jt(i,o,a[o]);n._ps.forEach(function(s){s.un()}),n._es={},n._sel||Ms(i)},t}(Yn);function $e(r){if(!r||Me(r))return r;var t=r.$_p._ps;return t.length?$e(t[0].b):null}function Ps(r){if(r){if(r.b&&Me(r.b))return r;var t=r._ps;return t.length?Ps(t[0]):null}}function Dr(r,t){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];var a=t||{},i=a.key,o=a.ref,s=Cs(a,["key","ref"]);return{type:r,key:i,ref:o,props:Mr(Mr({},s),{children:Ss(e).filter(function(l){return l!=null&&l!==!1})})}}var zs=function(r){rn(t,r);function t(n,a){a===void 0&&(a=0);var i=r.call(this,"container",a,"container",0,null)||this;return i.typ="container",i.b=n,i}var e=t.prototype;return e.r=function(){return!0},e.un=function(){},t}(Yn),Wf=function(r){rn(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n.typ="text",n}var e=t.prototype;return e.r=function(n){var a,i=this,o=!i.b;if(o){var s=Wn(i.c),l=(a=i._hyd)===null||a===void 0?void 0:a.splice(0,1)[0];i.b=l||we(s).createTextNode(i.t.replace("text_",""))}return n.push(function(){o?i.md():i.ud()}),!0},e.un=function(){Ms(this.b)},t}(Yn);function Yf(r,t,e){var n=e.map(function(l){return vr(l)?null:l.key}),a=to(t.map(function(l){return l.k})),i=to(n),o=tn(a,i,function(l){return l});o.removed.forEach(function(l){t.splice(l,1)[0].un()}),o.ordered.forEach(function(l){var u=l[0],f=l[1],c=t.splice(u,1)[0];t.splice(f,0,c);var v=$e(c.b),d=$e(t[f+1]&&t[f+1].b);v&&v.parentNode.insertBefore(v,d)}),o.added.forEach(function(l){t.splice(l,0,no(e[l],n[l],l,r))});var s=o.maintained.filter(function(l){l[0];var u=l[1],f=e[u],c=t[u],v=vr(f)?"text_".concat(f):f.type;return v!==c.t?(c.un(),t.splice(u,1,no(f,n[u],u,r)),!0):(c.i=u,!1)});return Qi(Qi([],o.added,!0),s.map(function(l){l[0];var u=l[1];return u}),!0)}function Xf(r,t){for(var e=r._ps,n=e.length,a=t.i+1;a<n;++a){var i=$e(e[a].b);if(i)return i}return null}function no(r,t,e,n){var a=n.d+1;if(vr(r)||be(r))return new Wf("text_".concat(r),a,t,e,n,null,{});var i=r.type,o=typeof i=="string"?Vf:Gf;return new o(i,a,t,e,n,r.ref,r.props)}function en(r,t,e,n,a,i,o){var s=Yf(r,t,e),l=r._hyd,u=t.filter(function(c,v){return c._hyd=l,c.u(n,a,e[v],i,o)});r.typ==="container"&&r._sel&&t.forEach(function(c){var v=Ps(c);v&&(v._sel=!0)}),r._hyd=null;var f=Wn(r);return f&&s.reverse().forEach(function(c){var v=t[c],d=$e(v.b);if(d&&f!==d&&!d.parentNode){var p=Xf(r,v);f.insertBefore(d,p)}}),u.length>0}function $f(r,t,e,n){e===void 0&&(e=t.__CROACT__),n===void 0&&(n={});var a=!!e;e||(e=new zs(t));var i=[];return en(e,e._ps,r?[r]:[],i,n,void 0,void 0),Ts(i),ei(null),a||(t.__CROACT__=e),e}function ao(r,t,e){return!e&&r&&(e=new zs(t.parentElement),e._hyd=[t],e._sel=!0),$f(r,t,e),e}function As(r){var t=Os(),e=t._hs||(t._hs=[]),n=zf(),a=e[n];if(Af(n+1),a){if(!In(a.deps,r.deps))return a.updated=!1,a;e[n]=r}else e.push(r);return r.value=r.func(),r.updated=!0,r}function qf(r,t){var e=As({func:r,deps:t});return e.value}function jf(r){return qf(function(){return Is(r)},[])}function ks(r,t,e){var n=Os(),a=As({func:function(){return r},deps:t}),i=e?n._usefs:n._uefs;a.updated?i.push(function(){return a.effect&&a.effect(),a.effect=r(),a.effect}):i.push(function(){return a.effect})}function Uf(r,t,e){ks(function(){r==null||r(t())},e,!0)}function ii(r,t){for(var e=r.length,n=0;n<e;++n)if(t(r[n],n))return!0;return!1}function Bs(r,t){for(var e=r.length,n=0;n<e;++n)if(t(r[n],n))return r[n];return null}function Gs(r){var t=r;if(typeof t>"u"){if(typeof navigator>"u"||!navigator)return"";t=navigator.userAgent||""}return t.toLowerCase()}function oi(r,t){try{return new RegExp(r,"g").exec(t)}catch{return null}}function Zf(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var r=navigator.userAgentData,t=r.brands||r.uaList;return!!(t&&t.length)}function Kf(r,t){var e=oi("("+r+")((?:\\/|\\s|:)([0-9|\\.|_]+))",t);return e?e[3]:""}function xa(r){return r.replace(/_/g,".")}function Ae(r,t){var e=null,n="-1";return ii(r,function(a){var i=oi("("+a.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",t);return!i||a.brand?!1:(e=a,n=i[3]||"-1",a.versionAlias?n=a.versionAlias:a.versionTest&&(n=Kf(a.versionTest.toLowerCase(),t)||n),n=xa(n),!0)}),{preset:e,version:n}}function ze(r,t){var e={brand:"",version:"-1"};return ii(r,function(n){var a=Ns(t,n);return a?(e.brand=n.id,e.version=n.versionAlias||a.version,e.version!=="-1"):!1}),e}function Ns(r,t){return Bs(r,function(e){var n=e.brand;return oi(""+t.test,n.toLowerCase())})}var Ca=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],Fs=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],wa=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],Ls=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],Hs=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function Vs(r){return!!Ae(Ls,r).preset}function Jf(r){var t=Gs(r),e=!!/mobi/g.exec(t),n={name:"unknown",version:"-1",majorVersion:-1,webview:Vs(t),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},a={name:"unknown",version:"-1",majorVersion:-1},i=Ae(Ca,t),o=i.preset,s=i.version,l=Ae(Hs,t),u=l.preset,f=l.version,c=Ae(Fs,t);if(n.chromium=!!c.preset,n.chromiumVersion=c.version,!n.chromium){var v=Ae(wa,t);n.webkit=!!v.preset,n.webkitVersion=v.version}return u&&(a.name=u.id,a.version=f,a.majorVersion=parseInt(f,10)),o&&(n.name=o.id,n.version=s,n.webview&&a.name==="ios"&&n.name!=="safari"&&(n.webview=!1)),n.majorVersion=parseInt(n.version,10),{browser:n,os:a,isMobile:e,isHints:!1}}function Qf(r){var t=navigator.userAgentData,e=(t.uaList||t.brands).slice(),n=r&&r.fullVersionList,a=t.mobile||!1,i=e[0],o=(r&&r.platform||t.platform||navigator.platform).toLowerCase(),s={name:i.brand,version:i.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!ze(Ls,e).brand||Vs(Gs())},l={name:"unknown",version:"-1",majorVersion:-1};s.webkit=!s.chromium&&ii(wa,function(p){return Ns(e,p)});var u=ze(Fs,e);if(s.chromium=!!u.brand,s.chromiumVersion=u.version,!s.chromium){var f=ze(wa,e);s.webkit=!!f.brand,s.webkitVersion=f.version}var c=Bs(Hs,function(p){return new RegExp(""+p.test,"g").exec(o)});if(l.name=c?c.id:"",r&&(l.version=r.platformVersion),n&&n.length){var v=ze(Ca,n);s.name=v.brand||s.name,s.version=v.version||s.version}else{var d=ze(Ca,e);s.name=d.brand||s.name,s.version=d.brand&&r?r.uaFullVersion:d.version}return s.webkit&&(l.name=a?"ios":"mac"),l.name==="ios"&&s.webview&&(s.version="-1"),l.version=xa(l.version),s.version=xa(s.version),l.majorVersion=parseInt(l.version,10),s.majorVersion=parseInt(s.version,10),{browser:s,os:l,isMobile:a,isHints:!0}}function tc(r){return typeof r>"u"&&Zf()?Qf():Jf(r)}function rc(r,t,e,n,a,i){for(var o=0;o<a;++o){var s=e+o*a,l=n+o*a;r[s]+=r[l]*i,t[s]+=t[l]*i}}function ec(r,t,e,n,a){for(var i=0;i<a;++i){var o=e+i*a,s=n+i*a,l=r[o],u=t[o];r[o]=r[s],r[s]=l,t[o]=t[s],t[s]=u}}function nc(r,t,e,n,a){for(var i=0;i<n;++i){var o=e+i*n;r[o]/=a,t[o]/=a}}function Ws(r,t,e){e===void 0&&(e=Math.sqrt(r.length));for(var n=r.slice(),a=0;a<e;++a)n[a*e+t-1]=0,n[(t-1)*e+a]=0;return n[(t-1)*(e+1)]=1,n}function Rr(r,t){t===void 0&&(t=Math.sqrt(r.length));for(var e=r.slice(),n=Pt(t),a=0;a<t;++a){var i=t*a+a;if(!pt(e[i],Xt)){for(var o=a+1;o<t;++o)if(e[t*a+o]){ec(e,n,a,o,t);break}}if(!pt(e[i],Xt))return[];nc(e,n,a,t,e[i]);for(var o=0;o<t;++o){var s=o,l=o+a*t,u=e[l];!pt(u,Xt)||a===o||rc(e,n,s,a,t,-u)}}return n}function ac(r,t){t===void 0&&(t=Math.sqrt(r.length));for(var e=[],n=0;n<t;++n)for(var a=0;a<t;++a)e[a*t+n]=r[t*n+a];return e}function Ys(r,t){t===void 0&&(t=Math.sqrt(r.length));for(var e=[],n=r[t*t-1],a=0;a<t-1;++a)e[a]=r[t*(t-1)+a]/n;return e[t-1]=0,e}function ic(r,t){for(var e=Pt(t),n=0;n<t-1;++n)e[t*(t-1)+n]=r[n]||0;return e}function ae(r,t){for(var e=r.slice(),n=r.length;n<t-1;++n)e[n]=0;return e[t-1]=1,e}function wr(r,t,e){if(t===void 0&&(t=Math.sqrt(r.length)),t===e)return r;for(var n=Pt(e),a=Math.min(t,e),i=0;i<a-1;++i){for(var o=0;o<a-1;++o)n[i*e+o]=r[i*t+o];n[(i+1)*e-1]=r[(i+1)*t-1],n[(e-1)*e+i]=r[(t-1)*t+i]}return n[e*e-1]=r[t*t-1],n}function Pn(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];var n=Pt(r);return t.forEach(function(a){n=Mt(n,a,r)}),n}function Mt(r,t,e){e===void 0&&(e=Math.sqrt(r.length));var n=[],a=r.length/e,i=t.length/a;if(a){if(!i)return r}else return t;for(var o=0;o<e;++o)for(var s=0;s<i;++s){n[s*e+o]=0;for(var l=0;l<a;++l)n[s*e+o]+=r[l*e+o]*t[s*a+l]}return n}function xt(r,t){for(var e=Math.min(r.length,t.length),n=r.slice(),a=0;a<e;++a)n[a]=n[a]+t[a];return n}function st(r,t){for(var e=Math.min(r.length,t.length),n=r.slice(),a=0;a<e;++a)n[a]=n[a]-t[a];return n}function oc(r,t){return t===void 0&&(t=r.length===6),t?[r[0],r[1],0,r[2],r[3],0,r[4],r[5],1]:r}function Xs(r,t){return t===void 0&&(t=r.length===9),t?[r[0],r[1],r[3],r[4],r[6],r[7]]:r}function ar(r,t,e){e===void 0&&(e=t.length);var n=Mt(r,t,e),a=n[e-1];return n.map(function(i){return i/a})}function sc(r,t){return Mt(r,[1,0,0,0,0,Math.cos(t),Math.sin(t),0,0,-Math.sin(t),Math.cos(t),0,0,0,0,1],4)}function lc(r,t){return Mt(r,[Math.cos(t),0,-Math.sin(t),0,0,1,0,0,Math.sin(t),0,Math.cos(t),0,0,0,0,1],4)}function uc(r,t){return Mt(r,an(t,4))}function vn(r,t){var e=t[0],n=e===void 0?1:e,a=t[1],i=a===void 0?1:a,o=t[2],s=o===void 0?1:o;return Mt(r,[n,0,0,0,0,i,0,0,0,0,s,0,0,0,0,1],4)}function nn(r,t){return ar(an(t,3),ae(r,3))}function sa(r,t){var e=t[0],n=e===void 0?0:e,a=t[1],i=a===void 0?0:a,o=t[2],s=o===void 0?0:o;return Mt(r,[1,0,0,0,0,1,0,0,0,0,1,0,n,i,s,1],4)}function io(r,t){return Mt(r,t,4)}function an(r,t){var e=Math.cos(r),n=Math.sin(r),a=Pt(t);return a[0]=e,a[1]=n,a[t]=-n,a[t+1]=e,a}function Pt(r){for(var t=r*r,e=[],n=0;n<t;++n)e[n]=n%(r+1)?0:1;return e}function si(r,t){for(var e=Pt(t),n=Math.min(r.length,t-1),a=0;a<n;++a)e[(t+1)*a]=r[a];return e}function ie(r,t){for(var e=Pt(t),n=Math.min(r.length,t-1),a=0;a<n;++a)e[t*(t-1)+a]=r[a];return e}function li(r,t,e,n,a,i,o,s){var l=r[0],u=r[1],f=t[0],c=t[1],v=e[0],d=e[1],p=n[0],h=n[1],g=a[0],m=a[1],_=i[0],b=i[1],S=o[0],y=o[1],D=s[0],x=s[1],E=[l,0,f,0,v,0,p,0,u,0,c,0,d,0,h,0,1,0,1,0,1,0,1,0,0,l,0,f,0,v,0,p,0,u,0,c,0,d,0,h,0,1,0,1,0,1,0,1,-g*l,-m*l,-_*f,-b*f,-S*v,-y*v,-D*p,-x*p,-g*u,-m*u,-_*c,-b*c,-S*d,-y*d,-D*h,-x*h],C=Rr(E,8);if(!C.length)return[];var w=Mt(C,[g,m,_,b,S,y,D,x],8);return w[8]=1,wr(ac(w),3,4)}var Fe=function(){return Fe=Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Fe.apply(this,arguments)};function fc(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function qe(r,t){return t===void 0&&(t=0),ve(Se(r,t))}function cc(r,t){var e=ar(r,[t[0],t[1]||0,t[2]||0,1],4),n=e[3]||1;return[e[0]/n,e[1]/n,e[2]/n]}function ve(r){var t=fc();return r.forEach(function(e){var n=e.matrixFunction,a=e.functionValue;n&&(t=n(t,a))}),t}function Se(r,t){t===void 0&&(t=0);var e=$t(r)?r:Xr(r);return e.map(function(n){var a=gs(n),i=a.prefix,o=a.value,s=null,l=i,u="";if(i==="translate"||i==="translateX"||i==="translate3d"){var f=Cr(t)?Fe(Fe({},t),{"o%":t["%"]}):{"%":t,"o%":t},c=re(o).map(function(M,I){return I===0&&"x%"in f?f["%"]=t["x%"]:I===1&&"y%"in f?f["%"]=t["y%"]:f["%"]=t["o%"],wt(M,f)}),v=c[0],d=c[1],p=d===void 0?0:d,h=c[2],g=h===void 0?0:h;s=sa,u=[v,p,g]}else if(i==="translateY"){var m=Cr(t)?Fe({"%":t["y%"]},t):{"%":t},p=wt(o,m);s=sa,u=[0,p,0]}else if(i==="translateZ"){var g=parseFloat(o);s=sa,u=[0,0,g]}else if(i==="scale"||i==="scale3d"){var _=re(o).map(function(M){return parseFloat(M)}),b=_[0],S=_[1],y=S===void 0?b:S,D=_[2],x=D===void 0?1:D;s=vn,u=[b,y,x]}else if(i==="scaleX"){var b=parseFloat(o);s=vn,u=[b,1,1]}else if(i==="scaleY"){var y=parseFloat(o);s=vn,u=[1,y,1]}else if(i==="scaleZ"){var x=parseFloat(o);s=vn,u=[1,1,x]}else if(i==="rotate"||i==="rotateZ"||i==="rotateX"||i==="rotateY"){var E=Qe(o),C=E.unit,w=E.value,P=C==="rad"?w:w*Math.PI/180;i==="rotate"||i==="rotateZ"?(l="rotateZ",s=uc):i==="rotateX"?s=sc:i==="rotateY"&&(s=lc),u=P}else if(i==="matrix3d")s=io,u=re(o).map(function(M){return parseFloat(M)});else if(i==="matrix"){var O=re(o).map(function(M){return parseFloat(M)});s=io,u=[O[0],O[1],0,0,O[2],O[3],0,0,0,0,1,0,O[4],O[5],0,1]}else l="";return{name:i,functionName:l,value:o,matrixFunction:s,functionValue:u}})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Ma=function(r,t){return Ma=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)n.hasOwnProperty(a)&&(e[a]=n[a])},Ma(r,t)};function vc(r,t){Ma(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var $s=typeof Map=="function"?void 0:function(){var r=0;return function(t){return t.__DIFF_KEY__||(t.__DIFF_KEY__=++r)}}(),qs=function(r){vc(t,r);function t(e){return e===void 0&&(e=[]),r.call(this,e,$s)||this}return t}(If);function dc(r,t){return tn(r,t,$s)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ta=function(){return Ta=Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ta.apply(this,arguments)};function pc(){for(var r=0,t=0,e=arguments.length;t<e;t++)r+=arguments[t].length;for(var n=Array(r),a=0,t=0;t<e;t++)for(var i=arguments[t],o=0,s=i.length;o<s;o++,a++)n[a]=i[o];return n}var hc=function(){function r(){this._events={}}var t=r.prototype;return t.on=function(e,n){if(Cr(e))for(var a in e)this.on(a,e[a]);else this._addEvent(e,n,{});return this},t.off=function(e,n){if(!e)this._events={};else if(Cr(e))for(var a in e)this.off(a);else if(!n)this._events[e]=[];else{var i=this._events[e];if(i){var o=Gr(i,function(s){return s.listener===n});o>-1&&i.splice(o,1)}}return this},t.once=function(e,n){var a=this;return n&&this._addEvent(e,n,{once:!0}),new Promise(function(i){a._addEvent(e,i,{once:!0})})},t.emit=function(e,n){var a=this;n===void 0&&(n={});var i=this._events[e];if(!e||!i)return!0;var o=!1;return n.eventType=e,n.stop=function(){o=!0},n.currentTarget=this,pc(i).forEach(function(s){s.listener(n),s.once&&a.off(e,s.listener)}),!o},t.trigger=function(e,n){return n===void 0&&(n={}),this.emit(e,n)},t._addEvent=function(e,n,a){var i=this._events;i[e]=i[e]||[];var o=i[e];o.push(Ta({listener:n},a))},r}();const Xn=hc;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Oa=function(r,t){return Oa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)n.hasOwnProperty(a)&&(e[a]=n[a])},Oa(r,t)};function gc(r,t){Oa(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var de=function(){return de=Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},de.apply(this,arguments)};function mc(r){var t=r.container;return t===document.body?[t.scrollLeft||document.documentElement.scrollLeft,t.scrollTop||document.documentElement.scrollTop]:[t.scrollLeft,t.scrollTop]}function oo(r,t){return r.addEventListener("scroll",t),function(){r.removeEventListener("scroll",t)}}function dn(r){if(r){if(vr(r))return document.querySelector(r)}else return null;if(Ka(r))return r();if(r instanceof Element)return r;if("current"in r)return r.current;if("value"in r)return r.value}var _c=function(r){gc(t,r);function t(){var n=r!==null&&r.apply(this,arguments)||this;return n._startRect=null,n._startPos=[],n._prevTime=0,n._timer=0,n._prevScrollPos=[0,0],n._isWait=!1,n._flag=!1,n._currentOptions=null,n._lock=!1,n._unregister=null,n._onScroll=function(){var a=n._currentOptions;n._lock||!a||n.emit("scrollDrag",{next:function(i){n.checkScroll({container:a.container,inputEvent:i})}})},n}var e=t.prototype;return e.dragStart=function(n,a){var i=dn(a.container);if(!i){this._flag=!1;return}var o=0,s=0,l=0,u=0;if(i===document.body)l=window.innerWidth,u=window.innerHeight;else{var f=i.getBoundingClientRect();o=f.top,s=f.left,l=f.width,u=f.height}this._flag=!0,this._startPos=[n.clientX,n.clientY],this._startRect={top:o,left:s,width:l,height:u},this._prevScrollPos=this._getScrollPosition([0,0],a),this._currentOptions=a,this._registerScrollEvent(a)},e.drag=function(n,a){if(clearTimeout(this._timer),!!this._flag){var i=n.clientX,o=n.clientY,s=a.threshold,l=s===void 0?0:s,u=this,f=u._startRect,c=u._startPos;this._currentOptions=a;var v=[0,0];return f.top>o-l?(c[1]>f.top||o<c[1])&&(v[1]=-1):f.top+f.height<o+l&&(c[1]<f.top+f.height||o>c[1])&&(v[1]=1),f.left>i-l?(c[0]>f.left||i<c[0])&&(v[0]=-1):f.left+f.width<i+l&&(c[0]<f.left+f.width||i>c[0])&&(v[0]=1),!v[0]&&!v[1]?!1:this._continueDrag(de(de({},a),{direction:v,inputEvent:n,isDrag:!0}))}},e.checkScroll=function(n){var a=this;if(this._isWait)return!1;var i=n.prevScrollPos,o=i===void 0?this._prevScrollPos:i,s=n.direction,l=n.throttleTime,u=l===void 0?0:l,f=n.inputEvent,c=n.isDrag,v=this._getScrollPosition(s||[0,0],n),d=v[0]-o[0],p=v[1]-o[1],h=s||[d?Math.abs(d)/d:0,p?Math.abs(p)/p:0];return this._prevScrollPos=v,this._lock=!1,!d&&!p?!1:(this.emit("move",{offsetX:h[0]?d:0,offsetY:h[1]?p:0,inputEvent:f}),u&&c&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){a._continueDrag(n)},u)),!0)},e.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},e._getScrollPosition=function(n,a){var i=a.container,o=a.getScrollPosition,s=o===void 0?mc:o;return s({container:dn(i),direction:n})},e._continueDrag=function(n){var a=this,i,o=n.container,s=n.direction,l=n.throttleTime,u=n.useScroll,f=n.isDrag,c=n.inputEvent;if(!(!this._flag||f&&this._isWait)){var v=Xe(),d=Math.max(l+this._prevTime-v,0);if(d>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){a._continueDrag(n)},d),!1;this._prevTime=v;var p=this._getScrollPosition(s,n);this._prevScrollPos=p,f&&(this._isWait=!0),u||(this._lock=!0);var h={container:dn(o),direction:s,inputEvent:c};return(i=n.requestScroll)===null||i===void 0||i.call(n,h),this.emit("scroll",h),this._isWait=!1,u||this.checkScroll(de(de({},n),{prevScrollPos:p,direction:s,inputEvent:c}))}},e._registerScrollEvent=function(n){this._unregisterScrollEvent();var a=n.checkScrollEvent;if(a){var i=a===!0?oo:a,o=dn(n.container);a===!0&&(o===document.body||o===document.documentElement)?this._unregister=oo(window,this._onScroll):this._unregister=i(o,this._onScroll)}},e._unregisterScrollEvent=function(){var n;(n=this._unregister)===null||n===void 0||n.call(this),this._unregister=null},t}(Xn);const bc=_c;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Sc(){for(var r=0,t=0,e=arguments.length;t<e;t++)r+=arguments[t].length;for(var n=Array(r),a=0,t=0;t<e;t++)for(var i=arguments[t],o=0,s=i.length;o<s;o++,a++)n[a]=i[o];return n}function cr(r){return pt(r,Xt)}function Ec(r,t){return r.every(function(e,n){return cr(e-t[n])===0})}function yc(r,t){return!cr(r[0]-t[0])&&!cr(r[1]-t[1])}function js(r){return r.length<3?0:Math.abs(yf(r.map(function(t,e){var n=r[e+1]||r[0];return t[0]*n[1]-n[0]*t[1]})))/2}function so(r,t){var e=t.width,n=t.height,a=t.left,i=t.top,o=oe(r),s=o.minX,l=o.minY,u=o.maxX,f=o.maxY,c=e/(u-s),v=n/(f-l);return r.map(function(d){return[a+(d[0]-s)*c,i+(d[1]-l)*v]})}function oe(r){var t=r.map(function(n){return n[0]}),e=r.map(function(n){return n[1]});return{minX:Math.min.apply(Math,t),minY:Math.min.apply(Math,e),maxX:Math.max.apply(Math,t),maxY:Math.max.apply(Math,e)}}function Ra(r,t,e){var n=r[0],a=r[1],i=oe(t),o=i.minX,s=i.maxX,l=[[o,a],[s,a]],u=zn(l[0],l[1]),f=Ia(t),c=[];if(f.forEach(function(p){var h=zn(p[0],p[1]),g=p[0];if(Ec(u,h))c.push({pos:r,line:p,type:"line"});else{var m=Us(ui(u,h),[l,p]);m.forEach(function(_){p.some(function(b){return yc(b,_)})?c.push({pos:_,line:p,type:"point"}):cr(g[1]-a)!==0&&c.push({pos:_,line:p,type:"intersection"})})}}),!e&&dr(c,function(p){return p[0]===n}))return!0;var v=0,d={};return c.forEach(function(p){var h=p.pos,g=p.type,m=p.line;if(!(h[0]>n))if(g==="intersection")++v;else{if(g==="line")return;if(g==="point"){var _=dr(m,function(y){return y[1]!==a}),b=d[h[0]],S=_[1]>a?1:-1;b?b!==S&&++v:d[h[0]]=S}}}),v%2===1}function zn(r,t){var e=r[0],n=r[1],a=t[0],i=t[1],o=a-e,s=i-n;Math.abs(o)<Xt&&(o=0),Math.abs(s)<Xt&&(s=0);var l=0,u=0,f=0;return o?s?(l=-s/o,u=1,f=-l*e-n):(u=1,f=-n):s&&(l=-1,f=e),[l,u,f]}function ui(r,t){var e=r[0],n=r[1],a=r[2],i=t[0],o=t[1],s=t[2],l=e===0&&i===0,u=n===0&&o===0,f=[];if(l&&u)return[];if(l){var c=-a/n,v=-s/o;return c!==v?[]:[[-1/0,c],[1/0,c]]}else if(u){var d=-a/e,p=-s/i;return d!==p?[]:[[d,-1/0],[d,1/0]]}else if(e===0){var h=-a/n,g=-(o*h+s)/i;f=[[g,h]]}else if(i===0){var h=-s/o,g=-(n*h+a)/e;f=[[g,h]]}else if(n===0){var g=-a/e,h=-(i*g+s)/o;f=[[g,h]]}else if(o===0){var g=-s/i,h=-(e*g+a)/n;f=[[g,h]]}else{var g=(n*s-o*a)/(o*e-n*i),h=-(e*g+a)/n;f=[[g,h]]}return f.map(function(m){return[m[0],m[1]]})}function Us(r,t){var e=t.map(function(c){return[0,1].map(function(v){return[Math.min(c[0][v],c[1][v]),Math.max(c[0][v],c[1][v])]})}),n=[];if(r.length===2){var a=r[0],i=a[0],o=a[1];if(cr(i-r[1][0])){if(!cr(o-r[1][1])){var u=Math.max.apply(Math,e.map(function(c){return c[0][0]})),f=Math.min.apply(Math,e.map(function(c){return c[0][1]}));if(cr(u-f)>0)return[];n=[[u,o],[f,o]]}}else{var s=Math.max.apply(Math,e.map(function(c){return c[1][0]})),l=Math.min.apply(Math,e.map(function(c){return c[1][1]}));if(cr(s-l)>0)return[];n=[[i,s],[i,l]]}}return n.length||(n=r.filter(function(c){var v=c[0],d=c[1];return e.every(function(p){return 0<=cr(v-p[0][0])&&0<=cr(p[0][1]-v)&&0<=cr(d-p[1][0])&&0<=cr(p[1][1]-d)})})),n.map(function(c){return[cr(c[0]),cr(c[1])]})}function Ia(r){return Sc(r.slice(1),[r[0]]).map(function(t,e){return[r[e],t]})}function Dc(r,t){var e=r.slice(),n=t.slice();Ki(e)===-1&&e.reverse(),Ki(n)===-1&&n.reverse();var a=Ia(e),i=Ia(n),o=a.map(function(f){return zn(f[0],f[1])}),s=i.map(function(f){return zn(f[0],f[1])}),l=[];o.forEach(function(f,c){var v=a[c],d=[];s.forEach(function(p,h){var g=ui(f,p),m=Us(g,[v,i[h]]);d.push.apply(d,m.map(function(_){return{index1:c,index2:h,pos:_,type:"intersection"}}))}),d.sort(function(p,h){return zr(v[0],p.pos)-zr(v[0],h.pos)}),l.push.apply(l,d),Ra(v[1],n)&&l.push({index1:c,index2:-1,pos:v[1],type:"inside"})}),i.forEach(function(f,c){if(Ra(f[1],e)){var v=!1,d=Gr(l,function(p){var h=p.index2;return h===c?(v=!0,!1):!!v});d===-1&&(v=!1,d=Gr(l,function(p){var h=p.index1,g=p.index2;return h===-1&&g+1===c?(v=!0,!1):!!v})),d===-1?l.push({index1:-1,index2:c,pos:f[1],type:"inside"}):l.splice(d,0,{index1:-1,index2:c,pos:f[1],type:"inside"})}});var u={};return l.filter(function(f){var c=f.pos,v=c[0]+"x"+c[1];return u[v]?!1:(u[v]=!0,!0)})}function xc(r,t){var e=Dc(r,t);return e.map(function(n){var a=n.pos;return a})}function Cc(r,t){var e=xc(r,t);return js(e)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Pa=function(r,t){return Pa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)n.hasOwnProperty(a)&&(e[a]=n[a])},Pa(r,t)};function wc(r,t){Pa(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Yt=function(){return Yt=Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Yt.apply(this,arguments)};function Mc(r,t){var e=t[0]-r[0],n=t[1]-r[1],a=Math.atan2(n,e);return a>=0?a:a+Math.PI*2}function la(r){return Mc([r[0].clientX,r[0].clientY],[r[1].clientX,r[1].clientY])/Math.PI*180}function Tc(r){return r.touches&&r.touches.length>=2}function pn(r){return r?r.touches?Rc(r.touches):[Zs(r)]:[]}function Oc(r){return r&&(r.type.indexOf("mouse")>-1||"button"in r)}function lo(r,t,e){var n=e.length,a=Le(r,n),i=a.clientX,o=a.clientY,s=a.originalClientX,l=a.originalClientY,u=Le(t,n),f=u.clientX,c=u.clientY,v=Le(e,n),d=v.clientX,p=v.clientY,h=i-f,g=o-c,m=i-d,_=o-p;return{clientX:s,clientY:l,deltaX:h,deltaY:g,distX:m,distY:_}}function ua(r){return Math.sqrt(Math.pow(r[0].clientX-r[1].clientX,2)+Math.pow(r[0].clientY-r[1].clientY,2))}function Rc(r){for(var t=Math.min(r.length,2),e=[],n=0;n<t;++n)e.push(Zs(r[n]));return e}function Zs(r){return{clientX:r.clientX,clientY:r.clientY}}function Le(r,t){t===void 0&&(t=r.length);for(var e={clientX:0,clientY:0,originalClientX:0,originalClientY:0},n=Math.min(r.length,t),a=0;a<n;++a){var i=r[a];e.originalClientX+="originalClientX"in i?i.originalClientX:i.clientX,e.originalClientY+="originalClientY"in i?i.originalClientY:i.clientY,e.clientX+=i.clientX,e.clientY+=i.clientY}return t?{clientX:e.clientX/t,clientY:e.clientY/t,originalClientX:e.originalClientX/t,originalClientY:e.originalClientY/t}:e}var fa=function(){function r(t){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=t,this.prevClients=t,this.length=t.length}return r.prototype.getAngle=function(t){return t===void 0&&(t=this.prevClients),la(t)},r.prototype.getRotation=function(t){return t===void 0&&(t=this.prevClients),la(t)-la(this.startClients)},r.prototype.getPosition=function(t,e){t===void 0&&(t=this.prevClients);var n=lo(t||this.prevClients,this.prevClients,this.startClients),a=n.deltaX,i=n.deltaY;return this.movement+=Math.sqrt(a*a+i*i),this.prevClients=t,n},r.prototype.getPositions=function(t){t===void 0&&(t=this.prevClients);for(var e=this.prevClients,n=this.startClients,a=Math.min(this.length,e.length),i=[],o=0;o<a;++o)i[o]=lo([t[o]],[e[o]],[n[o]]);return i},r.prototype.getMovement=function(t){var e=this.movement;if(!t)return e;var n=Le(t,this.length),a=Le(this.prevClients,this.length),i=n.clientX-a.clientX,o=n.clientY-a.clientY;return Math.sqrt(i*i+o*o)+e},r.prototype.getDistance=function(t){return t===void 0&&(t=this.prevClients),ua(t)},r.prototype.getScale=function(t){return t===void 0&&(t=this.prevClients),ua(t)/ua(this.startClients)},r.prototype.move=function(t,e){this.startClients.forEach(function(n){n.clientX-=t,n.clientY-=e}),this.prevClients.forEach(function(n){n.clientX-=t,n.clientY-=e})},r}(),uo=["textarea","input"],Ic=function(r){wc(t,r);function t(e,n){n===void 0&&(n={});var a=r.call(this)||this;a.options={},a.flag=!1,a.pinchFlag=!1,a.data={},a.isDrag=!1,a.isPinch=!1,a.clientStores=[],a.targets=[],a.prevTime=0,a.doubleFlag=!1,a._useMouse=!1,a._useTouch=!1,a._useDrag=!1,a._dragFlag=!1,a._isTrusted=!1,a._isMouseEvent=!1,a._isSecondaryButton=!1,a._preventMouseEvent=!1,a._prevInputEvent=null,a._isDragAPI=!1,a._isIdle=!0,a._preventMouseEventId=0,a._window=window,a.onDragStart=function(v,d){if(d===void 0&&(d=!0),!(!a.flag&&v.cancelable===!1)){var p=v.type.indexOf("drag")>=-1;if(!(a.flag&&p)){a._isDragAPI=!0;var h=a.options,g=h.container,m=h.pinchOutside,_=h.preventWheelClick,b=h.preventRightClick,S=h.preventDefault,y=h.checkInput,D=h.dragFocusedInput,x=h.preventClickEventOnDragStart,E=h.preventClickEventOnDrag,C=h.preventClickEventByCondition,w=a._useTouch,P=!a.flag;if(a._isSecondaryButton=v.which===3||v.button===2,_&&(v.which===2||v.button===1)||b&&(v.which===3||v.button===2))return a.stop(),!1;if(P){var O=a._window.document.activeElement,M=v.target;if(M){var I=M.tagName.toLowerCase(),z=uo.indexOf(I)>-1,F=M.isContentEditable;if(z||F){if(y||!D&&O===M)return!1;if(O&&(O===M||F&&O.isContentEditable&&O.contains(M)))if(D)M.blur();else return!1}else if((S||v.type==="touchstart")&&O){var H=O.tagName.toLowerCase();(O.isContentEditable||uo.indexOf(H)>-1)&&O.blur()}(x||E||C)&&er(a._window,"click",a._onClick,!0)}a.clientStores=[new fa(pn(v))],a._isIdle=!1,a.flag=!0,a.isDrag=!1,a._isTrusted=d,a._dragFlag=!0,a._prevInputEvent=v,a.data={},a.doubleFlag=Xe()-a.prevTime<200,a._isMouseEvent=Oc(v),!a._isMouseEvent&&a._preventMouseEvent&&a._allowMouseEvent();var V=a._preventMouseEvent||a.emit("dragStart",Yt(Yt({data:a.data,datas:a.data,inputEvent:v,isMouseEvent:a._isMouseEvent,isSecondaryButton:a._isSecondaryButton,isTrusted:d,isDouble:a.doubleFlag},a.getCurrentStore().getPosition()),{preventDefault:function(){v.preventDefault()},preventDrag:function(){a._dragFlag=!1}}));V===!1&&a.stop(),a._isMouseEvent&&a.flag&&S&&v.preventDefault()}if(!a.flag)return!1;var B=0;if(P?(a._attchDragEvent(),w&&m&&(B=setTimeout(function(){er(g,"touchstart",a.onDragStart,{passive:!1})}))):w&&m&&jt(g,"touchstart",a.onDragStart),a.flag&&Tc(v)){if(clearTimeout(B),P&&v.touches.length!==v.changedTouches.length)return;a.pinchFlag||a.onPinchStart(v)}}}},a.onDrag=function(v,d){if(a.flag){var p=a.options.preventDefault;!a._isMouseEvent&&p&&v.preventDefault(),a._prevInputEvent=v;var h=pn(v),g=a.moveClients(h,v,!1);if(a._dragFlag){if(a.pinchFlag||g.deltaX||g.deltaY){var m=a._preventMouseEvent||a.emit("drag",Yt(Yt({},g),{isScroll:!!d,inputEvent:v}));if(m===!1){a.stop();return}}a.pinchFlag&&a.onPinch(v,h)}a.getCurrentStore().getPosition(h,!0)}},a.onDragEnd=function(v){if(a.flag){var d=a.options,p=d.pinchOutside,h=d.container,g=d.preventClickEventOnDrag,m=d.preventClickEventOnDragStart,_=d.preventClickEventByCondition,b=a.isDrag;(g||m||_)&&requestAnimationFrame(function(){a._allowClickEvent()}),!_&&!m&&g&&!b&&a._allowClickEvent(),a._useTouch&&p&&jt(h,"touchstart",a.onDragStart),a.pinchFlag&&a.onPinchEnd(v);var S=v!=null&&v.touches?pn(v):[],y=S.length;y===0||!a.options.keepDragging?a.flag=!1:a._addStore(new fa(S));var D=a._getPosition(),x=Xe(),E=!b&&a.doubleFlag;a._prevInputEvent=null,a.prevTime=b||E?0:x,a.flag||(a._dettachDragEvent(),a._preventMouseEvent||a.emit("dragEnd",Yt({data:a.data,datas:a.data,isDouble:E,isDrag:b,isClick:!b,isMouseEvent:a._isMouseEvent,isSecondaryButton:a._isSecondaryButton,inputEvent:v,isTrusted:a._isTrusted},D)),a.clientStores=[],a._isMouseEvent||(a._preventMouseEvent=!0,clearTimeout(a._preventMouseEventId),a._preventMouseEventId=setTimeout(function(){a._preventMouseEvent=!1},200)),a._isIdle=!0)}},a.onBlur=function(){a.onDragEnd()},a._allowClickEvent=function(){jt(a._window,"click",a._onClick,!0)},a._onClick=function(v){a._allowClickEvent(),a._allowMouseEvent();var d=a.options.preventClickEventByCondition;d!=null&&d(v)||(v.stopPropagation(),v.preventDefault())},a._onContextMenu=function(v){var d=a.options;d.preventRightClick?a.onDragEnd(v):v.preventDefault()},a._passCallback=function(){};var i=[].concat(e),o=i[0];a._window=xs(o)?o:Wr(o),a.options=Yt({checkInput:!1,container:o&&!("document"in o)?Wr(o):o,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},n);var s=a.options,l=s.container,u=s.events,f=s.checkWindowBlur;if(a._useDrag=u.indexOf("drag")>-1,a._useTouch=u.indexOf("touch")>-1,a._useMouse=u.indexOf("mouse")>-1,a.targets=i,a._useDrag&&i.forEach(function(v){er(v,"dragstart",a.onDragStart)}),a._useMouse&&(i.forEach(function(v){er(v,"mousedown",a.onDragStart),er(v,"mousemove",a._passCallback)}),er(l,"contextmenu",a._onContextMenu)),f&&er(Wr(),"blur",a.onBlur),a._useTouch){var c={passive:!1};i.forEach(function(v){er(v,"touchstart",a.onDragStart,c),er(v,"touchmove",a._passCallback,c)})}return a}return t.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},t.prototype.getMovement=function(e){return this.getCurrentStore().getMovement(e)+this.clientStores.slice(1).reduce(function(n,a){return n+a.movement},0)},t.prototype.isDragging=function(){return this.isDrag},t.prototype.isIdle=function(){return this._isIdle},t.prototype.isFlag=function(){return this.flag},t.prototype.isPinchFlag=function(){return this.pinchFlag},t.prototype.isDoubleFlag=function(){return this.doubleFlag},t.prototype.isPinching=function(){return this.isPinch},t.prototype.scrollBy=function(e,n,a,i){i===void 0&&(i=!0),this.flag&&(this.clientStores[0].move(e,n),i&&this.onDrag(a,!0))},t.prototype.move=function(e,n){var a=e[0],i=e[1],o=this.getCurrentStore(),s=o.prevClients;return this.moveClients(s.map(function(l){var u=l.clientX,f=l.clientY;return{clientX:u+a,clientY:f+i,originalClientX:u,originalClientY:f}}),n,!0)},t.prototype.triggerDragStart=function(e){this.onDragStart(e,!1)},t.prototype.setEventData=function(e){var n=this.data;for(var a in e)n[a]=e[a];return this},t.prototype.setEventDatas=function(e){return this.setEventData(e)},t.prototype.getCurrentEvent=function(e){return e===void 0&&(e=this._prevInputEvent),Yt(Yt({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:e})},t.prototype.getEventData=function(){return this.data},t.prototype.getEventDatas=function(){return this.data},t.prototype.unset=function(){var e=this,n=this.targets,a=this.options.container;this.off(),jt(this._window,"blur",this.onBlur),this._useDrag&&n.forEach(function(i){jt(i,"dragstart",e.onDragStart)}),this._useMouse&&(n.forEach(function(i){jt(i,"mousedown",e.onDragStart)}),jt(a,"contextmenu",this._onContextMenu)),this._useTouch&&(n.forEach(function(i){jt(i,"touchstart",e.onDragStart)}),jt(a,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},t.prototype.onPinchStart=function(e){var n=this,a=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>a)){var i=new fa(pn(e));this.pinchFlag=!0,this._addStore(i);var o=this.emit("pinchStart",Yt(Yt({data:this.data,datas:this.data,angle:i.getAngle(),touches:this.getCurrentStore().getPositions()},i.getPosition()),{inputEvent:e,isTrusted:this._isTrusted,preventDefault:function(){e.preventDefault()},preventDrag:function(){n._dragFlag=!1}}));o===!1&&(this.pinchFlag=!1)}},t.prototype.onPinch=function(e,n){if(!(!this.flag||!this.pinchFlag||n.length<2)){var a=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",Yt(Yt({data:this.data,datas:this.data,movement:this.getMovement(n),angle:a.getAngle(n),rotation:a.getRotation(n),touches:a.getPositions(n),scale:a.getScale(n),distance:a.getDistance(n)},a.getPosition(n)),{inputEvent:e,isTrusted:this._isTrusted}))}},t.prototype.onPinchEnd=function(e){if(this.pinchFlag){var n=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var a=this.getCurrentStore();this.emit("pinchEnd",Yt(Yt({data:this.data,datas:this.data,isPinch:n,touches:a.getPositions()},a.getPosition()),{inputEvent:e}))}},t.prototype.getCurrentStore=function(){return this.clientStores[0]},t.prototype.moveClients=function(e,n,a){var i=this._getPosition(e,a),o=this.isDrag;(i.deltaX||i.deltaY)&&(this.isDrag=!0);var s=!1;return!o&&this.isDrag&&(s=!0),Yt(Yt({data:this.data,datas:this.data},i),{movement:this.getMovement(e),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:n,isTrusted:this._isTrusted,isFirstDrag:s})},t.prototype._addStore=function(e){this.clientStores.splice(0,0,e)},t.prototype._getPosition=function(e,n){var a=this.getCurrentStore(),i=a.getPosition(e,n),o=this.clientStores.slice(1).reduce(function(u,f){var c=f.getPosition();return u.distX+=c.distX,u.distY+=c.distY,u},i),s=o.distX,l=o.distY;return Yt(Yt({},i),{distX:s,distY:l})},t.prototype._attchDragEvent=function(){var e=this._window,n=this.options.container,a={passive:!1};this._isDragAPI&&(er(n,"dragover",this.onDrag,a),er(e,"dragend",this.onDragEnd)),this._useMouse&&(er(n,"mousemove",this.onDrag),er(e,"mouseup",this.onDragEnd)),this._useTouch&&(er(n,"touchmove",this.onDrag,a),er(e,"touchend",this.onDragEnd,a),er(e,"touchcancel",this.onDragEnd,a))},t.prototype._dettachDragEvent=function(){var e=this._window,n=this.options.container;this._isDragAPI&&(jt(n,"dragover",this.onDrag),jt(e,"dragend",this.onDragEnd)),this._useMouse&&(jt(n,"mousemove",this.onDrag),jt(e,"mouseup",this.onDragEnd)),this._useTouch&&(jt(n,"touchstart",this.onDragStart),jt(n,"touchmove",this.onDrag),jt(e,"touchend",this.onDragEnd),jt(e,"touchcancel",this.onDragEnd))},t.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},t}(Xn);function Pc(r){for(var t=5381,e=r.length;e;)t=t*33^r.charCodeAt(--e);return t>>>0}var zc=Pc;function Ac(r){return zc(r).toString(36)}function kc(r){if(r&&r.getRootNode){var t=r.getRootNode();if(t.nodeType===11)return t}}function Bc(r,t,e){return e.original?t:t.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(n,a){var i=a.trim();return(i?re(i):[""]).map(function(o){var s=o.trim();return s.indexOf("@")===0?s:s.indexOf(":global")>-1?s.replace(/\:global/g,""):s.indexOf(":host")>-1?"".concat(s.replace(/\:host/g,".".concat(r))):s?".".concat(r," ").concat(s):".".concat(r)}).join(", ")+" {"})}function Gc(r,t,e,n,a){var i=we(n),o=i.createElement("style");return o.setAttribute("type","text/css"),o.setAttribute("data-styled-id",r),o.setAttribute("data-styled-count","1"),e.nonce&&o.setAttribute("nonce",e.nonce),o.innerHTML=Bc(r,t,e),(a||i.head||i.body).appendChild(o),o}function Nc(r){var t="rCS"+Ac(r);return{className:t,inject:function(e,n){n===void 0&&(n={});var a=kc(e),i=(a||e.ownerDocument||document).querySelector('style[data-styled-id="'.concat(t,'"]'));if(!i)i=Gc(t,r,n,e,a);else{var o=parseFloat(i.getAttribute("data-styled-count"))||0;i.setAttribute("data-styled-count","".concat(o+1))}return{destroy:function(){var s,l=parseFloat(i.getAttribute("data-styled-count"))||0;l<=1?(i.remove?i.remove():(s=i.parentNode)===null||s===void 0||s.removeChild(i),i=null):i.setAttribute("data-styled-count","".concat(l-1))}}}}}var za=function(){return za=Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},za.apply(this,arguments)};function Fc(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(r);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(r,n[a])&&(e[n[a]]=r[n[a]]);return e}function Ks(r,t){var e=Nc(t),n=e.className;return kf(function(a,i){var o=a.className,s=o===void 0?"":o;a.cspNonce;var l=Fc(a,["className","cspNonce"]),u=jf();return Uf(i,function(){return u.current},[]),ks(function(){var f=e.inject(u.current,{nonce:a.cspNonce});return function(){f.destroy()}},[]),Dr(r,za({ref:u,"data-styled-id":n,className:"".concat(s," ").concat(n)},l))})}var Aa=function(r,t){return Aa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])},Aa(r,t)};function on(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Aa(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var T=function(){return T=Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},T.apply(this,arguments)};function Lc(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(r);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(r,n[a])&&(e[n[a]]=r[n[a]]);return e}function Hc(r,t,e,n){var a=arguments.length,i=a<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,n);else for(var s=r.length-1;s>=0;s--)(o=r[s])&&(i=(a<3?o(i):a>3?o(t,e,i):o(t,e))||i);return a>3&&i&&Object.defineProperty(t,e,i),i}function Vc(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],n=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function R(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return i}function Z(r,t,e){if(e||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return r.concat(i||Array.prototype.slice.call(t))}function sn(r,t){return T({events:[],props:[],name:r},t)}var Wc=["n","w","s","e"],fi=["n","w","s","e","nw","ne","sw","se"];function Yc(r,t){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*r,'px" height="').concat(32*r,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(t,'deg);transform-origin: 16px 16px"></path></svg>')}function Xc(r){var t=Yc(1,r),e=Math.round(r/45)*45%180,n="ns-resize";return e===135?n="nwse-resize":e===45?n="nesw-resize":e===90&&(n="ew-resize"),"cursor:".concat(n,";cursor: url('").concat(t,"') 16 16, ").concat(n,";")}var Te=tc(),Js=Te.browser.webkit,Qs=Js&&function(){var r=typeof window>"u"?{userAgent:""}:window.navigator,t=/applewebkit\/([^\s]+)/g.exec(r.userAgent.toLowerCase());return t?parseFloat(t[1])<605:!1}(),tl=Te.browser.name,rl=parseInt(Te.browser.version,10),$c=tl==="chrome",qc=Te.browser.chromium,jc=parseInt(Te.browser.chromiumVersion,10)||0,Uc=$c&&rl>=109||qc&&jc>=109,Zc=tl==="firefox",Kc=parseInt(Te.browser.webkitVersion,10)>=612||rl>=15,ci="moveable-",Jc=fi.map(function(r){var t="",e="",n="center",a="center",i="calc(var(--moveable-control-padding, 20) * -1px)";return r.indexOf("n")>-1&&(t="top: ".concat(i,";"),a="bottom"),r.indexOf("s")>-1&&(t="top: 0px;",a="top"),r.indexOf("w")>-1&&(e="left: ".concat(i,";"),n="right"),r.indexOf("e")>-1&&(e="left: 0px;",n="left"),'.around-control[data-direction*="'.concat(r,`"] {
        `).concat(e).concat(t,`
        transform-origin: `).concat(n," ").concat(a,`;
    }`)}).join(`
`),Qc=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(Jc,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(r){return`
.direction[data-rotation="`.concat(r,'"], :global .view-control-rotation').concat(r,` {
`).concat(Xc(r),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(Qs?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),tv=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],ka=1e-4,fr=1e-7,hn=1e-9,Ba=Math.pow(10,10),fo=-Ba,rv={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},vi={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},el={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},nl=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function ln(r,t,e,n,a,i){var o,s;i===void 0&&(i="draggable");var l=(s=(o=t.gestos[i])===null||o===void 0?void 0:o.move(e,r.inputEvent))!==null&&s!==void 0?s:{},u=l.originalDatas||l.datas,f=u[i]||(u[i]={});return T(T({},a?Xl(t,l):l),{isPinch:!!n,parentEvent:!0,datas:f,originalDatas:r.originalDatas})}var Ee=function(){function r(t){var e;t===void 0&&(t="draggable"),this.ableName=t,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(e={},e[t]={},e)}return r.prototype.dragStart=function(t,e){this.isDrag=!1,this.isFlag=!1;var n=e.originalDatas;return this.datas=n,n[this.ableName]||(n[this.ableName]={}),T(T({},this.move(t,e.inputEvent)),{type:"dragstart"})},r.prototype.drag=function(t,e){return this.move([t[0]-this.prevX,t[1]-this.prevY],e)},r.prototype.move=function(t,e){var n,a,i=!1;if(!this.isFlag)this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],n=t[0],a=t[1],this.isFlag=!0;else{var o=this.isDrag;n=this.prevX+t[0],a=this.prevY+t[1],(t[0]||t[1])&&(this.isDrag=!0),!o&&this.isDrag&&(i=!0)}return this.prevX=n,this.prevY=a,{type:"drag",clientX:n,clientY:a,inputEvent:e,isFirstDrag:i,isDrag:this.isDrag,distX:n-this.startX,distY:a-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},r}();function _e(r,t,e,n){var a=r.length===16,i=a?4:3,o=ue(r,e,n,i),s=R(o,4),l=R(s[0],2),u=l[0],f=l[1],c=R(s[1],2),v=c[0],d=c[1],p=R(s[2],2),h=p[0],g=p[1],m=R(s[3],2),_=m[0],b=m[1],S=R(Gt(r,t,i),2),y=S[0],D=S[1],x=Math.min(u,v,h,_),E=Math.min(f,d,g,b),C=Math.max(u,v,h,_),w=Math.max(f,d,g,b);u=u-x||0,v=v-x||0,h=h-x||0,_=_-x||0,f=f-E||0,d=d-E||0,g=g-E||0,b=b-E||0,y=y-x||0,D=D-E||0;var P=r[0],O=r[i+1],M=lr(P*O);return{left:x,top:E,right:C,bottom:w,origin:[y,D],pos1:[u,f],pos2:[v,d],pos3:[h,g],pos4:[_,b],direction:M}}function al(r,t){var e=t.clientX,n=t.clientY,a=t.datas,i=r.state,o=i.moveableClientRect,s=i.rootMatrix,l=i.is3d,u=i.pos1,f=o.left,c=o.top,v=l?4:3,d=R(st(xe(s,[e-f,n-c],v),u),2),p=d[0],h=d[1],g=R(Ir({datas:a,distX:p,distY:h}),2),m=g[0],_=g[1];return[m,_]}function le(r,t){var e=t.datas,n=r.state,a=n.allMatrix,i=n.beforeMatrix,o=n.is3d,s=n.left,l=n.top,u=n.origin,f=n.offsetMatrix,c=n.targetMatrix,v=n.transformOrigin,d=o?4:3;e.is3d=o,e.matrix=a,e.targetMatrix=c,e.beforeMatrix=i,e.offsetMatrix=f,e.transformOrigin=v,e.inverseMatrix=Rr(a,d),e.inverseBeforeMatrix=Rr(i,d),e.absoluteOrigin=ae(xt([s,l],u),d),e.startDragBeforeDist=ar(e.inverseBeforeMatrix,e.absoluteOrigin,d),e.startDragDist=ar(e.inverseMatrix,e.absoluteOrigin,d)}function ev(r){return _e(r.datas.beforeTransform,[50,50],100,100).direction}function $n(r,t,e){var n=t.datas,a=t.originalDatas.beforeRenderable,i=n.transformIndex,o=a.nextTransforms,s=o.length,l=a.nextTransformAppendedIndexes,u=-1;i===-1?(e==="translate"?u=0:e==="rotate"&&(u=Gr(o,function(d){return d.match(/scale\(/g)})),u===-1&&(u=o.length),n.transformIndex=u):dr(l,function(d){return d.index===i&&d.functionName===e})?u=i:u=i+l.filter(function(d){return d.index<i}).length;var f=Md(o,r.state,u),c=f.targetFunction,v=e==="rotate"?"rotateZ":e;n.beforeFunctionTexts=f.beforeFunctionTexts,n.afterFunctionTexts=f.afterFunctionTexts,n.beforeTransform=f.beforeFunctionMatrix,n.beforeTransform2=f.beforeFunctionMatrix2,n.targetTansform=f.targetFunctionMatrix,n.afterTransform=f.afterFunctionMatrix,n.afterTransform2=f.afterFunctionMatrix2,n.targetAllTransform=f.allFunctionMatrix,c.functionName===v?(n.afterFunctionTexts.splice(0,1),n.isAppendTransform=!1):s>u&&(n.isAppendTransform=!0,a.nextTransformAppendedIndexes=Z(Z([],R(l),!1),[{functionName:e,index:u,isAppend:!0}],!1))}function qn(r,t,e){return"".concat(r.beforeFunctionTexts.join(" ")," ").concat(r.isAppendTransform?e:t," ").concat(r.afterFunctionTexts.join(" "))}function nv(r){var t=r.datas,e=r.distX,n=r.distY,a=R(ol({datas:t,distX:e,distY:n}),2),i=a[0],o=a[1],s=il(t,ic([i,o],4));return ar(s,ae([0,0,0],4),4)}function il(r,t,e){var n=r.beforeTransform,a=r.afterTransform,i=r.beforeTransform2,o=r.afterTransform2,s=r.targetAllTransform,l=e?Mt(s,t,4):Mt(t,s,4),u=Mt(Rr(e?i:n,4),l,4),f=Mt(u,Rr(e?o:a,4),4);return f}function ol(r){var t=r.datas,e=r.distX,n=r.distY,a=t.inverseBeforeMatrix,i=t.is3d,o=t.startDragBeforeDist,s=t.absoluteOrigin,l=i?4:3;return st(ar(a,xt(s,[e,n]),l),o)}function Ir(r,t){var e=r.datas,n=r.distX,a=r.distY,i=e.inverseBeforeMatrix,o=e.inverseMatrix,s=e.is3d,l=e.startDragBeforeDist,u=e.startDragDist,f=e.absoluteOrigin,c=s?4:3;return st(ar(t?i:o,xt(f,[n,a]),c),t?l:u)}function av(r,t){var e=r.datas,n=r.distX,a=r.distY,i=e.beforeMatrix,o=e.matrix,s=e.is3d,l=e.startDragBeforeDist,u=e.startDragDist,f=e.absoluteOrigin,c=s?4:3;return st(ar(t?i:o,xt(t?l:u,[n,a]),c),f)}function iv(r,t,e,n,a,i){return n===void 0&&(n=t),a===void 0&&(a=e),i===void 0&&(i=[0,0]),r?r.map(function(o,s){var l=Qe(o),u=l.value,f=l.unit,c=s?a:n,v=s?e:t;if(o==="%"||isNaN(u)){var d=c?i[s]/c:0;return v*d}else if(f!=="%")return u;return v*u/100}):i}function sl(r){var t=[];return r[1]>=0&&(r[0]>=0&&t.push(3),r[0]<=0&&t.push(2)),r[1]<=0&&(r[0]>=0&&t.push(1),r[0]<=0&&t.push(0)),t}function ov(r,t){return sl(t).map(function(e){return r[e]})}function ca(r,t){var e=(t+1)/2;return[Rn(r[0][0],r[1][0],e,1-e),Rn(r[0][1],r[1][1],e,1-e)]}function Zt(r,t){var e=ca([r[0],r[1]],t[0]),n=ca([r[2],r[3]],t[0]);return ca([e,n],t[1])}function sv(r,t,e,n,a,i){var o=ue(t,e,n,a),s=Zt(o,i),l=r[0]-s[0],u=r[1]-s[1];return[l,u]}function un(r,t,e,n){return Mt(r,Ve(t,n,e),n)}function lv(r,t,e,n){var a=r.transformOrigin,i=r.offsetMatrix,o=r.is3d,s=o?4:3,l;if(vr(e)){var u=t.beforeTransform,f=t.afterTransform;n?l=wr(qe(e),4,s):l=wr(Mt(Mt(u,qe([e]),4),f,4),4,s)}else l=e;return un(i,l,a,s)}function uv(r,t){var e=r.transformOrigin,n=r.offsetMatrix,a=r.is3d,i=r.targetMatrix,o=r.targetAllTransform,s=a?4:3;return un(n,Mt(o||i,si(t,s),s),e,s)}function jn(r,t){var e=Oe(t);return{setTransform:function(n,a){a===void 0&&(a=-1),e.startTransforms=$t(n)?n:Xr(n),Ga(r,t,a)},setTransformIndex:function(n){Ga(r,t,n)}}}function Un(r,t,e){var n=Oe(t),a=n.startTransforms;Ga(r,t,Gr(a,function(i){return i.indexOf("".concat(e,"("))===0}))}function Ga(r,t,e){var n=Oe(t),a=t.datas;if(a.transformIndex=e,e!==-1){var i=n.startTransforms[e];if(i){var o=r.state,s=Se([i],{"x%":function(l){return l/100*o.offsetWidth},"y%":function(l){return l/100*o.offsetHeight}});a.startValue=s[0].functionValue}}}function di(r,t){var e=Oe(r);e.nextTransforms=Xr(t)}function Oe(r){return r.originalDatas.beforeRenderable}function An(r){var t=r.originalDatas.beforeRenderable;return t.nextTransforms}function gn(r){return(An(r)||[]).join(" ")}function mn(r){return Oe(r).nextStyle}function ll(r,t,e,n,a){di(a,t);var i=sr.drag(r,ln(a,r.state,e,n,!1)),o=i?i.transform:t;return T(T({transform:t,drag:i},ur({transform:o},a)),{afterTransform:o})}function pi(r,t,e,n,a,i){var o=lv(r.state,a,t,i),s=vv(r,e,n,o);return s}function ul(r,t,e,n,a,i,o){var s=pi(r,t,e,a,i,o),l=r.state,u=l.left,f=l.top,c=r.props.groupable,v=c?u:0,d=c?f:0,p=st(n,s);return st(p,[v,d])}function fv(r,t,e,n,a,i,o){var s=ul(r,t,e,n,a,i,o);return s}function cv(r,t,e){return[t?-1+r[0]/(t/2):0,e?-1+r[1]/(e/2):0]}function vv(r,t,e,n){n===void 0&&(n=r.state.allMatrix);var a=r.state,i=a.width,o=a.height,s=a.is3d,l=s?4:3,u=[i/2*(1+t[0])+e[0],o/2*(1+t[1])+e[1]];return Gt(n,u,l)}function dv(r,t,e){var n=e.fixedDirection,a=e.fixedPosition,i=e.fixedOffset;return ul(r,"rotate(".concat(t,"deg)"),n,a,i,e)}function pv(r,t,e,n,a,i){var o=r.props.groupable,s=r.state,l=s.transformOrigin,u=s.offsetMatrix,f=s.is3d,c=s.width,v=s.height,d=s.left,p=s.top,h=i.fixedDirection,g=i.nextTargetMatrix||s.targetMatrix,m=f?4:3,_=iv(a,t,e,c,v,l),b=o?d:0,S=o?p:0,y=un(u,g,_,m),D=sv(n,y,t,e,m,h);return st(D,[b,S])}function hv(r,t){return Zt(Sr(r.state),t)}function gv(r,t){var e=r.targetGesto,n=r.controlGesto,a;return e!=null&&e.isFlag()&&(a=e.getEventData()[t]),!a&&(n!=null&&n.isFlag())&&(a=n.getEventData()[t]),a||{}}function mv(r){if(r&&r.getRootNode){var t=r.getRootNode();if(t.nodeType===11)return t}}function _v(r){var t=r("scale"),e=r("rotate"),n=r("translate"),a=[];return n&&n!=="0px"&&n!=="none"&&a.push("translate(".concat(n.split(/\s+/).join(","),")")),e&&e!=="1"&&e!=="none"&&a.push("rotate(".concat(e,")")),t&&t!=="1"&&t!=="none"&&a.push("scale(".concat(t.split(/\s+/).join(","),")")),a}function fl(r,t,e){for(var n=r,a=[],i=ti(r)||Ur(r),o=!e&&r===t||r===i,s=o,l=!1,u=3,f,c,v,d=!1,p=Ue(t,t,!0).offsetParent,h=1;n&&!s;){s=o;var g=pr(n),m=g("position"),_=Al(n),b=m==="fixed",S=_v(g),y=oc(hd(_)),D=void 0,x=!1,E=!1,C=0,w=0,P=0,O=0,M={hasTransform:!1,fixedContainer:null};b&&(d=!0,M=Sd(n),p=M.fixedContainer);var I=y.length;!l&&(I===16||S.length)&&(l=!0,u=4,Wa(a),v&&(v=wr(v,3,4))),l&&I===9&&(y=wr(y,3,4));var z=bd(n,r),F=z.tagName,H=z.hasOffset,V=z.isSVG,B=z.origin,G=z.targetOrigin,A=z.offset,X=R(A,2),q=X[0],j=X[1];F==="svg"&&!n.ownerSVGElement&&v&&(a.push({type:"target",target:n,matrix:Ed(n,u)}),a.push({type:"offset",target:n,matrix:Pt(u)}));var Q=parseFloat(g("zoom"))||1;if(b)D=M.fixedContainer,x=!0;else{var U=Ue(n,t,!1,!0,g),tt=U.offsetZoom;if(D=U.offsetParent,x=U.isEnd,E=U.isStatic,h*=tt,(U.isCustomElement||tt!==1)&&E)q-=D.offsetLeft,j-=D.offsetTop;else if(Zc||Uc){var et=U.parentSlotElement;if(et){for(var vt=D,mt=0,J=0;vt&&mv(vt);)mt+=vt.offsetLeft,J+=vt.offsetTop,vt=vt.offsetParent;q-=mt,j-=J}}}if(Js&&!Kc&&H&&!V&&E&&(m==="relative"||m==="static")&&(q-=D.offsetLeft,j-=D.offsetTop,o=o||x),b)H&&M.hasTransform&&(P=D.clientLeft,O=D.clientTop);else if(H&&p!==D&&(C=D.clientLeft,w=D.clientTop),H&&D===i){var nt=kl(n,!1);q+=nt[0],j+=nt[1]}if(a.push({type:"target",target:n,matrix:Ve(y,u,B)}),S.length&&(a.push({type:"offset",target:n,matrix:Pt(u)}),a.push({type:"target",target:n,matrix:Ve(qe(S),u,B)})),H){var Dt=n===r,ut=Dt?0:n.scrollLeft,ft=Dt?0:n.scrollTop;a.push({type:"offset",target:n,matrix:ie([q-ut+C-P,j-ft+w-O],u)})}else a.push({type:"offset",target:n,origin:B});if(Q!==1&&a.push({type:"zoom",target:n,matrix:Ve(si([Q,Q],u),u,[0,0])}),v||(v=y),f||(f=B),c||(c=G),s||b)break;n=D,o=x,(!e||n===i)&&(s=o)}return v||(v=Pt(u)),f||(f=[0,0]),c||(c=[0,0]),{zoom:h,offsetContainer:p,matrixes:a,targetMatrix:v,transformOrigin:f,targetOrigin:c,is3d:l,hasFixed:d}}var Kr=null,Jr=null,pe=null;function ye(r){r?(window.Map&&(Kr=new Map,Jr=new Map),pe=[]):(Kr=null,pe=null,Jr=null)}function bv(r){var t=Jr==null?void 0:Jr.get(r);if(t)return t;var e=We(r,!0);return Jr&&Jr.set(r,e),e}function Sv(r,t){if(pe){var e=dr(pe,function(a){return a[0][0]==r&&a[0][1]==t});if(e)return e[1]}var n=fl(r,t,!0);return pe&&pe.push([[r,t],n]),n}function pr(r){var t=Kr==null?void 0:Kr.get(r);if(!t){var e=Wr(r).getComputedStyle(r);if(!Kr)return function(i){return e[i]};t={style:e,cached:{}},Kr.set(r,t)}var n=t.cached,a=t.style;return function(i){return i in n||(n[i]=a[i]),n[i]}}function xr(r,t,e){var n=e.originalDatas;n.groupable=n.groupable||{};var a=n.groupable;a.childDatas=a.childDatas||[];var i=a.childDatas;return r.moveables.map(function(o,s){return i[s]=i[s]||{},i[s][t]=i[s][t]||{},T(T({},e),{isRequestChild:!0,datas:i[s][t],originalDatas:i[s]})})}function va(r,t,e,n,a,i,o){var s=!!e.match(/Start$/g),l=!!e.match(/End$/g),u=a.isPinch,f=a.datas,c=xr(r,t.name,a),v=r.moveables,d=[],p=c.map(function(h,g){var m=v[g],_=m.state,b=_.gestos,S=h;if(s)S=new Ee(o).dragStart(n,h),d.push(S);else{if(b[o]||(b[o]=f.childGestos[g]),!b[o])return;S=ln(h,_,n,u,i,o),d.push(S)}var y=t[e](m,T(T({},S),{parentFlag:!0}));return l&&(b[o]=null),y});return s&&(f.childGestos=v.map(function(h){return h.state.gestos[o]})),{eventParams:p,childEvents:d}}function Ar(r,t,e,n,a,i){a===void 0&&(a=function(f,c){return c});var o=!!e.match(/End$/g),s=xr(r,t.name,n),l=r.moveables,u=s.map(function(f,c){var v=l[c],d=f;d=a(v,f);var p=t[e](v,T(T({},d),{parentFlag:!0}));return p&&i&&i(v,f,p,c),o&&(v.state.gestos={}),p});return u}function kn(r,t,e,n){var a=e.fixedDirection,i=e.fixedPosition,o=n.datas.startPositions||Sr(t.state),s=Zt(o,a),l=R(ar(an(-r.rotation/180*Math.PI,3),[s[0]-i[0],s[1]-i[1],1],3),2),u=l[0],f=l[1];return n.datas.originalX=u,n.datas.originalY=f,n}function cl(r,t,e,n){var a=r.getState(),i=a.renderPoses,o=a.rotation,s=a.direction,l=se(r.props,t).zoom,u=He(o/Math.PI*180),f={},c=r.renderState;c.renderDirectionMap||(c.renderDirectionMap={});var v=c.renderDirectionMap;e.forEach(function(p){var h=p.dir;f[h]=!0});var d=lr(s);return e.map(function(p){var h=p.data,g=p.classNames,m=p.dir,_=vi[m];if(!_||!f[m])return null;v[m]=!0;var b=(pt(u,15)+d*el[m]+720)%180,S={};return Nr(h).forEach(function(y){S["data-".concat(y)]=h[y]}),n.createElement("div",T({className:ot.apply(void 0,Z(["control","direction",m,t],R(g),!1)),"data-rotation":b,"data-direction":m},S,{key:"direction-".concat(m),style:Fn.apply(void 0,Z([o,l],R(_.map(function(y){return i[y]})),!1))}))})}function vl(r,t,e,n){var a=se(r.props,e),i=a.renderDirections,o=i===void 0?t:i,s=a.displayAroundControls;if(!o)return[];var l=o===!0?fi:o;return Z(Z([],R(s?gl(r,n,e,l):[]),!1),R(cl(r,e,l.map(function(u){return{data:{},classNames:[],dir:u}}),n)),!1)}function je(r,t,e,n,a,i){for(var o=[],s=6;s<arguments.length;s++)o[s-6]=arguments[s];var l=Wt(e,n),u=t?pt(l/Math.PI*180,15)%180:-1;return r.createElement("div",{key:"line-".concat(i),className:ot.apply(void 0,Z(["line","direction",t?"edge":"",t],R(o),!1)),"data-rotation":u,"data-line-key":i,"data-direction":t,style:Be(e,n,a,l)})}function dl(r,t,e,n,a){var i=e===!0?Wc:e;return i.map(function(o,s){var l=R(vi[o],2),u=l[0],f=l[1];if(f!=null)return je(r,o,n[u],n[f],a,"".concat(t,"Edge").concat(s),t)}).filter(Boolean)}function pl(r){return function(t,e){var n=se(t.props,r).edge;return n&&(n===!0||n.length)?Z(Z([],R(dl(e,r,n,t.getState().renderPoses,t.props.zoom)),!1),R(Ev(t,r,e)),!1):hl(t,r,e)}}function hl(r,t,e){return vl(r,fi,t,e)}function Ev(r,t,e){return vl(r,["nw","ne","sw","se"],t,e)}function gl(r,t,e,n){var a=r.renderState;a.renderDirectionMap||(a.renderDirectionMap={});var i=r.getState(),o=i.renderPoses,s=i.rotation,l=i.direction,u=a.renderDirectionMap,f=r.props.zoom,c=lr(l),v=s/Math.PI*180;return(n||Nr(u)).map(function(d){var p=vi[d];if(!p)return null;var h=(pt(v,15)+c*el[d]+720)%180,g=["around-control"];return e&&g.push("direction",e),t.createElement("div",{className:ot.apply(void 0,Z([],R(g),!1)),"data-rotation":h,"data-direction":d,key:"direction-around-".concat(d),style:Fn.apply(void 0,Z([s,f],R(p.map(function(m){return o[m]})),!1))})})}function hi(r,t,e){var n=r||{},a=n.position,i=a===void 0?"client":a,o=n.left,s=o===void 0?-1/0:o,l=n.top,u=l===void 0?-1/0:l,f=n.right,c=f===void 0?1/0:f,v=n.bottom,d=v===void 0?1/0:v,p={position:i,left:s,top:u,right:c,bottom:d};return{vertical:co(p,t,!0),horizontal:co(p,e,!1)}}function Zn(r,t){var e=r.state,n=e.containerClientRect,a=n.clientHeight,i=n.clientWidth,o=n.clientLeft,s=n.clientTop,l=e.snapOffset,u=l.left,f=l.top,c=l.right,v=l.bottom,d=t||r.props.bounds||{},p=d.position||"client",h=p==="css",g=d.left,m=g===void 0?-1/0:g,_=d.top,b=_===void 0?-1/0:_,S=d.right,y=S===void 0?h?-1/0:1/0:S,D=d.bottom,x=D===void 0?h?-1/0:1/0:D;return h&&(y=i+c-u-y,x=a+v-f-x),{left:m+u-o,right:y+u-o,top:b+f-s,bottom:x+f-s}}function yv(r,t,e){var n=Zn(r),a=n.left,i=n.top,o=n.right,s=n.bottom,l=R(e,2),u=l[0],f=l[1],c=R(st(e,t),2),v=c[0],d=c[1];$(v)<fr&&(v=0),$(d)<fr&&(d=0);var p=d>0,h=v>0,g={isBound:!1,offset:0,pos:0},m={isBound:!1,offset:0,pos:0};if(v===0&&d===0)return{vertical:g,horizontal:m};if(v===0)p?s<f&&(m.pos=s,m.offset=f-s):i>f&&(m.pos=i,m.offset=f-i);else if(d===0)h?o<u&&(g.pos=o,g.offset=u-o):a>u&&(g.pos=a,g.offset=u-a);else{var _=d/v,b=e[1]-_*u,S=0,y=0,D=!1;h&&o<=u?(S=_*o+b,y=o,D=!0):!h&&u<=a&&(S=_*a+b,y=a,D=!0),D&&(S<i||S>s)&&(D=!1),D||(p&&s<=f?(S=s,y=(S-b)/_,D=!0):!p&&f<=i&&(S=i,y=(S-b)/_,D=!0)),D&&(g.isBound=!0,g.pos=y,g.offset=u-y,m.isBound=!0,m.pos=S,m.offset=f-S)}return{vertical:g,horizontal:m}}function co(r,t,e){var n=r[e?"left":"top"],a=r[e?"right":"bottom"],i=Math.min.apply(Math,Z([],R(t),!1)),o=Math.max.apply(Math,Z([],R(t),!1)),s=[];return n+1>i&&s.push({direction:"start",isBound:!0,offset:i-n,pos:n}),a-1<o&&s.push({direction:"end",isBound:!0,offset:o-a,pos:a}),s.length||s.push({isBound:!1,offset:0,pos:0}),s.sort(function(l,u){return $(u.offset)-$(l.offset)})}function vo(r,t,e){var n=e?r.map(function(a){return nn(a,e)}):r;return n.some(function(a){return a[0]<t.left&&$(a[0]-t.left)>.1||a[0]>t.right&&$(a[0]-t.right)>.1||a[1]<t.top&&$(a[1]-t.top)>.1||a[1]>t.bottom&&$(a[1]-t.bottom)>.1})}function Dv(r,t,e){var n=br(r),a=Math.sqrt(n*n-t*t)||0;return[a,-a].sort(function(i,o){return $(i-r[e?0:1])-$(o-r[e?0:1])}).map(function(i){return Wt([0,0],e?[i,t]:[t,i])})}function xv(r,t,e,n,a){if(!r.props.bounds)return[];var i=a*Math.PI/180,o=Zn(r),s=o.left,l=o.top,u=o.right,f=o.bottom,c=s-n[0],v=u-n[0],d=l-n[1],p=f-n[1],h={left:c,top:d,right:v,bottom:p};if(!vo(e,h,0))return[];var g=[];return[[c,0],[v,0],[d,1],[p,1]].forEach(function(m){var _=R(m,2),b=_[0],S=_[1];e.forEach(function(y){var D=Wt([0,0],y);g.push.apply(g,Z([],R(Dv(y,b,S).map(function(x){return i+x-D}).filter(function(x){return!vo(t,h,x)}).map(function(x){return pt(x*180/Math.PI,fr)})),!1))})}),g}var Cv=["left","right","center"],wv=["top","bottom","middle"],po={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},$r={start:"left",end:"right",center:"center"},qr={start:"top",end:"bottom",center:"middle"};function he(){return{left:!1,top:!1,right:!1,bottom:!1}}function Re(r,t){var e=r.props,n=e.snappable,a=e.bounds,i=e.innerBounds,o=e.verticalGuidelines,s=e.horizontalGuidelines,l=e.snapGridWidth,u=e.snapGridHeight,f=r.state,c=f.guidelines,v=f.enableSnap;return!n||!v||t&&n!==!0&&n.indexOf(t)<0?!1:!!(l||u||a||i||c&&c.length||o&&o.length||s&&s.length)}function gi(r){return r===!1?{}:r===!0||!r?{left:!0,right:!0,top:!0,bottom:!0}:r}function Mv(r,t){var e=gi(r),n={};for(var a in e)a in t&&e[a]&&(n[a]=t[a]);return n}function mi(r,t){var e=Mv(r,t),n=wv.filter(function(i){return i in e}),a=Cv.filter(function(i){return i in e});return{horizontalNames:n,verticalNames:a,horizontal:n.map(function(i){return e[i]}),vertical:a.map(function(i){return e[i]})}}function Tv(r,t,e){var n=Gt(r,[t.clientLeft,t.clientTop],e);return[t.left+n[0],t.top+n[1]]}function Ov(r){var t=R(r,2),e=t[0],n=t[1],a=n[0]-e[0],i=n[1]-e[1];Math.abs(a)<Xt&&(a=0),Math.abs(i)<Xt&&(i=0);var o=0,s=0,l=0;return a?i?(o=-i/a,s=1,l=o*e[0]-e[1]):(s=1,l=-e[1]):(o=-1,l=e[0]),[o,s,l].map(function(u){return pt(u,Xt)})}var ml="snapRotationThreshold",_l="snapRotationDegrees",bl="snapHorizontalThreshold",Sl="snapVerticalThreshold";function Kn(r,t,e,n,a,i,o){var s;n===void 0&&(n=[]),a===void 0&&(a=[]);var l=r.props,u=((s=r.state.snapThresholdInfo)===null||s===void 0?void 0:s.multiples)||[1,1],f=Oo(o,l[bl],5),c=Oo(i,l[Sl],5);return El(r.state.guidelines,t,e,n,a,f,c,u)}function El(r,t,e,n,a,i,o,s){return{vertical:go(r,"vertical",t,o*s[0],n),horizontal:go(r,"horizontal",e,i*s[1],a)}}function Rv(r,t,e){var n=R(e,2),a=n[0],i=n[1],o=R(t,2),s=o[0],l=o[1],u=R(st(e,t),2),f=u[0],c=u[1],v=c>0,d=f>0;f=Ln(f),c=Ln(c);var p={isSnap:!1,offset:0,pos:0},h={isSnap:!1,offset:0,pos:0};if(f===0&&c===0)return{vertical:p,horizontal:h};var g=Kn(r,f?[a]:[],c?[i]:[],[],[],void 0,void 0),m=g.vertical,_=g.horizontal;m.posInfos.filter(function(F){var H=F.pos;return d?H>=s:H<=s}),_.posInfos.filter(function(F){var H=F.pos;return v?H>=l:H<=l}),m.isSnap=m.posInfos.length>0,_.isSnap=_.posInfos.length>0;var b=Na(m),S=b.isSnap,y=b.guideline,D=Na(_),x=D.isSnap,E=D.guideline,C=x?E.pos[1]:0,w=S?y.pos[0]:0;if(f===0)x&&(h.isSnap=!0,h.pos=E.pos[1],h.offset=i-h.pos);else if(c===0)S&&(p.isSnap=!0,p.pos=w,p.offset=a-w);else{var P=c/f,O=e[1]-P*a,M=0,I=0,z=!1;S?(I=w,M=P*I+O,z=!0):x&&(M=C,I=(M-O)/P,z=!0),z&&(p.isSnap=!0,p.pos=I,p.offset=a-I,h.isSnap=!0,h.pos=M,h.offset=i-M)}return{vertical:p,horizontal:h}}function Hr(r){var t="";return r===-1||r==="top"||r==="left"?t="start":r===0||r==="center"||r==="middle"?t="center":(r===1||r==="right"||r==="bottom")&&(t="end"),t}function ho(r,t,e,n){var a=mi(r.props.snapDirections,t),i=Kn(r,a.vertical,a.horizontal,a.verticalNames.map(function(l){return Hr(l)}),a.horizontalNames.map(function(l){return Hr(l)}),e,n),o=Hr(a.horizontalNames[i.horizontal.index]),s=Hr(a.verticalNames[i.vertical.index]);return{vertical:T(T({},i.vertical),{direction:s}),horizontal:T(T({},i.horizontal),{direction:o})}}function Na(r){var t=r.isSnap;if(!t)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var e=r.posInfos[0],n=e.guidelineInfos[0],a=n.offset,i=n.dist,o=n.guideline;return{isSnap:t,offset:a,dist:i,pos:e.pos,guideline:o}}function go(r,t,e,n,a){var i,o;if(a===void 0&&(a=[]),!r||!r.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var s=t==="vertical",l=s?0:1,u=e.map(function(c,v){var d=a[v]||"",p=r.map(function(h){var g=h.pos,m=c-g[l];return{offset:m,dist:$(m),guideline:h,direction:d}}).filter(function(h){var g=h.guideline,m=h.dist,_=g.type;return!(_!==t||m>n)}).sort(function(h,g){return h.dist-g.dist});return{pos:c,index:v,guidelineInfos:p,direction:d}}).filter(function(c){return c.guidelineInfos.length>0}).sort(function(c,v){return c.guidelineInfos[0].dist-v.guidelineInfos[0].dist}),f=u.length>0;return{isSnap:f,index:f?u[0].index:-1,direction:(o=(i=u[0])===null||i===void 0?void 0:i.direction)!==null&&o!==void 0?o:"",posInfos:u}}function Iv(r,t,e,n,a){var i=[];e[0]&&e[1]?i=[e,[-e[0],e[1]],[e[0],-e[1]]]:!e[0]&&!e[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(v,d,p){var h=p[d+1]||p[0];i.push(v),i.push([(v[0]+h[0])/2,(v[1]+h[1])/2])}):r.props.keepRatio?i.push([-1,-1],[-1,1],[1,-1],[1,1],e):(i.push.apply(i,Z([],R(ov([[-1,-1],[1,-1],[-1,-1],[1,1]],e)),!1)),i.length>1&&i.push([(i[0][0]+i[1][0])/2,(i[0][1]+i[1][1])/2]));var o=i.map(function(v){return Zt(t,v)}),s=o.map(function(v){return v[0]}),l=o.map(function(v){return v[1]}),u=Kn(r,s,l,i.map(function(v){return Hr(v[0])}),i.map(function(v){return Hr(v[1])}),n,a),f=Hr(i.map(function(v){return v[0]})[u.vertical.index]),c=Hr(i.map(function(v){return v[1]})[u.horizontal.index]);return{vertical:T(T({},u.vertical),{direction:f}),horizontal:T(T({},u.horizontal),{direction:c})}}function yl(r,t){var e=$(r.offset),n=$(t.offset);return r.isBound&&t.isBound?n-e:r.isBound?-1:t.isBound?1:r.isSnap&&t.isSnap?n-e:r.isSnap?-1:t.isSnap||e<fr?1:n<fr?-1:e-n}function Bn(r,t){return r.slice().sort(function(e,n){var a=e.sign[t],i=n.sign[t],o=e.offset[t],s=n.offset[t];if(a){if(!i)return-1}else return 1;return yl({isBound:e.isBound,isSnap:e.isSnap,offset:o},{isBound:n.isBound,isSnap:n.isSnap,offset:s})})[0]}function Pv(r,t,e){var n=[];if(e)$(t[0])!==1||$(t[1])!==1?n.push([t,[-1,-1]],[t,[-1,1]],[t,[1,-1]],[t,[1,1]]):n.push([t,[r[0],-r[1]]],[t,[-r[0],r[1]]]),n.push([t,r]);else if(r[0]&&r[1]||!r[0]&&!r[1]){var a=r[0]?r:[1,1];[1,-1].forEach(function(o){[1,-1].forEach(function(s){var l=[o*a[0],s*a[1]];t[0]===l[0]&&t[1]===l[1]||n.push([t,l])})})}else if(r[0]){var i=$(t[0])===1?[1]:[1,-1];i.forEach(function(o){n.push([[t[0],-1],[o*r[0],-1]],[[t[0],0],[o*r[0],0]],[[t[0],1],[o*r[0],1]])})}else if(r[1]){var i=$(t[1])===1?[1]:[1,-1];i.forEach(function(s){n.push([[-1,t[1]],[-1,s*r[1]]],[[0,t[1]],[0,s*r[1]]],[[1,t[1]],[1,s*r[1]]])})}return n}function Dl(r,t){var e=ya([t[0][0],t[1][0]]),n=ya([t[0][1],t[1][1]]);return{vertical:e<=r[0],horizontal:n<=r[1]}}function _i(r,t){var e=R(t,2),n=e[0],a=e[1],i=a[0]-n[0],o=a[1]-n[1];$(i)<fr&&(i=0),$(o)<fr&&(o=0);var s,l;if(!i)s=n[0],l=r[0];else if(!o)s=n[1],l=r[1];else{var u=o/i;s=u*(r[0]-n[0])+n[1],l=r[1]}return s-l}function xl(r,t,e,n){return n===void 0&&(n=fr),r.every(function(a){var i=_i(a,t),o=i<=0;return o===e||$(i)<=n})}function mo(r,t,e,n,a){return a===void 0&&(a=0),n&&t-a<=r||!n&&r<=e+a?{isBound:!0,offset:n?t-r:e-r}:{isBound:!1,offset:0}}function zv(r,t){var e=t.line,n=t.centerSign,a=t.verticalSign,i=t.horizontalSign,o=t.lineConstants,s=r.props.innerBounds;if(!s)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var l=s.left,u=s.top,f=s.width,c=s.height,v=[[l,u],[l,u+c]],d=[[l,u],[l+f,u]],p=[[l+f,u],[l+f,u+c]],h=[[l,u+c],[l+f,u+c]];if(xl([[l,u],[l+f,u],[l,u+c],[l+f,u+c]],e,n))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var g=Vr(e,o,d,a),m=Vr(e,o,h,a),_=Vr(e,o,v,i),b=Vr(e,o,p,i),S=g.isBound&&m.isBound,y=g.isBound||m.isBound,D=_.isBound&&b.isBound,x=_.isBound||b.isBound,E=De(g.offset,m.offset),C=De(_.offset,b.offset),w=[0,0],P=!1,O=!1;return $(C)<$(E)?(w=[E,0],P=y,O=S):(w=[0,C],P=x,O=D),{isAllBound:O,isVerticalBound:y,isHorizontalBound:x,isBound:P,offset:w}}function Vr(r,t,e,n,a,i){var o=R(t,2),s=o[0],l=o[1],u=r[0],f=e[0],c=e[1],v=Ln(c[1]-f[1]),d=Ln(c[0]-f[0]),p=l,h=s,g=-s/l;if(d){if(!v){if(i&&!p)return{isBound:!1,offset:0};if(h){var S=(f[1]-u[1])/g+u[0];return mo(S,f[0],c[0],n,a)}else{var _=f[1]-u[1],b=$(_)<=(a||0);return{isBound:b,offset:b?_:0}}}}else{if(i&&!h)return{isBound:!1,offset:0};if(p){var m=g*(f[0]-u[0])+u[1];return mo(m,f[1],c[1],n,a)}else{var _=f[0]-u[0],b=$(_)<=(a||0);return{isBound:b,offset:b?_:0}}}return{isBound:!1,offset:0}}function Cl(r,t,e){return t.map(function(n){var a=zv(r,n),i=a.isBound,o=a.offset,s=a.isVerticalBound,l=a.isHorizontalBound,u=n.multiple,f=Ir({datas:e,distX:o[0],distY:o[1]}).map(function(c,v){return c*(u[v]?2/u[v]:0)});return{sign:u,isBound:i,isVerticalBound:s,isHorizontalBound:l,isSnap:!1,offset:f}})}function Av(r,t,e){var n,a=bi(r,t,[0,0],!1).map(function(v){return T(T({},v),{multiple:v.multiple.map(function(d){return $(d)*2})})}),i=Cl(r,a,e),o=Bn(i,0),s=Bn(i,1),l=0,u=0,f=o.isVerticalBound||s.isVerticalBound,c=o.isHorizontalBound||s.isHorizontalBound;return(f||c)&&(n=R(av({datas:e,distX:-o.offset[0],distY:-s.offset[1]}),2),l=n[0],u=n[1]),{vertical:{isBound:f,offset:l},horizontal:{isBound:c,offset:u}}}function kv(r,t){var e=[],n=r[0],a=r[1];return n&&a?e.push([[0,a*2],r,[-n,a]],[[n*2,0],r,[n,-a]]):n?(e.push([[n*2,0],[n,1],[n,-1]]),t&&e.push([[0,-1],[n,-1],[-n,-1]],[[0,1],[n,1],[-n,1]])):a?(e.push([[0,a*2],[1,a],[-1,a]]),t&&e.push([[-1,0],[-1,a],[-1,-a]],[[1,0],[1,a],[1,-a]])):e.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),e}function bi(r,t,e,n){var a=r.state,i=a.allMatrix,o=a.is3d,s=ue(i,100,100,o?4:3),l=Zt(s,[0,0]);return kv(e,n).map(function(u){var f=R(u,3),c=f[0],v=f[1],d=f[2],p=[Zt(s,v),Zt(s,d)],h=Ov(p),g=Dl(l,p),m=g.vertical,_=g.horizontal,b=_i(l,p)<=0;return{multiple:c,centerSign:b,verticalSign:m,horizontalSign:_,lineConstants:h,line:[Zt(t,v),Zt(t,d)]}})}function _o(r,t,e,n){var a=n?r.map(function(i){return nn(i,n)}):r;return[[a[0],a[1]],[a[1],a[3]],[a[3],a[2]],[a[2],a[0]]].some(function(i){var o=_i(e,i)<=0;return!xl(t,i,o)})}function Bv(r){var t=R(r,2),e=t[0],n=t[1],a=n[0]-e[0],i=n[1]-e[1];if(!a)return $(e[0]);if(!i)return $(e[1]);var o=i/a;return $((-o*e[0]+e[1])/Math.sqrt(Math.pow(o,2)+1))}function Gv(r){var t=R(r,2),e=t[0],n=t[1],a=n[0]-e[0],i=n[1]-e[1];if(!a)return[e[0],0];if(!i)return[0,e[1]];var o=i/a,s=-o*e[0]+e[1];return[-s/(o+1/o),s/(o*o+1)]}function Nv(r,t,e,n,a){var i=r.props.innerBounds,o=a*Math.PI/180;if(!i)return[];var s=i.left,l=i.top,u=i.width,f=i.height,c=s-n[0],v=s+u-n[0],d=l-n[1],p=l+f-n[1],h=[[c,d],[v,d],[c,p],[v,p]],g=Zt(e,[0,0]);if(!_o(e,h,g,0))return[];var m=[],_=h.map(function(b){return[br(b),Wt([0,0],b)]});return[[e[0],e[1]],[e[1],e[3]],[e[3],e[2]],[e[2],e[0]]].forEach(function(b){var S=Wt([0,0],Gv(b)),y=Bv(b);m.push.apply(m,Z([],R(_.filter(function(D){var x=R(D,1),E=x[0];return E&&y<=E}).map(function(D){var x=R(D,2),E=x[0],C=x[1],w=Math.acos(E?y/E:0),P=C+w,O=C-w;return[o+P-S,o+O-S]}).reduce(function(D,x){return D.push.apply(D,Z([],R(x),!1)),D},[]).filter(function(D){return!_o(t,h,g,D)}).map(function(D){return pt(D*180/Math.PI,fr)})),!1))}),m}function Fv(r){var t=r.props.innerBounds,e=he();if(!t)return{boundMap:e,vertical:[],horizontal:[]};var n=r.getRect(),a=n.pos1,i=n.pos2,o=n.pos3,s=n.pos4,l=[a,i,o,s],u=Zt(l,[0,0]),f=t.left,c=t.top,v=t.width,d=t.height,p=[[f,c],[f,c+d]],h=[[f,c],[f+v,c]],g=[[f+v,c],[f+v,c+d]],m=[[f,c+d],[f+v,c+d]],_=bi(r,l,[0,0],!1),b=[],S=[];return _.forEach(function(y){var D=y.line,x=y.lineConstants,E=Dl(u,D),C=E.horizontal,w=E.vertical,P=Vr(D,x,h,w,1,!0),O=Vr(D,x,m,w,1,!0),M=Vr(D,x,p,C,1,!0),I=Vr(D,x,g,C,1,!0);P.isBound&&!e.top&&(b.push(c),e.top=!0),O.isBound&&!e.bottom&&(b.push(c+d),e.bottom=!0),M.isBound&&!e.left&&(S.push(f),e.left=!0),I.isBound&&!e.right&&(S.push(f+v),e.right=!0)}),{boundMap:e,horizontal:b,vertical:S}}function Lv(r,t,e,n){var a=t[0]-r[0],i=t[1]-r[1];if($(a)<Xt&&(a=0),$(i)<Xt&&(i=0),!a)return n?[0,0]:[0,e];if(!i)return n?[e,0]:[0,0];var o=i/a,s=r[1]-o*r[0];if(n){var l=o*(t[0]+e)+s;return[e,l-t[1]]}else{var u=(t[1]+e-s)/o;return[u-t[0],e]}}function Fa(r,t,e,n,a){var i=Lv(r,t,e,n);if(!i)return{isOutside:!1,offset:[0,0]};var o=zr(r,t),s=zr(i,r),l=zr(i,t),u=s>o||l>o,f=R(Ir({datas:a,distX:i[0],distY:i[1]}),2),c=f[0],v=f[1];return{offset:[c,v],isOutside:u}}function Gn(r,t){return r.isBound?r.offset:t.isSnap?Na(t).offset:0}function Hv(r,t,e,n,a){var i=R(t,2),o=i[0],s=i[1],l=R(e,2),u=l[0],f=l[1],c=R(n,2),v=c[0],d=c[1],p=R(a,2),h=p[0],g=p[1],m=-h,_=-g;if(r&&o&&s){m=0,_=0;var b=[];if(u&&f?b.push([0,g],[h,0]):u?b.push([h,0]):f?b.push([0,g]):v&&d?b.push([0,g],[h,0]):v?b.push([h,0]):d&&b.push([0,g]),b.length){b.sort(function(x,E){return br(st([o,s],x))-br(st([o,s],E))});var S=b[0];if(S[0]&&$(o)>Xt)m=-S[0],_=s*$(o+m)/$(o)-s;else if(S[1]&&$(s)>Xt){var y=s;_=-S[1],m=o*$(s+_)/$(y)-o}if(r&&f&&u)if($(m)>Xt&&$(m)<$(h)){var D=$(h)/$(m);m*=D,_*=D}else if($(_)>Xt&&$(_)<$(g)){var D=$(g)/$(_);m*=D,_*=D}else m=De(-h,m),_=De(-g,_)}}else m=o||u?-h:0,_=s||f?-g:0;return[m,_]}function Vv(r,t,e,n,a,i){if(!Re(r,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var o=yi(i.absolutePoses,[t,e]),s=_r(o),l=s.left,u=s.right,f=s.top,c=s.bottom,v={horizontal:o.map(function(I){return I[1]}),vertical:o.map(function(I){return I[0]})},d=gi(r.props.snapDirections),p=mi(d,{left:l,right:u,top:f,bottom:c,center:(l+u)/2,middle:(f+c)/2}),h=Jn(r,a,p,v),g=h.vertical,m=h.horizontal,_=Av(r,o,i),b=_.vertical,S=_.horizontal,y=g.isSnap,D=m.isSnap,x=g.isBound||b.isBound,E=m.isBound||S.isBound,C=De(g.offset,b.offset),w=De(m.offset,S.offset),P=R(Hv(n,[t,e],[x,E],[y,D],[C,w]),2),O=P[0],M=P[1];return[{isBound:x,isSnap:y,offset:O},{isBound:E,isSnap:D,offset:M}]}function Jn(r,t,e,n){n===void 0&&(n=e);var a=hi(Zn(r),n.vertical,n.horizontal),i=a.horizontal,o=a.vertical,s=t?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:Kn(r,e.vertical,e.horizontal,void 0,void 0,void 0,void 0),l=s.horizontal,u=s.vertical,f=Gn(i[0],l),c=Gn(o[0],u),v=$(f),d=$(c);return{horizontal:{isBound:i[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:f,dist:v,bounds:i,snap:l},vertical:{isBound:o[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:c,dist:d,bounds:o,snap:u}}}function bo(r,t,e,n,a,i,o){o===void 0&&(o=[1,1]);var s=hi(t,e,n),l=s.horizontal,u=s.vertical,f=El(r,e,n,[],[],a,i,o),c=f.horizontal,v=f.vertical,d=Gn(l[0],c),p=Gn(u[0],v),h=$(d),g=$(p);return{horizontal:{isBound:l[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:d,dist:h,bounds:l,snap:c},vertical:{isBound:u[0].isBound,isSnap:v.isSnap,snapIndex:v.index,offset:p,dist:g,bounds:u,snap:v}}}function Wv(r,t,e,n){var a=Wt(r,t)/Math.PI*180,i=e.vertical,o=i.isBound,s=i.isSnap,l=i.dist,u=e.horizontal,f=u.isBound,c=u.isSnap,v=u.dist,d=a%180,p=d<3||d>177,h=d>87&&d<93;return v<l&&(o||s&&!h&&(!n||!p))?"vertical":f||c&&!p&&(!n||!h)?"horizontal":""}function Yv(r,t,e,n,a,i){return e.map(function(o){var s=R(o,2),l=s[0],u=s[1],f=Zt(t,l),c=Zt(t,u),v=n?Xv(r,f,c,a):Jn(r,a,{vertical:[c[0]],horizontal:[c[1]]}),d=v.horizontal,p=d.offset,h=d.isBound,g=d.isSnap,m=v.vertical,_=m.offset,b=m.isBound,S=m.isSnap,y=st(u,l);if(!_&&!p)return{isBound:b||h,isSnap:S||g,sign:y,offset:[0,0]};var D=Wv(f,c,v,n);if(!D)return{sign:y,isBound:!1,isSnap:!1,offset:[0,0]};var x=D==="vertical",E=[0,0];return!n&&$(u[0])===1&&$(u[1])===1&&l[0]!==u[0]&&l[1]!==u[1]?E=Ir({datas:i,distX:-_,distY:-p}):E=Fa(f,c,-(x?_:p),x,i).offset,E=E.map(function(C,w){return C*(y[w]?2/y[w]:0)}),{sign:y,isBound:x?b:h,isSnap:x?S:g,offset:E}})}function So(r,t){return r.isBound?r.offset:t.isSnap?t.offset:0}function Xv(r,t,e,n){var a=yv(r,t,e),i=a.horizontal,o=a.vertical,s=n?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:Rv(r,t,e),l=s.horizontal,u=s.vertical,f=So(i,l),c=So(o,u),v=$(f),d=$(c);return{horizontal:{isBound:i.isBound,isSnap:l.isSnap,offset:f,dist:v},vertical:{isBound:o.isBound,isSnap:u.isSnap,offset:c,dist:d}}}function $v(r,t,e,n,a){var i=[-e[0],-e[1]],o=r.state,s=o.width,l=o.height,u=r.props.bounds,f=1/0,c=1/0;if(u){var v=[[e[0],-e[1]],[-e[0],e[1]]],d=u.left,p=d===void 0?-1/0:d,h=u.top,g=h===void 0?-1/0:h,m=u.right,_=m===void 0?1/0:m,b=u.bottom,S=b===void 0?1/0:b;v.forEach(function(y){var D=y[0]!==i[0],x=y[1]!==i[1],E=Zt(t,y),C=Wt(n,E)*360/Math.PI;if(x){var w=E.slice();($(C-360)<2||$(C-180)<2)&&(w[1]=n[1]);var P=Fa(n,w,(n[1]<E[1]?S:g)-E[1],!1,a),O=R(P.offset,2),M=O[1],I=P.isOutside;isNaN(M)||(c=l+(I?1:-1)*$(M))}if(D){var w=E.slice();($(C-90)<2||$(C-270)<2)&&(w[0]=n[0]);var z=Fa(n,w,(n[0]<E[0]?_:p)-E[0],!0,a),F=R(z.offset,1),H=F[0],V=z.isOutside;isNaN(H)||(f=s+(V?1:-1)*$(H))}})}return{maxWidth:f,maxHeight:c}}var sr={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(r,t){var e=r.props,n=e.hideThrottleDragRotateLine,a=e.throttleDragRotate,i=e.zoom,o=r.getState(),s=o.dragInfo,l=o.beforeOrigin;if(n||!a||!s)return[];var u=s.dist;if(!u[0]&&!u[1])return[];var f=br(u),c=Wt(u,[0,0]);return[t.createElement("div",{className:ot("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(f,"px"),transform:"translate(".concat(l[0],"px, ").concat(l[1],"px) rotate(").concat(c,"rad) scaleY(").concat(i,")")}})]},dragStart:function(r,t){var e=t.datas,n=t.parentEvent,a=t.parentGesto,i=r.state,o=i.gestos,s=i.style;if(o.draggable)return!1;o.draggable=a||r.targetGesto,e.datas={},e.left=parseFloat(s.left||"")||0,e.top=parseFloat(s.top||"")||0,e.bottom=parseFloat(s.bottom||"")||0,e.right=parseFloat(s.right||"")||0,e.startValue=[0,0],le(r,t),Un(r,t,"translate"),cd(r,e),e.prevDist=[0,0],e.prevBeforeDist=[0,0],e.isDrag=!1,e.deltaOffset=[0,0];var l=gt(r,t,T({set:function(f){e.startValue=f}},jn(r,t))),u=n||rt(r,"onDragStart",l);return u!==!1?(e.isDrag=!0,r.state.dragInfo={startRect:r.getRect(),dist:[0,0]}):(o.draggable=null,e.isPinch=!1),e.isDrag?l:!1},drag:function(r,t){if(t){$n(r,t,"translate");var e=t.datas,n=t.parentEvent,a=t.parentFlag,i=t.isPinch,o=t.deltaOffset,s=t.useSnap,l=t.isRequest,u=t.isGroup,f=t.parentThrottleDrag,c=t.distX,v=t.distY,d=e.isDrag,p=e.prevDist,h=e.prevBeforeDist,g=e.startValue;if(d){o&&(c+=o[0],v+=o[1]);var m=r.props,_=m.parentMoveable,b=u?0:m.throttleDrag||f||0,S=n?0:m.throttleDragRotate||0,y=0,D=!1,x=!1,E=!1,C=!1;if(!n&&S>0&&(c||v)){var w=m.startDragRotate||0,P=pt(w+Wt([0,0],[c,v])*180/Math.PI,S)-w,O=v*Math.abs(Math.cos((P-90)/180*Math.PI)),M=c*Math.abs(Math.cos(P/180*Math.PI)),I=br([M,O]);y=P*Math.PI/180,c=I*Math.cos(y),v=I*Math.sin(y)}if(!i&&!n&&!a){var z=R(Vv(r,c,v,S,!s&&l||o,e),2),F=z[0],H=z[1];D=F.isSnap,x=F.isBound,E=H.isSnap,C=H.isBound;var V=F.offset,B=H.offset;c+=V,v+=B}var G=xt(ol({datas:e,distX:c,distY:v}),g),A=xt(nv({datas:e,distX:c,distY:v}),g);Ji(A,fr),Ji(G,fr),S||(!D&&!x&&(A[0]=pt(A[0],b),G[0]=pt(G[0],b)),!E&&!C&&(A[1]=pt(A[1],b),G[1]=pt(G[1],b)));var X=st(G,g),q=st(A,g),j=st(q,p),Q=st(X,h);e.prevDist=q,e.prevBeforeDist=X,e.passDelta=j,e.passDist=q;var U=e.left+X[0],tt=e.top+X[1],et=e.right-X[0],vt=e.bottom-X[1],mt=qn(e,"translate(".concat(A[0],"px, ").concat(A[1],"px)"),"translate(".concat(q[0],"px, ").concat(q[1],"px)"));if(di(t,mt),r.state.dragInfo.dist=n?[0,0]:q,!(!n&&!_&&j.every(function(ft){return!ft})&&Q.some(function(ft){return!ft}))){var J=r.state,nt=J.width,Dt=J.height,ut=gt(r,t,T({transform:mt,dist:q,delta:j,translate:A,beforeDist:X,beforeDelta:Q,beforeTranslate:G,left:U,top:tt,right:et,bottom:vt,width:nt,height:Dt,isPinch:i},ur({transform:mt},t)));return!n&&rt(r,"onDrag",ut),ut}}}},dragAfter:function(r,t){var e=t.datas,n=e.deltaOffset;return n[0]||n[1]?(e.deltaOffset=[0,0],this.drag(r,T(T({},t),{deltaOffset:n}))):!1},dragEnd:function(r,t){var e=t.parentEvent,n=t.datas;if(r.state.dragInfo=null,!!n.isDrag){n.isDrag=!1;var a=gr(r,t,{});return!e&&rt(r,"onDragEnd",a),a}},dragGroupStart:function(r,t){var e,n,a=t.datas,i=t.clientX,o=t.clientY,s=this.dragStart(r,t);if(!s)return!1;var l=va(r,this,"dragStart",[i||0,o||0],t,!1,"draggable"),u=l.childEvents,f=l.eventParams,c=T(T({},s),{targets:r.props.targets,events:f}),v=rt(r,"onDragGroupStart",c);a.isDrag=v!==!1;var d=(n=(e=u[0])===null||e===void 0?void 0:e.datas.startValue)!==null&&n!==void 0?n:[0,0];return a.throttleOffset=[d[0]%1,d[1]%1],a.isDrag?s:!1},dragGroup:function(r,t){var e=t.datas;if(e.isDrag){var n=this.drag(r,T(T({},t),{parentThrottleDrag:r.props.throttleDrag})),a=t.datas.passDelta,i=va(r,this,"drag",a,t,!1,"draggable").eventParams;if(n){var o=T({targets:r.props.targets,events:i},n);return rt(r,"onDragGroup",o),o}}},dragGroupEnd:function(r,t){var e=t.isDrag,n=t.datas;if(n.isDrag){this.dragEnd(r,t);var a=va(r,this,"dragEnd",[0,0],t,!1,"draggable").eventParams;return rt(r,"onDragGroupEnd",gr(r,t,{targets:r.props.targets,events:a})),e}},request:function(r){var t={},e=r.getRect(),n=0,a=0,i=!1;return{isControl:!1,requestStart:function(o){return i=o.useSnap,{datas:t,useSnap:i}},request:function(o){return"x"in o?n=o.x-e.left:"deltaX"in o&&(n+=o.deltaX),"y"in o?a=o.y-e.top:"deltaY"in o&&(a+=o.deltaY),{datas:t,distX:n,distY:a,useSnap:i}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:i}}}},unset:function(r){r.state.gestos.draggable=null,r.state.dragInfo=null}};function wl(r,t){var e=Zt(r,t),n=[0,0];return{fixedPosition:e,fixedDirection:t,fixedOffset:n}}function qv(r,t){var e=r.allMatrix,n=r.is3d,a=r.width,i=r.height,o=n?4:3,s=[a/2*(1+t[0]),i/2*(1+t[1])],l=Gt(e,s,o),u=[0,0];return{fixedPosition:l,fixedDirection:t,fixedOffset:u}}function Ml(r,t){var e=r.allMatrix,n=r.is3d,a=r.width,i=r.height,o=n?4:3,s=cv(t,a,i),l=Gt(e,t,o),u=[a?0:t[0],i?0:t[1]];return{fixedPosition:l,fixedDirection:s,fixedOffset:u}}var Eo=Ci("resizable"),La={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:pl("resizable"),dragControlCondition:Eo,viewClassName:xi("resizable"),dragControlStart:function(r,t){var e,n=t.inputEvent,a=t.isPinch,i=t.isGroup,o=t.parentDirection,s=t.parentGesto,l=t.datas,u=t.parentFixedDirection,f=t.parentEvent,c=Ll(o,a,n,l),v=r.state,d=v.target,p=v.width,h=v.height,g=v.gestos;if(!c||!d||g.resizable)return!1;g.resizable=s||r.controlGesto,!a&&le(r,t),l.datas={},l.direction=c,l.startOffsetWidth=p,l.startOffsetHeight=h,l.prevWidth=0,l.prevHeight=0,l.minSize=[0,0],l.startWidth=v.inlineCSSWidth||v.cssWidth,l.startHeight=v.inlineCSSHeight||v.cssHeight,l.maxSize=[1/0,1/0],i||(l.minSize=[v.minOffsetWidth,v.minOffsetHeight],l.maxSize=[v.maxOffsetWidth,v.maxOffsetHeight]);var m=r.props.transformOrigin||"% %";l.transformOrigin=m&&vr(m)?m.split(" "):m,l.startOffsetMatrix=v.offsetMatrix,l.startTransformOrigin=v.transformOrigin,l.isWidth=(e=t==null?void 0:t.parentIsWidth)!==null&&e!==void 0?e:!c[0]&&!c[1]||c[0]||!c[1];function _(C){l.ratio=C&&isFinite(C)?C:0}l.startPositions=Sr(r.state);function b(C){var w=wl(l.startPositions,C);l.fixedDirection=w.fixedDirection,l.fixedPosition=w.fixedPosition,l.fixedOffset=w.fixedOffset}function S(C){var w=Ml(r.state,C);l.fixedDirection=w.fixedDirection,l.fixedPosition=w.fixedPosition,l.fixedOffset=w.fixedOffset}function y(C){l.minSize=[wt("".concat(C[0]),0)||0,wt("".concat(C[1]),0)||0]}function D(C){var w=[C[0]||1/0,C[1]||1/0];(!be(w[0])||isFinite(w[0]))&&(w[0]=wt("".concat(w[0]),0)||1/0),(!be(w[1])||isFinite(w[1]))&&(w[1]=wt("".concat(w[1]),0)||1/0),l.maxSize=w}_(p/h),b(u||[-c[0],-c[1]]),l.setFixedDirection=b,l.setFixedPosition=S,l.setMin=y,l.setMax=D;var x=gt(r,t,{direction:c,startRatio:l.ratio,set:function(C){var w=R(C,2),P=w[0],O=w[1];l.startWidth=P,l.startHeight=O},setMin:y,setMax:D,setRatio:_,setFixedDirection:b,setFixedPosition:S,setOrigin:function(C){l.transformOrigin=C},dragStart:sr.dragStart(r,new Ee().dragStart([0,0],t))}),E=f||rt(r,"onResizeStart",x);return l.startFixedDirection=l.fixedDirection,l.startFixedPosition=l.fixedPosition,E!==!1&&(l.isResize=!0,r.state.snapRenderInfo={request:t.isRequest,direction:c}),l.isResize?x:!1},dragControl:function(r,t){var e,n=t.datas,a=t.parentFlag,i=t.isPinch,o=t.parentKeepRatio,s=t.dragClient,l=t.parentDist,u=t.useSnap,f=t.isRequest,c=t.isGroup,v=t.parentEvent,d=t.resolveMatrix,p=n.isResize,h=n.transformOrigin,g=n.startWidth,m=n.startHeight,_=n.prevWidth,b=n.prevHeight,S=n.minSize,y=n.maxSize,D=n.ratio,x=n.startOffsetWidth,E=n.startOffsetHeight,C=n.isWidth;if(!p)return;if(d){var w=r.state.is3d,P=n.startOffsetMatrix,O=n.startTransformOrigin,M=w?4:3,I=qe(An(t)),z=Math.sqrt(I.length);M!==z&&(I=wr(I,z,M));var F=un(P,I,O,M),H=ue(F,x,E,M);n.startPositions=H,n.nextTargetMatrix=I,n.nextAllMatrix=F}var V=se(r.props,"resizable"),B=V.resizeFormat,G=V.throttleResize,A=G===void 0?a?0:1:G,X=V.parentMoveable,q=V.keepRatioFinally,j=n.direction,Q=j,U=0,tt=0;!j[0]&&!j[1]&&(Q=[1,1]);var et=D&&(o??V.keepRatio)||!1;function vt(){var Rt=n.fixedDirection,zt=ql(Q,et,n,t);U=zt.distWidth,tt=zt.distHeight;var ir=Q[0]-Rt[0]||et?Math.max(x+U,fr):x,hr=Q[1]-Rt[1]||et?Math.max(E+tt,fr):E;return et&&x&&E&&(C?hr=ir/D:ir=hr*D),[ir,hr]}var mt=R(vt(),2),J=mt[0],nt=mt[1];v||(n.setFixedDirection(n.fixedDirection),rt(r,"onBeforeResize",gt(r,t,{startFixedDirection:n.startFixedDirection,startFixedPosition:n.startFixedPosition,setFixedDirection:function(Rt){var zt;return n.setFixedDirection(Rt),zt=R(vt(),2),J=zt[0],nt=zt[1],[J,nt]},setFixedPosition:function(Rt){var zt;return n.setFixedPosition(Rt),zt=R(vt(),2),J=zt[0],nt=zt[1],[J,nt]},boundingWidth:J,boundingHeight:nt,setSize:function(Rt){var zt;zt=R(Rt,2),J=zt[0],nt=zt[1]}},!0)));var Dt=s;s||(!a&&i?Dt=hv(r,[0,0]):Dt=n.fixedPosition);var ut=[0,0];i||(ut=ud(r,J,nt,j,Dt,!u&&f,n)),l&&(!l[0]&&(ut[0]=0),!l[1]&&(ut[1]=0));function ft(){var Rt;B&&(Rt=R(B([J,nt]),2),J=Rt[0],nt=Rt[1]),J=pt(J,A),nt=pt(nt,A)}if(et){Q[0]&&Q[1]&&ut[0]&&ut[1]&&($(ut[0])>$(ut[1])?ut[1]=0:ut[0]=0);var lt=!ut[0]&&!ut[1];lt&&ft(),Q[0]&&!Q[1]||ut[0]&&!ut[1]||lt&&C?(J+=ut[0],nt=J/D):(!Q[0]&&Q[1]||!ut[0]&&ut[1]||lt&&!C)&&(nt+=ut[1],J=nt*D)}else J+=ut[0],nt+=ut[1],J=Math.max(0,J),nt=Math.max(0,nt);e=R(bs([J,nt],S,y,et?D:!1),2),J=e[0],nt=e[1],ft(),et&&(c||q)&&(C?nt=J/D:J=nt*D),U=J-x,tt=nt-E;var _t=[U-_,tt-b];n.prevWidth=U,n.prevHeight=tt;var yt=pv(r,J,nt,Dt,h,n);if(!(!X&&_t.every(function(Rt){return!Rt})&&yt.every(function(Rt){return!Rt}))){var dt=sr.drag(r,ln(t,r.state,yt,!!i,!1,"draggable")),Et=dt.transform,Vt=g+U,tr=m+tt,qt=gt(r,t,T({width:Vt,height:tr,offsetWidth:Math.round(J),offsetHeight:Math.round(nt),startRatio:D,boundingWidth:J,boundingHeight:nt,direction:j,dist:[U,tt],delta:_t,isPinch:!!i,drag:dt},Vl({style:{width:"".concat(Vt,"px"),height:"".concat(tr,"px")},transform:Et},dt,t)));return!v&&rt(r,"onResize",qt),qt}},dragControlAfter:function(r,t){var e=t.datas,n=e.isResize,a=e.startOffsetWidth,i=e.startOffsetHeight,o=e.prevWidth,s=e.prevHeight;if(!(!n||r.props.checkResizableError===!1)){var l=r.state,u=l.width,f=l.height,c=u-(a+o),v=f-(i+s),d=$(c)>3,p=$(v)>3;if(d&&(e.startWidth+=c,e.startOffsetWidth+=c,e.prevWidth+=c),p&&(e.startHeight+=v,e.startOffsetHeight+=v,e.prevHeight+=v),d||p)return this.dragControl(r,t)}},dragControlEnd:function(r,t){var e=t.datas,n=t.parentEvent;if(e.isResize){e.isResize=!1;var a=gr(r,t,{});return!n&&rt(r,"onResizeEnd",a),a}},dragGroupControlCondition:Eo,dragGroupControlStart:function(r,t){var e=t.datas,n=this.dragControlStart(r,T(T({},t),{isGroup:!0}));if(!n)return!1;var a=xr(r,"resizable",t),i=e.startOffsetWidth,o=e.startOffsetHeight;function s(){var d=e.minSize;a.forEach(function(p){var h=p.datas,g=h.minSize,m=h.startOffsetWidth,_=h.startOffsetHeight,b=i*(m?g[0]/m:0),S=o*(_?g[1]/_:0);d[0]=Math.max(d[0],b),d[1]=Math.max(d[1],S)})}function l(){var d=e.maxSize;a.forEach(function(p){var h=p.datas,g=h.maxSize,m=h.startOffsetWidth,_=h.startOffsetHeight,b=i*(m?g[0]/m:0),S=o*(_?g[1]/_:0);d[0]=Math.min(d[0],b),d[1]=Math.min(d[1],S)})}var u=Ar(r,this,"dragControlStart",t,function(d,p){return kn(r,d,e,p)});s(),l();var f=function(d){n.setFixedDirection(d),u.forEach(function(p,h){p.setFixedDirection(d),kn(r,p.moveable,e,a[h])})};e.setFixedDirection=f;var c=T(T({},n),{targets:r.props.targets,events:u.map(function(d){return T(T({},d),{setMin:function(p){d.setMin(p),s()},setMax:function(p){d.setMax(p),l()}})}),setFixedDirection:f,setMin:function(d){n.setMin(d),s()},setMax:function(d){n.setMax(d),l()}}),v=rt(r,"onResizeGroupStart",c);return e.isResize=v!==!1,e.isResize?n:!1},dragGroupControl:function(r,t){var e=t.datas;if(e.isResize){var n=se(r.props,"resizable");ta(r,"onBeforeResize",function(d){rt(r,"onBeforeResizeGroup",gt(r,t,T(T({},d),{targets:n.targets}),!0))});var a=this.dragControl(r,T(T({},t),{isGroup:!0}));if(a){var i=a.boundingWidth,o=a.boundingHeight,s=a.dist,l=n.keepRatio,u=[i/(i-s[0]),o/(o-s[1])],f=e.fixedPosition,c=Ar(r,this,"dragControl",t,function(d,p){var h=R(ar(an(r.rotation/180*Math.PI,3),[p.datas.originalX*u[0],p.datas.originalY*u[1],1],3),2),g=h[0],m=h[1];return T(T({},p),{parentDist:null,parentScale:u,dragClient:xt(f,[g,m]),parentKeepRatio:l})}),v=T({targets:n.targets,events:c},a);return rt(r,"onResizeGroup",v),v}}},dragGroupControlEnd:function(r,t){var e=t.isDrag,n=t.datas;if(n.isResize){this.dragControlEnd(r,t);var a=Ar(r,this,"dragControlEnd",t),i=gr(r,t,{targets:r.props.targets,events:a});return rt(r,"onResizeGroupEnd",i),e}},request:function(r){var t={},e=0,n=0,a=!1,i=r.getRect();return{isControl:!0,requestStart:function(o){var s;return a=o.useSnap,{datas:t,parentDirection:o.direction||[1,1],parentIsWidth:(s=o==null?void 0:o.horizontal)!==null&&s!==void 0?s:!0,useSnap:a}},request:function(o){return"offsetWidth"in o?e=o.offsetWidth-i.offsetWidth:"deltaWidth"in o&&(e+=o.deltaWidth),"offsetHeight"in o?n=o.offsetHeight-i.offsetHeight:"deltaHeight"in o&&(n+=o.deltaHeight),{datas:t,parentDist:[e,n],parentKeepRatio:o.keepRatio,useSnap:a}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:a}}}},unset:function(r){r.state.gestos.resizable=null}};function da(r,t,e,n,a){var i=r.props.groupable,o=r.state,s=o.is3d?4:3,l=t.origin,u=Gt(r.state.rootMatrix,st([l[0],l[1]],i?[0,0]:[o.left,o.top]),s),f=xt([a.left,a.top],u);t.startAbsoluteOrigin=f,t.prevDeg=Wt(f,[e,n])/Math.PI*180,t.defaultDeg=t.prevDeg,t.prevSnapDeg=0,t.loop=0,t.startDist=zr(f,[e,n])}function Cn(r,t,e){var n=e.defaultDeg,a=e.prevDeg,i=a%360,o=Math.floor(a/360);i<0&&(i+=360),i>r&&i>270&&r<90?++o:i<r&&i<90&&r>270&&--o;var s=t*(o*360+r-n);return e.prevDeg=n+s,s}function pa(r,t,e,n){return Cn(Wt(n.startAbsoluteOrigin,[r,t])/Math.PI*180,e,n)}function ha(r,t,e,n,a,i){var o=r.props.throttleRotate,s=o===void 0?0:o,l=e.prevSnapDeg,u=0,f=!1;if(i){var c=ld(r,t,n,a+n);f=c.isSnap,u=a+c.dist}f||(u=pt(a+n,s));var v=u-a;return e.prevSnapDeg=v,[v-l,v,u]}function Tl(r,t,e){var n=R(t,4),a=n[0],i=n[1],o=n[2],s=n[3];if(r==="none")return[];if($t(r))return r.map(function(g){return Tl(g,[a,i,o,s],e)[0]});var l=R((r||"top").split("-"),2),u=l[0],f=l[1],c=[a,i];u==="left"?c=[o,a]:u==="right"?c=[i,s]:u==="bottom"&&(c=[s,o]);var v=[(c[0][0]+c[1][0])/2,(c[0][1]+c[1][1])/2],d=Nl(c,e);if(f){var p=f==="top"||f==="left",h=u==="bottom"||u==="left";v=c[p&&!h||!p&&h?0:1]}return[[v,d]]}function Ha(r,t){if(t.isRequest)return t.requestAble==="rotatable";var e=t.inputEvent.target;if(Ut(e,ot("rotation-control"))||r.props.rotateAroundControls&&Ut(e,ot("around-control"))||Ut(e,ot("control"))&&Ut(e,ot("rotatable")))return!0;var n=r.props.rotationTarget;return n?wi(n,!0).some(function(a){return a?e===a||e.contains(a):!1}):!1}var jv=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,Uv={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[jv],viewClassName:function(r){return r.isDragging("rotatable")?ot("view-rotation-dragging"):""},render:function(r,t){var e=se(r.props,"rotatable"),n=e.rotatable,a=e.rotationPosition,i=e.zoom,o=e.renderDirections,s=e.rotateAroundControls,l=e.resolveAblesWithRotatable,u=r.getState(),f=u.renderPoses,c=u.direction;if(!n)return null;var v=Tl(a,f,c),d=[];if(v.forEach(function(m,_){var b=R(m,2),S=b[0],y=b[1];d.push(t.createElement("div",{key:"rotation".concat(_),className:ot("rotation"),style:{transform:"translate(-50%) translate(".concat(S[0],"px, ").concat(S[1],"px) rotate(").concat(y,"rad)")}},t.createElement("div",{className:ot("line rotation-line"),style:{transform:"scaleX(".concat(i,")")}}),t.createElement("div",{className:ot("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(i,")")}})))}),o){var p=Nr(l||{}),h={};p.forEach(function(m){l[m].forEach(function(_){h[_]=m})});var g=[];$t(o)&&(g=o.map(function(m){var _=h[m];return{data:_?{resolve:_}:{},classNames:_?["move"]:[],dir:m}})),d.push.apply(d,Z([],R(cl(r,"rotatable",g,t)),!1))}return s&&d.push.apply(d,Z([],R(gl(r,t)),!1)),d},dragControlCondition:Ha,dragControlStart:function(r,t){var e,n,a=t.datas,i=t.clientX,o=t.clientY,s=t.parentRotate,l=t.parentFlag,u=t.isPinch,f=t.isRequest,c=r.state,v=c.target,d=c.left,p=c.top,h=c.direction,g=c.beforeDirection,m=c.targetTransform,_=c.moveableClientRect,b=c.offsetMatrix,S=c.targetMatrix,y=c.allMatrix,D=c.width,x=c.height;if(!f&&!v)return!1;var E=r.getRect();a.rect=E,a.transform=m,a.left=d,a.top=p;var C=function(Q){var U=Ml(r.state,Q);a.fixedDirection=U.fixedDirection,a.fixedOffset=U.fixedOffset,a.fixedPosition=U.fixedPosition,A&&A.setFixedPosition(Q)},w=function(Q){var U=qv(r.state,Q);a.fixedDirection=U.fixedDirection,a.fixedOffset=U.fixedOffset,a.fixedPosition=U.fixedPosition,A&&A.setFixedDirection(Q)},P=i,O=o;if(f||u||l){var M=s||0;a.beforeInfo={origin:E.beforeOrigin,prevDeg:M,defaultDeg:M,prevSnapDeg:0,startDist:0},a.afterInfo=T(T({},a.beforeInfo),{origin:E.origin}),a.absoluteInfo=T(T({},a.beforeInfo),{origin:E.origin,startValue:M})}else{var I=(n=t.inputEvent)===null||n===void 0?void 0:n.target;if(I){var z=I.getAttribute("data-direction")||"",F=rv[z];if(F){a.isControl=!0,a.isAroundControl=Ut(I,ot("around-control")),a.controlDirection=F;var H=I.getAttribute("data-resolve");H&&(a.resolveAble=H);var V=xd(c.rootMatrix,c.renderPoses,_);e=R(Zt(V,F),2),P=e[0],O=e[1]}}a.beforeInfo={origin:E.beforeOrigin},a.afterInfo={origin:E.origin},a.absoluteInfo={origin:E.origin,startValue:E.rotation};var B=C;C=function(Q){var U=c.is3d?4:3,tt=R(xt(Ys(S,U),Q),2),et=tt[0],vt=tt[1],mt=ar(b,ae([et,vt],U)),J=ar(y,ae([Q[0],Q[1]],U));B(Q);var nt=c.posDelta;a.beforeInfo.origin=st(mt,nt),a.afterInfo.origin=st(J,nt),a.absoluteInfo.origin=st(J,nt),da(r,a.beforeInfo,P,O,_),da(r,a.afterInfo,P,O,_),da(r,a.absoluteInfo,P,O,_)},w=function(Q){var U=Zt([[0,0],[D,0],[0,x],[D,x]],Q);C(U)}}a.startClientX=P,a.startClientY=O,a.direction=h,a.beforeDirection=g,a.startValue=0,a.datas={},Un(r,t,"rotate");var G=!1,A=!1;if(a.isControl&&a.resolveAble){var X=a.resolveAble;X==="resizable"&&(A=La.dragControlStart(r,T(T({},new Ee("resizable").dragStart([0,0],t)),{parentPosition:a.controlPosition,parentFixedPosition:a.fixedPosition})))}A||(G=sr.dragStart(r,new Ee().dragStart([0,0],t))),C(Cd(r));var q=gt(r,t,T(T({set:function(Q){a.startValue=Q*Math.PI/180},setFixedDirection:w,setFixedPosition:C},jn(r,t)),{dragStart:G,resizeStart:A})),j=rt(r,"onRotateStart",q);return a.isRotate=j!==!1,c.snapRenderInfo={request:t.isRequest},a.isRotate?q:!1},dragControl:function(r,t){var e,n,a,i=t.datas,o=t.clientDistX,s=t.clientDistY,l=t.parentRotate,u=t.parentFlag,f=t.isPinch,c=t.groupDelta,v=t.resolveMatrix,d=i.beforeDirection,p=i.beforeInfo,h=i.afterInfo,g=i.absoluteInfo,m=i.isRotate,_=i.startValue,b=i.rect,S=i.startClientX,y=i.startClientY;if(m){$n(r,t,"rotate");var D=ev(t),x=d*D,E=r.props.parentMoveable,C=0,w,P,O=0,M,I,z=0,F,H,V=180/Math.PI*_,B=g.startValue,G=!1,A=S+o,X=y+s;if(!u&&"parentDist"in t){var q=t.parentDist;w=q,M=q,F=q}else f||u?(w=Cn(l,d,p),M=Cn(l,x,h),F=Cn(l,x,g)):(w=pa(A,X,d,p),M=pa(A,X,x,h),F=pa(A,X,x,g),G=!0);if(P=V+w,I=V+M,H=B+F,rt(r,"onBeforeRotate",gt(r,t,{beforeRotation:P,rotation:I,absoluteRotation:H,setRotation:function(Dt){M=Dt-V,w=M,F=M}},!0)),e=R(ha(r,b,p,w,V,G),3),C=e[0],w=e[1],P=e[2],n=R(ha(r,b,h,M,V,G),3),O=n[0],M=n[1],I=n[2],a=R(ha(r,b,g,F,B,G),3),z=a[0],F=a[1],H=a[2],!(!z&&!O&&!C&&!E&&!v)){var j=qn(i,"rotate(".concat(I,"deg)"),"rotate(".concat(M,"deg)"));v&&(i.fixedPosition=pi(r,i.targetAllTransform,i.fixedDirection,i.fixedOffset,i));var Q=dv(r,M,i),U=st(xt(c||[0,0],Q),i.prevInverseDist||[0,0]);i.prevInverseDist=Q,i.requestValue=null;var tt=ll(r,j,U,f,t),et=tt,vt=zr([A,X],g.startAbsoluteOrigin)-g.startDist,mt=void 0;if(i.resolveAble==="resizable"){var J=La.dragControl(r,T(T({},ln(t,r.state,[t.deltaX,t.deltaY],!!f,!1,"resizable")),{resolveMatrix:!0,parentDistance:vt}));J&&(mt=J,et=Vl(et,J,t))}var nt=gt(r,t,T(T({delta:O,dist:M,rotate:I,rotation:I,beforeDist:w,beforeDelta:C,beforeRotate:P,beforeRotation:P,absoluteDist:F,absoluteDelta:z,absoluteRotate:H,absoluteRotation:H,isPinch:!!f,resize:mt},tt),et));return rt(r,"onRotate",nt),nt}}},dragControlEnd:function(r,t){var e=t.datas;if(e.isRotate){e.isRotate=!1;var n=gr(r,t,{});return rt(r,"onRotateEnd",n),n}},dragGroupControlCondition:Ha,dragGroupControlStart:function(r,t){var e=t.datas,n=r.state,a=n.left,i=n.top,o=n.beforeOrigin,s=this.dragControlStart(r,t);if(!s)return!1;s.set(e.beforeDirection*r.rotation);var l=Ar(r,this,"dragControlStart",t,function(c,v){var d=c.state,p=d.left,h=d.top,g=d.beforeOrigin,m=xt(st([p,h],[a,i]),st(g,o));return v.datas.startGroupClient=m,v.datas.groupClient=m,T(T({},v),{parentRotate:0})}),u=T(T({},s),{targets:r.props.targets,events:l}),f=rt(r,"onRotateGroupStart",u);return e.isRotate=f!==!1,e.isRotate?s:!1},dragGroupControl:function(r,t){var e=t.datas;if(e.isRotate){ta(r,"onBeforeRotate",function(u){rt(r,"onBeforeRotateGroup",gt(r,t,T(T({},u),{targets:r.props.targets}),!0))});var n=this.dragControl(r,t);if(n){var a=e.beforeDirection,i=n.beforeDist,o=i/180*Math.PI,s=Ar(r,this,"dragControl",t,function(u,f){var c=f.datas.startGroupClient,v=R(f.datas.groupClient,2),d=v[0],p=v[1],h=R(nn(c,o*a),2),g=h[0],m=h[1],_=[g-d,m-p];return f.datas.groupClient=[g,m],T(T({},f),{parentRotate:i,groupDelta:_})});r.rotation=a*n.beforeRotation;var l=T({targets:r.props.targets,events:s,set:function(u){r.rotation=u},setGroupRotation:function(u){r.rotation=u}},n);return rt(r,"onRotateGroup",l),l}}},dragGroupControlEnd:function(r,t){var e=t.isDrag,n=t.datas;if(n.isRotate){this.dragControlEnd(r,t);var a=Ar(r,this,"dragControlEnd",t),i=gr(r,t,{targets:r.props.targets,events:a});return rt(r,"onRotateGroupEnd",i),e}},request:function(r){var t={},e=0,n=r.getRotation();return{isControl:!0,requestStart:function(){return{datas:t}},request:function(a){return"deltaRotate"in a?e+=a.deltaRotate:"rotate"in a&&(e=a.rotate-n),{datas:t,parentDist:e}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function Zv(r,t){var e,n=r.direction,a=r.classNames,i=r.size,o=r.pos,s=r.zoom,l=r.key,u=n==="horizontal",f=u?"Y":"X";return t.createElement("div",{key:l,className:a.join(" "),style:(e={},e[u?"width":"height"]="".concat(i),e.transform="translate(".concat(o[0],", ").concat(o[1],") translate").concat(f,"(-50%) scale").concat(f,"(").concat(s,")"),e)})}function Si(r,t){return Zv(T(T({},r),{classNames:Z([ot("line","guideline",r.direction)],R(r.classNames),!1).filter(function(e){return e}),size:r.size||"".concat(r.sizeValue,"px"),pos:r.pos||r.posValue.map(function(e){return"".concat(pt(e,.1),"px")})}),t)}function yo(r,t,e,n,a,i,o,s){var l=r.props.zoom;return e.map(function(u,f){var c=u.type,v=u.pos,d=[0,0];return d[o]=n,d[o?0:1]=-a+v,Si({key:"".concat(t,"TargetGuideline").concat(f),classNames:[ot("target","bold",c)],posValue:d,sizeValue:i,zoom:l,direction:t},s)})}function Do(r,t,e,n,a,i){var o=r.props,s=o.zoom,l=o.isDisplayInnerSnapDigit,u=t==="horizontal"?$r:qr,f=a[u.start],c=a[u.end];return e.filter(function(v){var d=v.hide,p=v.elementRect;if(d)return!1;if(l&&p){var h=p.rect;if(h[u.start]<=f&&c<=h[u.end])return!1}return!0}).map(function(v,d){var p=v.pos,h=v.size,g=v.element,m=v.className,_=[-n[0]+p[0],-n[1]+p[1]];return Si({key:"".concat(t,"-default-guideline-").concat(d),classNames:g?[ot("bold"),m]:[ot("normal"),m],direction:t,posValue:_,sizeValue:h,zoom:s},i)})}function ke(r,t,e,n,a,i,o,s){var l,u=r.props,f=u.snapDigit,c=f===void 0?0:f,v=u.isDisplaySnapDigit,d=v===void 0?!0:v,p=u.snapDistFormat,h=p===void 0?function(y,D){return y}:p,g=u.zoom,m=t==="horizontal"?"X":"Y",_=t==="vertical"?"height":"width",b=Math.abs(a),S=d?parseFloat(b.toFixed(c)):0;return s.createElement("div",{key:"".concat(t,"-").concat(e,"-guideline-").concat(n),className:ot("guideline-group",t),style:(l={left:"".concat(i[0],"px"),top:"".concat(i[1],"px")},l[_]="".concat(b,"px"),l)},Si({direction:t,classNames:[ot(e),o],size:"100%",posValue:[0,0],sizeValue:b,zoom:g},s),s.createElement("div",{className:ot("size-value","gap"),style:{transform:"translate".concat(m,"(-50%) scale(").concat(g,")")}},S>0?h(S,t):""))}function Kv(r,t,e,n){var a=r==="vertical"?0:1,i=r==="vertical"?1:0,o=a?$r:qr,s=e[o.start],l=e[o.end];return Wl(t,function(u){return u.pos[a]}).map(function(u){var f=[],c=[],v=[];return u.forEach(function(d){var p,h,g=d.element,m=d.elementRect.rect;if(m[o.end]<s)f.push(d);else if(l<m[o.start])c.push(d);else if(m[o.start]<=s&&l<=m[o.end]&&n){var _=d.pos,b={element:g,rect:T(T({},m),(p={},p[o.end]=m[o.start],p))},S={element:g,rect:T(T({},m),(h={},h[o.start]=m[o.end],h))},y=[0,0],D=[0,0];y[a]=_[a],y[i]=_[i],D[a]=_[a],D[i]=_[i]+d.size,f.push({type:r,pos:y,size:0,elementRect:b,direction:"",elementDirection:"end"}),c.push({type:r,pos:D,size:0,elementRect:S,direction:"",elementDirection:"start"})}}),f.sort(function(d,p){return p.pos[i]-d.pos[i]}),c.sort(function(d,p){return d.pos[i]-p.pos[i]}),{total:u,start:f,end:c,inner:v}})}function Jv(r,t,e,n,a){var i=r.props.isDisplayInnerSnapDigit,o=[];return["vertical","horizontal"].forEach(function(s){var l=t.filter(function(g){return g.type===s}),u=s==="vertical"?1:0,f=u?0:1,c=Kv(s,l,n,i),v=u?qr:$r,d=u?$r:qr,p=n[v.start],h=n[v.end];c.forEach(function(g){var m=g.total,_=g.start,b=g.end,S=g.inner,y=e[f]+m[0].pos[f]-n[d.start],D=n;_.forEach(function(x){var E=x.elementRect.rect,C=D[v.start]-E[v.end];if(C>0){var w=[0,0];w[u]=e[u]+D[v.start]-p-C,w[f]=y,o.push(ke(r,s,"dashed",o.length,C,w,x.className,a))}D=E}),D=n,b.forEach(function(x){var E=x.elementRect.rect,C=E[v.start]-D[v.end];if(C>0){var w=[0,0];w[u]=e[u]+D[v.end]-p,w[f]=y,o.push(ke(r,s,"dashed",o.length,C,w,x.className,a))}D=E}),S.forEach(function(x){var E=x.elementRect.rect,C=p-E[v.start],w=E[v.end]-h,P=[0,0],O=[0,0];P[u]=e[u]-C,P[f]=y,O[u]=e[u]+h-p,O[f]=y,o.push(ke(r,s,"dashed",o.length,C,P,x.className,a)),o.push(ke(r,s,"dashed",o.length,w,O,x.className,a))})})}),o}function Qv(r,t,e,n,a){var i=[];return["horizontal","vertical"].forEach(function(o){var s=t.filter(function(g){return g.type===o}).slice(0,1),l=o==="vertical"?0:1,u=l?0:1,f=l?qr:$r,c=l?$r:qr,v=n[f.start],d=n[f.end],p=n[c.start],h=n[c.end];s.forEach(function(g){var m=g.gap,_=g.gapRects,b=Math.max.apply(Math,Z([p],R(_.map(function(D){var x=D.rect;return x[c.start]})),!1)),S=Math.min.apply(Math,Z([h],R(_.map(function(D){var x=D.rect;return x[c.end]})),!1)),y=(b+S)/2;b===S||y===(p+h)/2||_.forEach(function(D){var x=D.rect,E=D.className,C=[e[0],e[1]];if(x[f.end]<v)C[l]+=x[f.end]-v;else if(d<x[f.start])C[l]+=x[f.start]-v-m;else return;C[u]+=y-p,i.push(ke(r,l?"vertical":"horizontal","gap",i.length,m,C,E,a))})})}),i}function Va(r){var t,e,n=r.state,a=n.containerClientRect,i=n.hasFixed,o=a.overflow,s=a.scrollHeight,l=a.scrollWidth,u=a.clientHeight,f=a.clientWidth,c=a.clientLeft,v=a.clientTop,d=r.props,p=d.snapGap,h=p===void 0?!0:p,g=d.verticalGuidelines,m=d.horizontalGuidelines,_=d.snapThreshold,b=_===void 0?5:_,S=d.maxSnapElementGuidelineDistance,y=S===void 0?1/0:S,D=d.isDisplayGridGuidelines,x=_r(Sr(r.state)),E=x.top,C=x.left,w=x.bottom,P=x.right,O={top:E,left:C,bottom:w,right:P,center:(C+P)/2,middle:(E+w)/2},M=nd(r),I=Z([],R(M),!1),z=((e=(t=n.snapThresholdInfo)===null||t===void 0?void 0:t.multiples)!==null&&e!==void 0?e:[1,1]).map(function(B){return B*b});h&&I.push.apply(I,Z([],R(td(r,O,z)),!1));var F=T({},n.snapOffset||{left:0,top:0,bottom:0,right:0});if(I.push.apply(I,Z([],R(ed(r,o?l:f,o?s:u,c,v,F,D)),!1)),i){var H=a.left,V=a.top;F.left+=H,F.top+=V,F.right+=H,F.bottom+=V}return I.push.apply(I,Z([],R(Rl(m||!1,g||!1,o?l:f,o?s:u,c,v,F)),!1)),I=I.filter(function(B){var G=B.element,A=B.elementRect,X=B.type;if(!G||!A)return!0;var q=A.rect;return Ol(O,q,X,y)}),I}function td(r,t,e){var n=r.props,a=n.maxSnapElementGuidelineDistance,i=a===void 0?1/0:a,o=n.maxSnapElementGapDistance,s=o===void 0?1/0:o,l=r.state.elementRects,u=[];return[["vertical",$r,qr],["horizontal",qr,$r]].forEach(function(f){var c=R(f,3),v=c[0],d=c[1],p=c[2],h=t[d.start],g=t[d.end],m=t[d.center],_=t[p.start],b=t[p.end],S={left:e[0],top:e[1]};function y(E){var C=E.rect,w=S[d.start];return C[d.end]<h+w?h-C[d.end]:g-w<C[d.start]?C[d.start]-g:-1}var D=l.filter(function(E){var C=E.rect;return C[p.start]>b||C[p.end]<_?!1:y(E)>0}).sort(function(E,C){return y(E)-y(C)}),x=[];D.forEach(function(E){D.forEach(function(C){if(E!==C){var w=E.rect,P=C.rect,O=w[p.start],M=w[p.end],I=P[p.start],z=P[p.end];O>z||I>M||x.push([E,C])}})}),x.forEach(function(E){var C=R(E,2),w=C[0],P=C[1],O=w.rect,M=P.rect,I=O[d.start],z=O[d.end],F=M[d.start],H=M[d.end],V=S[d.start],B=0,G=0,A=!1,X=!1,q=!1;if(z<=h&&g<=F){if(X=!0,B=(F-z-(g-h))/2,G=z+B+(g-h)/2,$(G-m)>V)return}else if(z<F&&H<h+V){if(A=!0,B=F-z,G=H+B,$(G-h)>V)return}else if(z<F&&g-V<I){if(q=!0,B=F-z,G=I-B,$(G-g)>V)return}else return;B&&Ol(t,M,v,i)&&(B>s||u.push({type:v,pos:v==="vertical"?[G,0]:[0,G],element:P.element,size:0,className:P.className,isStart:A,isCenter:X,isEnd:q,gap:B,hide:!0,gapRects:[w,P],direction:"",elementDirection:""}))})}),u}function rd(r,t,e,n){var a,i,o=r.props,s=r.state,l=o.snapGridAll,u=o.snapGridWidth,f=u===void 0?0:u,c=o.snapGridHeight,v=c===void 0?0:c,d=s.snapRenderInfo,p=d&&(((a=d.direction)===null||a===void 0?void 0:a[0])||((i=d.direction)===null||i===void 0?void 0:i[1])),h=r.moveables;if(l&&h&&p&&(f||v)){if(s.snapThresholdInfo)return;s.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var g=r.getRect(),m=g.children,_=d.direction;if(m){var b=_.map(function(y,D){var x=D===0?{snapSize:f,posName:"left",sizeName:"width",clientOffset:n.left-t}:{snapSize:v,posName:"top",sizeName:"height",clientOffset:n.top-e},E=x.snapSize,C=x.posName,w=x.sizeName,P=x.clientOffset;if(!E)return{dir:y,multiple:1,snapSize:E,snapOffset:0};var O=g[w],M=g[C],I=Ss(m.map(function(A){return[A[C]-M,A[w],O-A[w]-A[C]+M]})).filter(function(A){return A}).sort(function(A,X){return A-X}),z=I[0],F=I.map(function(A){return pt(A/z,.1)*E}),H=1,V=pt(O/z,.1);for(H=1;H<=10&&!F.every(function(A){return A*H%1===0});++H);var B=(-y+1)/2,G=Rn(M-P,M-P+O,B,1-B);return{multiple:V*H,dir:y,snapSize:E,snapOffset:Math.round(G/E)}}),S=b.map(function(y){return y.multiple||1});s.snapThresholdInfo.multiples=S,s.snapThresholdInfo.offset=b.map(function(y){return y.snapOffset}),b.forEach(function(y,D){y.snapSize})}}else s.snapThresholdInfo=null}function ed(r,t,e,n,a,i,o){n===void 0&&(n=0),a===void 0&&(a=0);var s=r.props,l=r.state,u=s.snapGridWidth,f=u===void 0?0:u,c=s.snapGridHeight,v=c===void 0?0:c,d=[],p=i.left,h=i.top,g=[0,0];rd(r,n,a,i);var m=l.snapThresholdInfo,_=f,b=v;if(m&&(f*=m.multiples[0]||1,v*=m.multiples[1]||1,g=m.offset),v){for(var S=function(D){d.push({type:"horizontal",pos:[p,pt(g[1]*b+D-a+h,.1)],className:ot("grid-guideline"),size:t,hide:!o,direction:"",grid:!0})},y=0;y<=e*2;y+=v)S(y);for(var y=-v;y>=-e;y-=v)S(y)}if(f){for(var S=function(x){d.push({type:"vertical",pos:[pt(g[0]*_+x-n+p,.1),h],className:ot("grid-guideline"),size:e,hide:!o,direction:"",grid:!0})},y=0;y<=t*2;y+=f)S(y);for(var y=-f;y>=-t;y-=f)S(y)}return d}function Ol(r,t,e,n){return e==="horizontal"?$(r.right-t.left)<=n||$(r.left-t.right)<=n||r.left<=t.right&&t.left<=r.right:e==="vertical"?$(r.bottom-t.top)<=n||$(r.top-t.bottom)<=n||r.top<=t.bottom&&t.top<=r.bottom:!0}function nd(r){var t=r.state,e=r.props.elementGuidelines,n=e===void 0?[]:e;if(!n.length)return t.elementRects=[],[];var a=(t.elementRects||[]).filter(function(v){return!v.refresh}),i=n.map(function(v){return Cr(v)&&"element"in v?T(T({},v),{element:Tr(v.element,!0)}):{element:Tr(v,!0)}}).filter(function(v){return v.element}),o=dc(a.map(function(v){return v.element}),i.map(function(v){return v.element})),s=o.maintained,l=o.added,u=[];s.forEach(function(v){var d=R(v,2),p=d[0],h=d[1];u[h]=a[p]}),ad(r,l.map(function(v){return i[v]})).map(function(v,d){u[l[d]]=v}),t.elementRects=u;var f=gi(r.props.elementSnapDirections),c=[];return u.forEach(function(v){var d=v.element,p=v.top,h=p===void 0?f.top:p,g=v.left,m=g===void 0?f.left:g,_=v.right,b=_===void 0?f.right:_,S=v.bottom,y=S===void 0?f.bottom:S,D=v.center,x=D===void 0?f.center:D,E=v.middle,C=E===void 0?f.middle:E,w=v.className,P=v.rect,O=mi({top:h,right:b,left:m,bottom:y,center:x,middle:C},P),M=O.horizontal,I=O.vertical,z=O.horizontalNames,F=O.verticalNames,H=P.top,V=P.left,B=P.right-V,G=P.bottom-H,A=[B,G];I.forEach(function(X,q){c.push({type:"vertical",element:d,pos:[pt(X,.1),H],size:G,sizes:A,className:w,elementRect:v,elementDirection:po[F[q]]||F[q],direction:""})}),M.forEach(function(X,q){c.push({type:"horizontal",element:d,pos:[V,pt(X,.1)],size:B,sizes:A,className:w,elementRect:v,elementDirection:po[z[q]]||z[q],direction:""})})}),c}function xo(r,t){return r?r.map(function(e){var n=Cr(e)?e:{pos:e},a=n.pos;return be(a)?n:T(T({},n),{pos:wt(a,t)})}):[]}function Rl(r,t,e,n,a,i,o){a===void 0&&(a=0),i===void 0&&(i=0),o===void 0&&(o={left:0,top:0,right:0,bottom:0});var s=[],l=o.left,u=o.top,f=o.bottom,c=o.right,v=e+c-l,d=n+f-u;return xo(r,d).forEach(function(p){s.push({type:"horizontal",pos:[l,pt(p.pos-i+u,.1)],size:v,className:p.className,direction:""})}),xo(t,v).forEach(function(p){s.push({type:"vertical",pos:[pt(p.pos-a+l,.1),u],size:d,className:p.className,direction:""})}),s}function ad(r,t){if(!t.length)return[];var e=r.props.groupable,n=r.state,a=n.containerClientRect,i=n.rootMatrix,o=n.is3d,s=n.offsetDelta,l=o?4:3,u=R(Tv(i,a,l),2),f=u[0],c=u[1],v=e?0:s[0],d=e?0:s[1];return t.map(function(p){var h=p.element.getBoundingClientRect(),g=h.left-f-v,m=h.top-c-d,_=m+h.height,b=g+h.width,S=R(xe(i,[g,m],l),2),y=S[0],D=S[1],x=R(xe(i,[b,_],l),2),E=x[0],C=x[1];return T(T({},p),{rect:{left:y,right:E,top:D,bottom:C,center:(y+E)/2,middle:(D+C)/2}})})}function _n(r){var t=r.state,e=t.container,n=r.props.snapContainer||e;if(t.snapContainer===n&&t.guidelines&&t.guidelines.length)return!1;var a=t.containerClientRect,i={left:0,top:0,bottom:0,right:0};if(e!==n){var o=Tr(n,!0);if(o){var s=We(o),l=Ro(t,[s.left-a.left,s.top-a.top]),u=Ro(t,[s.right-a.right,s.bottom-a.bottom]);i.left=pt(l[0],1e-5),i.top=pt(l[1],1e-5),i.right=pt(u[0],1e-5),i.bottom=pt(u[1],1e-5)}}return t.snapContainer=n,t.snapOffset=i,t.guidelines=Va(r),t.enableSnap=!0,!0}function Il(r,t,e,n,a,i){var o=ue(r,t,e,i?4:3),s=Zt(o,n);return yi(o,st(a,s))}function Co(r){return r?r/$(r):0}function id(r,t,e,n,a,i){var o=i.fixedDirection,s=Pv(e,o,n),l=bi(r,t,e,n),u=Z(Z([],R(Yv(r,t,s,n,a,i)),!1),R(Cl(r,l,i)),!1),f=Bn(u,0),c=Bn(u,1);return{width:{isBound:f.isBound,offset:f.offset[0]},height:{isBound:c.isBound,offset:c.offset[1]}}}function od(r,t,e,n,a,i,o,s,l){var u=Zt(t,o),f=Jn(r,s,{vertical:[u[0]],horizontal:[u[1]]}),c=f.horizontal.offset,v=f.vertical.offset;if(pt(v,ka)||pt(c,ka)){var d=R(Ir({datas:l,distX:-v,distY:-c}),2),p=d[0],h=d[1],g=Math.min(a||1/0,e+o[0]*p),m=Math.min(i||1/0,n+o[1]*h);return[g-e,m-n]}return[0,0]}function Pl(r,t,e,n,a,i,o,s){for(var l=Sr(r.state),u=r.props.keepRatio,f=0,c=0,v=0;v<2;++v){var d=t(f,c),p=id(r,d,a,u,o,s),h=p.width,g=p.height,m=h.isBound,_=g.isBound,b=h.offset,S=g.offset;if(v===1&&(m||(b=0),_||(S=0)),v===0&&o&&!m&&!_)return[0,0];if(u){var y=$(b)*(e?1/e:1),D=$(S)*(n?1/n:1),x=m&&_?y<D:_||!m&&y<D;x?b=e*S/n:S=n*b/e}f+=b,c+=S}if(!u&&a[0]&&a[1]){var E=$v(r,l,a,i,s),C=E.maxWidth,w=E.maxHeight,P=R(od(r,t(f,c).map(function(I){return I.map(function(z){return pt(z,ka)})}),e+f,n+c,C,w,a,o,s),2),b=P[0],S=P[1];f+=b,c+=S}return[f,c]}function He(r){return r<0&&(r=r%360+360),r%=360,r}function sd(r,t){t=He(t);var e=Math.floor(r/360),n=e*360+360-t,a=e*360+t;return $(r-n)<$(r-a)?n:a}function ga(r,t){r=He(r),t=He(t);var e=He(r-t);return Math.min(e,360-e)}function ld(r,t,e,n){var a,i=r.props,o=(a=i[ml])!==null&&a!==void 0?a:5,s=i[_l];if(Re(r,"rotatable")){var l=t.pos1,u=t.pos2,f=t.pos3,c=t.pos4,v=t.origin,d=e*Math.PI/180,p=[l,u,f,c].map(function(S){return st(S,v)}),h=p.map(function(S){return nn(S,d)}),g=Z(Z([],R(xv(r,p,h,v,e)),!1),R(Nv(r,p,h,v,e)),!1);g.sort(function(S,y){return $(S-e)-$(y-e)});var m=g.length>0;if(m)return{isSnap:m,dist:m?g[0]:e}}if(s!=null&&s.length&&o){var _=s.slice().sort(function(S,y){return ga(S,n)-ga(y,n)}),b=_[0];if(ga(b,n)<=o)return{isSnap:!0,dist:e+sd(n,b)-n}}return{isSnap:!1,dist:e}}function ud(r,t,e,n,a,i,o){if(!Re(r,"resizable"))return[0,0];var s=o.fixedDirection,l=o.nextAllMatrix,u=r.state,f=u.allMatrix,c=u.is3d;return Pl(r,function(v,d){return Il(l||f,t+v,e+d,s,a,c)},t,e,n,a,i,o)}function fd(r,t,e,n,a){if(!Re(r,"scalable"))return[0,0];var i=a.startOffsetWidth,o=a.startOffsetHeight,s=a.fixedPosition,l=a.fixedDirection,u=a.is3d,f=Pl(r,function(c,v){return Il(uv(a,xt(t,[c/i,v/o])),i,o,l,s,u)},i,o,e,s,n,a);return[f[0]/i,f[1]/o]}function cd(r,t){t.absolutePoses=Sr(r.state)}function wo(r){var t=[];return r.forEach(function(e){e.guidelineInfos.forEach(function(n){var a=n.guideline;dr(t,function(i){return i.guideline===a})||(a.direction="",t.push({guideline:a,posInfo:e}))})}),t.map(function(e){var n=e.guideline,a=e.posInfo;return T(T({},n),{direction:a.direction})})}function Mo(r,t,e,n,a,i){var o=hi(Zn(r,i),t,e),s=o.vertical,l=o.horizontal,u=he();s.forEach(function(p){p.isBound&&(p.direction==="start"&&(u.left=!0),p.direction==="end"&&(u.right=!0),n.push({type:"bounds",pos:p.pos}))}),l.forEach(function(p){p.isBound&&(p.direction==="start"&&(u.top=!0),p.direction==="end"&&(u.bottom=!0),a.push({type:"bounds",pos:p.pos}))});var f=Fv(r),c=f.boundMap,v=f.vertical,d=f.horizontal;return v.forEach(function(p){Gr(n,function(h){var g=h.type,m=h.pos;return g==="bounds"&&m===p})>=0||n.push({type:"bounds",pos:p})}),d.forEach(function(p){Gr(a,function(h){var g=h.type,m=h.pos;return g==="bounds"&&m===p})>=0||a.push({type:"bounds",pos:p})}),{boundMap:u,innerBoundMap:c}}var vd=Ci("",["resizable","scalable"]),dd={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",ml,_l,bl,Sl,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(r,t){var e=r.state,n=e.top,a=e.left,i=e.pos1,o=e.pos2,s=e.pos3,l=e.pos4,u=e.snapRenderInfo,f=r.props.snapRenderThreshold,c=f===void 0?1:f;if(!u||!u.render||!Re(r,""))return me(r,"boundMap",he(),function(j){return JSON.stringify(j)}),me(r,"innerBoundMap",he(),function(j){return JSON.stringify(j)}),[];e.guidelines=Va(r);var v=Math.min(i[0],o[0],s[0],l[0]),d=Math.min(i[1],o[1],s[1],l[1]),p=u.externalPoses||[],h=Sr(r.state),g=[],m=[],_=[],b=[],S=[],y=_r(h),D=y.width,x=y.height,E=y.top,C=y.left,w=y.bottom,P=y.right,O={left:C,right:P,top:E,bottom:w,center:(C+P)/2,middle:(E+w)/2},M=p.length>0,I=M?_r(p):{};if(!u.request){if(u.direction&&S.push(Iv(r,h,u.direction,c,c)),u.snap){var z=_r(h);u.center&&(z.middle=(z.top+z.bottom)/2,z.center=(z.left+z.right)/2),S.push(ho(r,z,c,c))}M&&(u.center&&(I.middle=(I.top+I.bottom)/2,I.center=(I.left+I.right)/2),S.push(ho(r,I,c,c))),S.forEach(function(j){var Q=j.vertical.posInfos,U=j.horizontal.posInfos;g.push.apply(g,Z([],R(Q.filter(function(tt){var et=tt.guidelineInfos;return et.some(function(vt){var mt=vt.guideline;return!mt.hide})}).map(function(tt){return{type:"snap",pos:tt.pos}})),!1)),m.push.apply(m,Z([],R(U.filter(function(tt){var et=tt.guidelineInfos;return et.some(function(vt){var mt=vt.guideline;return!mt.hide})}).map(function(tt){return{type:"snap",pos:tt.pos}})),!1)),_.push.apply(_,Z([],R(wo(Q)),!1)),b.push.apply(b,Z([],R(wo(U)),!1))})}var F=Mo(r,[C,P],[E,w],g,m),H=F.boundMap,V=F.innerBoundMap;M&&Mo(r,[I.left,I.right],[I.top,I.bottom],g,m,u.externalBounds);var B=Z(Z([],R(_),!1),R(b),!1),G=B.filter(function(j){return j.element&&!j.gapRects}),A=B.filter(function(j){return j.gapRects}).sort(function(j,Q){return j.gap-Q.gap});rt(r,"onSnap",{guidelines:B.filter(function(j){var Q=j.element;return!Q}),elements:G,gaps:A},!0);var X=me(r,"boundMap",H,function(j){return JSON.stringify(j)},he()),q=me(r,"innerBoundMap",V,function(j){return JSON.stringify(j)},he());return(H===X||V===q)&&rt(r,"onBound",{bounds:H,innerBounds:V},!0),Z(Z(Z(Z(Z(Z([],R(Jv(r,G,[v,d],O,t)),!1),R(Qv(r,A,[v,d],O,t)),!1),R(Do(r,"horizontal",b,[a,n],O,t)),!1),R(Do(r,"vertical",_,[a,n],O,t)),!1),R(yo(r,"horizontal",m,v,n,D,0,t)),!1),R(yo(r,"vertical",g,d,a,x,1,t)),!1)},dragStart:function(r,t){r.state.snapRenderInfo={request:t.isRequest,snap:!0,center:!0},_n(r)},drag:function(r){var t=r.state;_n(r)||(t.guidelines=Va(r)),t.snapRenderInfo&&(t.snapRenderInfo.render=!0)},pinchStart:function(r){this.unset(r)},dragEnd:function(r){this.unset(r)},dragControlCondition:function(r,t){if(vd(r,t)||Ha(r,t))return!0;if(!t.isRequest&&t.inputEvent)return Ut(t.inputEvent.target,ot("snap-control"))},dragControlStart:function(r){r.state.snapRenderInfo=null,_n(r)},dragControl:function(r){this.drag(r)},dragControlEnd:function(r){this.unset(r)},dragGroupStart:function(r,t){this.dragStart(r,t)},dragGroup:function(r){this.drag(r)},dragGroupEnd:function(r){this.unset(r)},dragGroupControlStart:function(r){r.state.snapRenderInfo=null,_n(r)},dragGroupControl:function(r){this.drag(r)},dragGroupControlEnd:function(r){this.unset(r)},unset:function(r){var t=r.state;t.enableSnap=!1,t.guidelines=[],t.snapRenderInfo=null,t.elementRects=[]}};function pd(r,t){return[r[0]*t[0],r[1]*t[1]]}function ot(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return lf.apply(void 0,Z([ci],R(r),!1))}function zl(r){r()}function hd(r){return!r||r==="none"?[1,0,0,1,0,0]:Cr(r)?r:qe(r)}function Ve(r,t,e){return Pn(t,ie(e,t),r,ie(e.map(function(n){return-n}),t))}function gd(r,t,e){if(t==="%"){var n=Ei(r.ownerSVGElement);return n[e?"width":"height"]/100}return 1}function md(r){var t=_d(Di(r,":before"));return t.map(function(e,n){var a=Qe(e),i=a.value,o=a.unit;return i*gd(r,o,n===0)})}function Nn(r){return r?r.split(" "):["0","0"]}function _d(r){return Nn(r.transformOrigin)}function Al(r){var t=pr(r),e=t("transform");if(e&&e!=="none")return e;if("transform"in r){var n=r.transform,a=n.baseVal;if(!a)return"";var i=a.length;if(!i)return"";for(var o=[],s=function(u){var f=a[u].matrix;o.push("matrix(".concat(["a","b","c","d","e","f"].map(function(c){return f[c]}).join(", "),")"))},l=0;l<i;++l)s(l);return o.join(" ")}return""}function Ue(r,t,e,n,a){var i,o,s=ti(r)||Ur(r),l=!1,u,f;if(!r||e)u=r;else{var c=(i=r==null?void 0:r.assignedSlot)===null||i===void 0?void 0:i.parentElement,v=r.parentElement;c?(l=!0,f=v,u=c):u=v}for(var d=!1,p=r===t||u===t,h="relative",g=1,m=parseFloat(a==null?void 0:a("zoom"))||1,_=a==null?void 0:a("position");u&&u!==s;){t===u&&(p=!0);var b=pr(u),S=u.tagName.toLowerCase(),y=Al(u),D=b("willChange"),x=parseFloat(b("zoom"))||1;if(h=b("position"),n&&x!==1){g=x;break}if(!e&&n&&m!==1&&_&&_!=="absolute"||S==="svg"||S==="foreignobject"||h!=="static"||y&&y!=="none"||D==="transform")break;var E=(o=r==null?void 0:r.assignedSlot)===null||o===void 0?void 0:o.parentNode,C=u.parentNode;E&&(l=!0,f=C);var w=C;if(w&&w.nodeType===11){u=w.host,d=!0,h=pr(u)("position");break}u=w,h="relative"}return{offsetZoom:g,hasSlot:l,parentSlotElement:f,isCustomElement:d,isStatic:h==="static",isEnd:p||!u||u===s,offsetParent:u||s}}function bd(r,t){var e,n=r.tagName.toLowerCase(),a=r.offsetLeft,i=r.offsetTop,o=pr(r),s=Vn(a),l=!s,u,f;return!l&&(n!=="svg"||r.ownerSVGElement)?(u=Qs?md(r):Nn(o("transformOrigin")).map(function(c){return parseFloat(c)}),f=u.slice(),l=!0,n==="svg"?(a=0,i=0):(e=R(yd(r,u,r===t&&t.tagName.toLowerCase()==="g"),4),a=e[0],i=e[1],u[0]=e[2],u[1]=e[3])):(u=Nn(o("transformOrigin")).map(function(c){return parseFloat(c)}),f=u.slice()),{tagName:n,isSVG:s,hasOffset:l,offset:[a||0,i||0],origin:u,targetOrigin:f}}function kl(r,t){var e=pr(r),n=pr(Ur(r)),a=n("position");if(!t&&(!a||a==="static"))return[0,0];var i=parseInt(n("marginLeft"),10),o=parseInt(n("marginTop"),10);return e("position")==="absolute"&&((e("top")!=="auto"||e("bottom")!=="auto")&&(o=0),(e("left")!=="auto"||e("right")!=="auto")&&(i=0)),[i,o]}function Wa(r){r.forEach(function(t){var e=t.matrix;e&&(t.matrix=wr(e,3,4))})}function Sd(r){for(var t=r.parentElement,e=!1,n=Ur(r);t;){var a=Di(t).transform;if(a&&a!=="none"){e=!0;break}if(t===n)break;t=t.parentElement}return{fixedContainer:t||n,hasTransform:e}}function Qn(r,t){return t===void 0&&(t=r.length>9),"".concat(t?"matrix3d":"matrix","(").concat(Xs(r,!t).join(","),")")}function Ei(r){var t=r.clientWidth,e=r.clientHeight;if(!r)return{x:0,y:0,width:0,height:0,clientWidth:t,clientHeight:e};var n=r.viewBox,a=n&&n.baseVal||{x:0,y:0,width:0,height:0};return{x:a.x,y:a.y,width:a.width||t,height:a.height||e,clientWidth:t,clientHeight:e}}function Ed(r,t){var e,n=Ei(r),a=n.width,i=n.height,o=n.clientWidth,s=n.clientHeight,l=o/a,u=s/i,f=r.preserveAspectRatio.baseVal,c=f.align,v=f.meetOrSlice,d=[0,0],p=[l,u],h=[0,0];if(c!==1){var g=(c-2)%3,m=Math.floor((c-2)/3);d[0]=a*g/2,d[1]=i*m/2;var _=v===2?Math.max(u,l):Math.min(l,u);p[0]=_,p[1]=_,h[0]=(o-a)/2*g,h[1]=(s-i)/2*m}var b=si(p,t);return e=R(h,2),b[t*(t-1)]=e[0],b[t*(t-1)+1]=e[1],Ve(b,t,d)}function yd(r,t,e){var n=r.tagName.toLowerCase();if(!r.getBBox||!e&&n==="g")return[0,0,0,0];var a=pr(r),i=a("transform-box")==="fill-box",o=r.getBBox(),s=Ei(r.ownerSVGElement),l=o.x,u=o.y;n==="foreignobject"&&!l&&!u&&(l=parseFloat(r.getAttribute("x"))||0,u=parseFloat(r.getAttribute("y"))||0);var f=l-s.x,c=u-s.y,v=i?t[0]:t[0]-f,d=i?t[1]:t[1]-c;return[f,c,v,d]}function Gt(r,t,e){return ar(r,ae(t,e),e)}function ue(r,t,e,n){return[[0,0],[t,0],[0,e],[t,e]].map(function(a){return Gt(r,a,n)})}function _r(r){var t=r.map(function(u){return u[0]}),e=r.map(function(u){return u[1]}),n=Math.min.apply(Math,Z([],R(t),!1)),a=Math.min.apply(Math,Z([],R(e),!1)),i=Math.max.apply(Math,Z([],R(t),!1)),o=Math.max.apply(Math,Z([],R(e),!1)),s=i-n,l=o-a;return{left:n,top:a,right:i,bottom:o,width:s,height:l}}function To(r,t,e,n){var a=ue(r,t,e,n);return _r(a)}function Dd(r,t,e,n,a){var i,o=r.target,s=r.origin,l=t.matrix,u=Gl(o),f=u.offsetWidth,c=u.offsetHeight,v=e.getBoundingClientRect(),d=[0,0];e===Ur(e)&&(d=kl(o,!0));for(var p=o.getBoundingClientRect(),h=p.left-v.left+e.scrollLeft-(e.clientLeft||0)+d[0],g=p.top-v.top+e.scrollTop-(e.clientTop||0)+d[1],m=p.width,_=p.height,b=Pn(n,a,l),S=To(b,f,c,n),y=S.left,D=S.top,x=S.width,E=S.height,C=Gt(b,s,n),w=st(C,[y,D]),P=[h+w[0]*m/x,g+w[1]*_/E],O=[0,0],M=0;++M<10;){var I=Rr(a,n);i=R(st(Gt(I,P,n),Gt(I,C,n)),2),O[0]=i[0],O[1]=i[1];var z=Pn(n,a,ie(O,n),l),F=To(z,f,c,n),H=F.left,V=F.top,B=H-h,G=V-g;if($(B)<2&&$(G)<2)break;P[0]-=B,P[1]-=G}return O.map(function(A){return Math.round(A)})}function xd(r,t,e){var n=r.length===16,a=n?4:3,i=t.map(function(l){return Gt(r,l,a)}),o=e.left,s=e.top;return i.map(function(l){return[l[0]+o,l[1]+s]})}function br(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function Bl(r,t){return br([t[0]-r[0],t[1]-r[1]])}function Be(r,t,e,n){e===void 0&&(e=1),n===void 0&&(n=Wt(r,t));var a=Bl(r,t);return{transform:"translateY(-50%) translate(".concat(r[0],"px, ").concat(r[1],"px) rotate(").concat(n,"rad) scaleY(").concat(e,")"),width:"".concat(a,"px")}}function Fn(r,t){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];var a=e.length,i=e.reduce(function(s,l){return s+l[0]},0)/a,o=e.reduce(function(s,l){return s+l[1]},0)/a;return{transform:"translateZ(0px) translate(".concat(i,"px, ").concat(o,"px) rotate(").concat(r,"rad) scale(").concat(t,")")}}function se(r,t){var e=r[t];return Cr(e)?T(T({},r),e):r}function Gl(r){var t=r&&!Vn(r.offsetWidth),e=0,n=0,a=0,i=0,o=0,s=0,l=0,u=0,f=0,c=0,v=0,d=0,p=1/0,h=1/0,g=1/0,m=1/0,_=0,b=0,S=!1;if(r)if(!t&&r.ownerSVGElement){var y=r.getBBox();S=!0,e=y.width,n=y.height,o=e,s=n,l=e,u=n,a=e,i=n}else{var D=pr(r),x=r.style,E=D("boxSizing")==="border-box",C=parseFloat(D("borderLeftWidth"))||0,w=parseFloat(D("borderRightWidth"))||0,P=parseFloat(D("borderTopWidth"))||0,O=parseFloat(D("borderBottomWidth"))||0,M=parseFloat(D("paddingLeft"))||0,I=parseFloat(D("paddingRight"))||0,z=parseFloat(D("paddingTop"))||0,F=parseFloat(D("paddingBottom"))||0,H=M+I,V=z+F,B=C+w,G=P+O,A=H+B,X=V+G,q=D("position"),j=0,Q=0;if("clientLeft"in r){var U=null;if(q==="absolute"){var tt=Ue(r,Ur(r));U=tt.offsetParent}else U=r.parentElement;if(U){var et=pr(U);j=parseFloat(et("width")),Q=parseFloat(et("height"))}}f=Math.max(H,wt(D("minWidth"),j)||0),c=Math.max(V,wt(D("minHeight"),Q)||0),p=wt(D("maxWidth"),j),h=wt(D("maxHeight"),Q),isNaN(p)&&(p=1/0),isNaN(h)&&(h=1/0),_=wt(x.width,0)||0,b=wt(x.height,0)||0,o=parseFloat(D("width"))||0,s=parseFloat(D("height"))||0,l=$(o-_)<1?Ea(f,_||o,p):o,u=$(s-b)<1?Ea(c,b||s,h):s,e=l,n=u,a=l,i=u,E?(g=p,m=h,v=f,d=c,l=e-A,u=n-X):(g=p+A,m=h+X,v=f+A,d=c+X,e=l+A,n=u+X),a=l+H,i=u+V}return{svg:S,offsetWidth:e,offsetHeight:n,clientWidth:a,clientHeight:i,contentWidth:l,contentHeight:u,inlineCSSWidth:_,inlineCSSHeight:b,cssWidth:o,cssHeight:s,minWidth:f,minHeight:c,maxWidth:p,maxHeight:h,minOffsetWidth:v,minOffsetHeight:d,maxOffsetWidth:g,maxOffsetHeight:m}}function Nl(r,t){return Wt(t>0?r[0]:r[1],t>0?r[1]:r[0])}function bn(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function Fl(r,t){var e=r===Ur(r)||r===ti(r),n={clientLeft:r.clientLeft,clientTop:r.clientTop,clientWidth:r.clientWidth,clientHeight:r.clientHeight,scrollWidth:r.scrollWidth,scrollHeight:r.scrollHeight,overflow:!1};return e&&(n.clientHeight=Math.max(t.height,n.clientHeight),n.scrollHeight=Math.max(t.height,n.scrollHeight)),n.overflow=pr(r)("overflow")!=="visible",T(T({},t),n)}function ma(r,t,e,n){var a=r.left,i=r.right,o=r.top,s=r.bottom,l=t.top,u=t.left,f={left:u+a,top:l+o,right:u+i,bottom:l+s,width:i-a,height:s-o};return e&&n?Fl(e,f):f}function We(r,t){var e=0,n=0,a=0,i=0;if(r){var o=r.getBoundingClientRect();e=o.left,n=o.top,a=o.width,i=o.height}var s={left:e,top:n,width:a,height:i,right:e+a,bottom:n+i};return r&&t?Fl(r,s):s}function Cd(r){var t=r.props,e=t.groupable,n=t.svgOrigin,a=r.getState(),i=a.offsetWidth,o=a.offsetHeight,s=a.svg,l=a.transformOrigin;return!e&&s&&n?Mi(n,i,o):l}function Ll(r,t,e,n){var a;if(r)a=r;else if(t)a=[0,0];else{var i=e.target;a=Hl(i,n)}return a}function Hl(r,t){if(r){var e=r.getAttribute("data-rotation")||"",n=r.getAttribute("data-direction");if(t.deg=e,!!n){var a=[0,0];return n.indexOf("w")>-1&&(a[0]=-1),n.indexOf("e")>-1&&(a[0]=1),n.indexOf("n")>-1&&(a[1]=-1),n.indexOf("s")>-1&&(a[1]=1),a}}}function yi(r,t){return[xt(t,r[0]),xt(t,r[1]),xt(t,r[2]),xt(t,r[3])]}function Sr(r){var t=r.left,e=r.top,n=r.pos1,a=r.pos2,i=r.pos3,o=r.pos4;return yi([n,a,i,o],[t,e])}function Ya(r,t){r[t?"controlAbles":"targetAbles"].forEach(function(e){e.unset&&e.unset(r)})}function ge(r,t){var e=t?"controlGesto":"targetGesto",n=r[e];(n==null?void 0:n.isIdle())===!1&&Ya(r,t),n==null||n.unset(),r[e]=null}function ur(r,t){if(t){var e=Oe(t);e.nextStyle=T(T({},e.nextStyle),r)}return{style:r,cssText:Nr(r).map(function(n){return"".concat(xn(n,"-"),": ").concat(r[n],";")}).join("")}}function Vl(r,t,e){var n=t.afterTransform||t.transform;return T(T({},ur(T(T(T({},r.style),t.style),{transform:n}),e)),{afterTransform:n,transform:r.transform})}function gt(r,t,e,n){var a=t.datas;a.datas||(a.datas={});var i=T(T({},e),{target:r.state.target,clientX:t.clientX,clientY:t.clientY,inputEvent:t.inputEvent,currentTarget:r,moveable:r,datas:a.datas,isRequest:t.isRequest,isRequestChild:t.isRequestChild,isFirstDrag:!!t.isFirstDrag,isTrusted:t.isTrusted!==!1,stopAble:function(){a.isEventStart=!1},stopDrag:function(){var o;(o=t.stop)===null||o===void 0||o.call(t)}});return a.isStartEvent?n||(a.lastEvent=i):a.isStartEvent=!0,i}function gr(r,t,e){var n=t.datas,a="isDrag"in e?e.isDrag:t.isDrag;return n.datas||(n.datas={}),T(T({isDrag:a},e),{moveable:r,target:r.state.target,clientX:t.clientX,clientY:t.clientY,inputEvent:t.inputEvent,currentTarget:r,lastEvent:n.lastEvent,isDouble:t.isDouble,datas:n.datas,isFirstDrag:!!t.isFirstDrag})}function ta(r,t,e){r._emitter.on(t,e)}function rt(r,t,e,n,a){return r.triggerEvent(t,e,n,a)}function Di(r,t){return Wr(r).getComputedStyle(r,t)}function Sn(r,t,e){var n={},a={};return r.filter(function(i){var o=i.name;if(n[o]||!t.some(function(s){return i[s]}))return!1;if(!e&&i.ableGroup){if(a[i.ableGroup])return!1;a[i.ableGroup]=!0}return n[o]=!0,!0})}function Xa(r,t){return r===t||r==null&&t==null}function Oo(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var e=r.length-1,n=0;n<e;++n){var a=r[n];if(!Vn(a))return a}return r[e]}function Wl(r,t){var e=[],n=[];return r.forEach(function(a,i){var o=t(a,i,r),s=n.indexOf(o),l=e[s]||[];s===-1&&(n.push(o),e.push(l)),l.push(a)}),e}function wd(r,t){var e=[],n={};return r.forEach(function(a,i){var o=t(a,i,r),s=n[o];s||(s=[],n[o]=s,e.push(s)),s.push(a)}),e}function Yl(r){return r.reduce(function(t,e){return t.concat(e)},[])}function De(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return r.sort(function(e,n){return $(n)-$(e)}),r[0]}function xe(r,t,e){return ar(Rr(r,e),ae(t,e),e)}function Xl(r,t){var e,n=r.is3d,a=r.rootMatrix,i=n?4:3;return e=R(xe(a,[t.distX,t.distY],i),2),t.distX=e[0],t.distY=e[1],t}function mr(r,t,e,n){if(!e[0]&&!e[1])return t;var a=Gt(r,[Co(e[0]||1),0],n),i=Gt(r,[0,Co(e[1]||1)],n),o=Gt(r,[e[0]/br(a),e[1]/br(i)],n);return xt(t,o)}function Er(r,t,e){return e?"".concat(r/t*100,"%"):"".concat(r,"px")}function Ln(r){return $(r)<=fr?0:r}function xi(r){return function(t){if(!t.isDragging(r))return"";var e=gv(t,r),n=e.deg;return n?ot("view-control-rotation".concat(n)):""}}function Ci(r,t){return t===void 0&&(t=[r]),function(e,n){if(n.isRequest)return t.some(function(i){return n.requestAble===i})?n.parentDirection:!1;var a=n.inputEvent.target;return Ut(a,ot("direction"))&&(!r||Ut(a,ot(r)))}}function Md(r,t,e){var n,a=Se(r,{"x%":function(y){return y/100*t.offsetWidth},"y%":function(y){return y/100*t.offsetHeight}}),i=r.slice(0,e<0?void 0:e),o=r.slice(0,e<0?void 0:e+1),s=r[e]||"",l=e<0?[]:r.slice(e),u=e<0?[]:r.slice(e+1),f=a.slice(0,e<0?void 0:e),c=a.slice(0,e<0?void 0:e+1),v=(n=a[e])!==null&&n!==void 0?n:Se([""])[0],d=e<0?[]:a.slice(e),p=e<0?[]:a.slice(e+1),h=v?[v]:[],g=ve(f),m=ve(c),_=ve(d),b=ve(p),S=Mt(g,_,4);return{transforms:r,beforeFunctionMatrix:g,beforeFunctionMatrix2:m,targetFunctionMatrix:ve(h),afterFunctionMatrix:_,afterFunctionMatrix2:b,allFunctionMatrix:S,beforeFunctions:f,beforeFunctions2:c,targetFunction:h[0],afterFunctions:d,afterFunctions2:p,beforeFunctionTexts:i,beforeFunctionTexts2:o,targetFunctionText:s,afterFunctionTexts:l,afterFunctionTexts2:u}}function Td(r){return!r||!Cr(r)||Me(r)?!1:$t(r)||"length"in r}function Tr(r,t){return r?Me(r)?r:vr(r)?t?document.querySelector(r):r:Ka(r)?r():xs(r)?r:"current"in r?r.current:r:null}function wi(r,t){if(!r)return[];var e=Td(r)?[].slice.call(r):[r];return e.reduce(function(n,a){return vr(a)&&t?Z(Z([],R(n),!1),R([].slice.call(document.querySelectorAll(a))),!1):($t(a)?n.push(wi(a,t)):n.push(Tr(a,t)),n)},[])}function Od(r,t,e){var n=Wt(r,t)/Math.PI*180;return n=e>=0?n:180-n,n=n>=0?n:360+n,n}function Ro(r,t){var e=r.rootMatrix,n=r.is3d,a=n?4:3,i=Rr(e,a);return n||(i=wr(i,3,4)),i[12]=0,i[13]=0,i[14]=0,cc(i,t)}function $l(r,t,e,n,a){var i=R(r,2),o=i[0],s=i[1],l=0,u=0;if(a&&o&&s){var f=Wt([0,0],t),c=Wt([0,0],n),v=br(t),d=Math.cos(f-c)*v;if(!n[0])u=d,l=u*e;else if(!n[1])l=d,u=l/e;else{var p=n[0]*o,h=n[1]*s,g=Math.atan2(p+t[0],h+t[1]),m=Math.atan2(p,h);g<0&&(g+=Math.PI*2),m<0&&(m+=Math.PI*2);var _=0;$(g-m)<Math.PI/2||$(g-m)>Math.PI/2*3||(m+=Math.PI),_=g-m,_>Math.PI*2?_-=Math.PI*2:_>Math.PI?_=2*Math.PI-_:_<-Math.PI&&(_=-2*Math.PI-_);var b=br([p+t[0],h+t[1]])*Math.cos(_);l=b*Math.sin(m)-p,u=b*Math.cos(m)-h,n[0]<0&&(l*=-1),n[1]<0&&(u*=-1)}}else l=n[0]*t[0],u=n[1]*t[1];return[l,u]}function ql(r,t,e,n){var a,i=e.ratio,o=e.startOffsetWidth,s=e.startOffsetHeight,l=0,u=0,f=n.distX,c=n.distY,v=n.pinchScale,d=n.parentDistance,p=n.parentDist,h=n.parentScale,g=e.fixedDirection,m=[0,1].map(function(x){return $(r[x]-g[x])}),_=[0,1].map(function(x){var E=m[x];return E!==0&&(E=2/E),E});if(p)l=p[0],u=p[1],t&&(l?u||(u=l/i):l=u*i);else if(be(v))l=(v-1)*o,u=(v-1)*s;else if(h)l=(h[0]-1)*o,u=(h[1]-1)*s;else if(d){var b=o*m[0],S=s*m[1],y=br([b,S]);l=d/y*b*_[0],u=d/y*S*_[1]}else{var D=Ir({datas:e,distX:f,distY:c});D=_.map(function(x,E){return D[E]*x}),a=R($l([o,s],D,i,r,t),2),l=a[0],u=a[1]}return{distWidth:l,distHeight:u}}function $a(r,t){if(t){if(r==="left")return{x:"0%",y:"50%"};if(r==="top")return{x:"50%",y:"50%"};if(r==="center")return{x:"50%",y:"50%"};if(r==="right")return{x:"100%",y:"50%"};if(r==="bottom")return{x:"50%",y:"100%"};var e=R(r.split(" "),2),n=e[0],a=e[1],i=$a(n||""),o=$a(a||""),s=T(T({},i),o),l={x:"50%",y:"50%"};return s.x&&(l.x=s.x),s.y&&(l.y=s.y),s.value&&(s.x&&!s.y&&(l.y=s.value),!s.x&&s.y&&(l.x=s.value)),l}return r==="left"?{x:"0%"}:r==="right"?{x:"100%"}:r==="top"?{y:"0%"}:r==="bottom"?{y:"100%"}:r?r==="center"?{value:"50%"}:{value:r}:{}}function Mi(r,t,e){var n=$a(r,!0),a=n.x,i=n.y;return[wt(a,t)||0,wt(i,e)||0]}function Rd(r,t,e){var n=r.map(function(i){return st(i,t)}),a=n.map(function(i){return nn(i,e)});return{prev:n,next:a,result:a.map(function(i){return xt(i,t)})}}function jl(r,t){return r.length===t.length&&r.every(function(e,n){var a=t[n],i=$t(e),o=$t(a);return i&&o?jl(e,a):!i&&!o?e===a:!1})}function me(r,t,e,n,a){var i=r._store,o=i[t];if(!(t in i))if(a!=null)i[t]=a,o=a;else return i[t]=e,e;return o===e||n(o)===n(e)?o:(i[t]=e,e)}function lr(r){return r>=0?1:-1}function $(r){return Math.abs(r)}function _a(r,t){return xf(r).map(function(e){return t(e)})}function Ul(r){return be(r)?{top:r,left:r,right:r,bottom:r}:{left:r.left||0,top:r.top||0,right:r.right||0,bottom:r.bottom||0}}var Id=sn("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(r,t){var e=t.datas,n=t.targets,a=t.angle,i=t.originalDatas,o=r.props,s=o.pinchable,l=o.ables;if(!s)return!1;var u="onPinch".concat(n?"Group":"","Start"),f="drag".concat(n?"Group":"","ControlStart"),c=(s===!0?r.controlAbles:l.filter(function(h){return s.indexOf(h.name)>-1})).filter(function(h){return h.canPinch&&h[f]}),v=gt(r,t,{});n&&(v.targets=n);var d=rt(r,u,v);e.isPinch=d!==!1,e.ables=c;var p=e.isPinch;return p?(c.forEach(function(h){if(i[h.name]=i[h.name]||{},!!h[f]){var g=T(T({},t),{datas:i[h.name],parentRotate:a,isPinch:!0});h[f](r,g)}}),r.state.snapRenderInfo={request:t.isRequest,direction:[0,0]},p):!1},pinch:function(r,t){var e=t.datas,n=t.scale,a=t.distance,i=t.originalDatas,o=t.inputEvent,s=t.targets,l=t.angle;if(e.isPinch){var u=a*(1-1/n),f=gt(r,t,{});s&&(f.targets=s);var c="onPinch".concat(s?"Group":"");rt(r,c,f);var v=e.ables,d="drag".concat(s?"Group":"","Control");return v.forEach(function(p){p[d]&&p[d](r,T(T({},t),{datas:i[p.name],inputEvent:o,resolveMatrix:!0,pinchScale:n,parentDistance:u,parentRotate:l,isPinch:!0}))}),f}},pinchEnd:function(r,t){var e=t.datas,n=t.isPinch,a=t.inputEvent,i=t.targets,o=t.originalDatas;if(e.isPinch){var s="onPinch".concat(i?"Group":"","End"),l=gr(r,t,{isDrag:n});i&&(l.targets=i),rt(r,s,l);var u=e.ables,f="drag".concat(i?"Group":"","ControlEnd");return u.forEach(function(c){c[f]&&c[f](r,T(T({},t),{isDrag:n,datas:o[c.name],inputEvent:a,isPinch:!0}))}),n}},pinchGroupStart:function(r,t){return this.pinchStart(r,T(T({},t),{targets:r.props.targets}))},pinchGroup:function(r,t){return this.pinch(r,T(T({},t),{targets:r.props.targets}))},pinchGroupEnd:function(r,t){return this.pinchEnd(r,T(T({},t),{targets:r.props.targets}))}}),Io=Ci("scalable"),Pd={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:pl("scalable"),dragControlCondition:Io,viewClassName:xi("scalable"),dragControlStart:function(r,t){var e=t.datas,n=t.isPinch,a=t.inputEvent,i=t.parentDirection,o=Ll(i,n,a,e),s=r.state,l=s.width,u=s.height,f=s.targetTransform,c=s.target,v=s.pos1,d=s.pos2,p=s.pos4;if(!o||!c)return!1;n||le(r,t),e.datas={},e.transform=f,e.prevDist=[1,1],e.direction=o,e.startOffsetWidth=l,e.startOffsetHeight=u,e.startValue=[1,1];var h=!o[0]&&!o[1]||o[0]||!o[1];Un(r,t,"scale"),e.isWidth=h;function g(D){e.ratio=D&&isFinite(D)?D:0}e.startPositions=Sr(r.state);function m(D){var x=wl(e.startPositions,D);e.fixedDirection=x.fixedDirection,e.fixedPosition=x.fixedPosition,e.fixedOffset=x.fixedOffset}e.setFixedDirection=m,g(zr(v,d)/zr(d,p)),m([-o[0],-o[1]]);var _=function(D){e.minScaleSize=D},b=function(D){e.maxScaleSize=D};_([-1/0,-1/0]),b([1/0,1/0]);var S=gt(r,t,T(T({direction:o,set:function(D){e.startValue=D},setRatio:g,setFixedDirection:m,setMinScaleSize:_,setMaxScaleSize:b},jn(r,t)),{dragStart:sr.dragStart(r,new Ee().dragStart([0,0],t))})),y=rt(r,"onScaleStart",S);return e.startFixedDirection=e.fixedDirection,y!==!1&&(e.isScale=!0,r.state.snapRenderInfo={request:t.isRequest,direction:o}),e.isScale?S:!1},dragControl:function(r,t){$n(r,t,"scale");var e=t.datas,n=t.parentKeepRatio,a=t.parentFlag,i=t.isPinch,o=t.dragClient,s=t.isRequest,l=t.useSnap,u=t.resolveMatrix,f=e.prevDist,c=e.direction,v=e.startOffsetWidth,d=e.startOffsetHeight,p=e.isScale,h=e.startValue,g=e.isWidth,m=e.ratio;if(!p)return!1;var _=r.props,b=_.throttleScale,S=_.parentMoveable,y=c;!c[0]&&!c[1]&&(y=[1,1]);var D=m&&(n??_.keepRatio)||!1,x=r.state,E=[h[0],h[1]];function C(){var J=ql(y,D,e,t),nt=J.distWidth,Dt=J.distHeight,ut=v?(v+nt)/v:1,ft=d?(d+Dt)/d:1;h[0]||(E[0]=nt/v),h[1]||(E[1]=Dt/d);var lt=(y[0]||D?ut:1)*E[0],_t=(y[1]||D?ft:1)*E[1];return lt===0&&(lt=lr(f[0])*hn),_t===0&&(_t=lr(f[1])*hn),[lt,_t]}var w=C();if(!i&&r.props.groupable){var P=x.snapRenderInfo||{},O=P.direction;$t(O)&&(O[0]||O[1])&&(x.snapRenderInfo={direction:c,request:t.isRequest})}rt(r,"onBeforeScale",gt(r,t,{scale:w,setFixedDirection:function(J){return e.setFixedDirection(J),w=C(),w},startFixedDirection:e.startFixedDirection,setScale:function(J){w=J}},!0));var M=[w[0]/E[0],w[1]/E[1]],I=o,z=[0,0],F=lr(M[0]*M[1]),H=!o&&!a&&i;if(H||u?I=pi(r,e.targetAllTransform,[0,0],[0,0],e):o||(I=e.fixedPosition),i||(z=fd(r,M,c,!l&&s,e)),D){y[0]&&y[1]&&z[0]&&z[1]&&(Math.abs(z[0]*v)>Math.abs(z[1]*d)?z[1]=0:z[0]=0);var V=!z[0]&&!z[1];if(V&&(g?M[0]=pt(M[0]*E[0],b)/E[0]:M[1]=pt(M[1]*E[1],b)/E[1]),y[0]&&!y[1]||z[0]&&!z[1]||V&&g){M[0]+=z[0];var B=v*M[0]*E[0]/m;M[1]=lr(F*M[0])*$(B/d/E[1])}else if(!y[0]&&y[1]||!z[0]&&z[1]||V&&!g){M[1]+=z[1];var G=d*M[1]*E[1]*m;M[0]=lr(F*M[1])*$(G/v/E[0])}}else M[0]+=z[0],M[1]+=z[1],z[0]||(M[0]=pt(M[0]*E[0],b)/E[0]),z[1]||(M[1]=pt(M[1]*E[1],b)/E[1]);M[0]===0&&(M[0]=lr(f[0])*hn),M[1]===0&&(M[1]=lr(f[1])*hn),w=pd(M,[E[0],E[1]]);var A=[v,d],X=[v*w[0],d*w[1]];X=bs(X,e.minScaleSize,e.maxScaleSize,D?m:!1),w=_a(2,function(J){return A[J]?X[J]/A[J]:X[J]}),M=_a(2,function(J){return w[J]/E[J]});var q=_a(2,function(J){return f[J]?M[J]/f[J]:M[J]}),j="scale(".concat(M.join(", "),")"),Q="scale(".concat(w.join(", "),")"),U=qn(e,Q,j),tt=!h[0]||!h[1],et=fv(r,tt?Q:j,e.fixedDirection,I,e.fixedOffset,e,tt),vt=H?et:st(et,e.prevInverseDist||[0,0]);if(e.prevDist=M,e.prevInverseDist=et,w[0]===f[0]&&w[1]===f[1]&&vt.every(function(J){return!J})&&!S&&!H)return!1;var mt=gt(r,t,T({offsetWidth:v,offsetHeight:d,direction:c,scale:w,dist:M,delta:q,isPinch:!!i},ll(r,U,vt,i,t)));return rt(r,"onScale",mt),mt},dragControlEnd:function(r,t){var e=t.datas;if(!e.isScale)return!1;e.isScale=!1;var n=gr(r,t,{});return rt(r,"onScaleEnd",n),n},dragGroupControlCondition:Io,dragGroupControlStart:function(r,t){var e=t.datas,n=this.dragControlStart(r,t);if(!n)return!1;var a=xr(r,"resizable",t);e.moveableScale=r.scale;var i=Ar(r,this,"dragControlStart",t,function(u,f){return kn(r,u,e,f)}),o=function(u){n.setFixedDirection(u),i.forEach(function(f,c){f.setFixedDirection(u),kn(r,f.moveable,e,a[c])})};e.setFixedDirection=o;var s=T(T({},n),{targets:r.props.targets,events:i,setFixedDirection:o}),l=rt(r,"onScaleGroupStart",s);return e.isScale=l!==!1,e.isScale?s:!1},dragGroupControl:function(r,t){var e=t.datas;if(e.isScale){ta(r,"onBeforeScale",function(f){rt(r,"onBeforeScaleGroup",gt(r,t,T(T({},f),{targets:r.props.targets}),!0))});var n=this.dragControl(r,t);if(n){var a=n.dist,i=e.moveableScale;r.scale=[a[0]*i[0],a[1]*i[1]];var o=r.props.keepRatio,s=e.fixedPosition,l=Ar(r,this,"dragControl",t,function(f,c){var v=R(ar(an(r.rotation/180*Math.PI,3),[c.datas.originalX*a[0],c.datas.originalY*a[1],1],3),2),d=v[0],p=v[1];return T(T({},c),{parentDist:null,parentScale:a,parentKeepRatio:o,dragClient:xt(s,[d,p])})}),u=T({targets:r.props.targets,events:l},n);return rt(r,"onScaleGroup",u),u}}},dragGroupControlEnd:function(r,t){var e=t.isDrag,n=t.datas;if(n.isScale){this.dragControlEnd(r,t);var a=Ar(r,this,"dragControlEnd",t),i=gr(r,t,{targets:r.props.targets,events:a});return rt(r,"onScaleGroupEnd",i),e}},request:function(){var r={},t=0,e=0,n=!1;return{isControl:!0,requestStart:function(a){return n=a.useSnap,{datas:r,parentDirection:a.direction||[1,1],useSnap:n}},request:function(a){return t+=a.deltaWidth,e+=a.deltaHeight,{datas:r,parentDist:[t,e],parentKeepRatio:a.keepRatio,useSnap:n}},requestEnd:function(){return{datas:r,isDrag:!0,useSnap:n}}}}};function Lr(r,t){return r.map(function(e,n){return Rn(e,t[n],1,2)})}function Po(r,t,e){var n=Wt(r,t),a=Wt(r,e),i=a-n;return i>=0?i:i+2*Math.PI}function zd(r,t){var e=Po(r[0],r[1],r[2]),n=Po(t[0],t[1],t[2]),a=Math.PI;return!(e>=a&&n<=a||e<=a&&n>=a)}var Ad={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:xi("warpable"),render:function(r,t){var e=r.props,n=e.resizable,a=e.scalable,i=e.warpable,o=e.zoom;if(n||a||!i)return[];var s=r.state,l=s.pos1,u=s.pos2,f=s.pos3,c=s.pos4,v=Lr(l,u),d=Lr(u,l),p=Lr(l,f),h=Lr(f,l),g=Lr(f,c),m=Lr(c,f),_=Lr(u,c),b=Lr(c,u);return Z([t.createElement("div",{className:ot("line"),key:"middeLine1",style:Be(v,g,o)}),t.createElement("div",{className:ot("line"),key:"middeLine2",style:Be(d,m,o)}),t.createElement("div",{className:ot("line"),key:"middeLine3",style:Be(p,_,o)}),t.createElement("div",{className:ot("line"),key:"middeLine4",style:Be(h,b,o)})],R(hl(r,"warpable",t)),!1)},dragControlCondition:function(r,t){if(t.isRequest)return!1;var e=t.inputEvent.target;return Ut(e,ot("direction"))&&Ut(e,ot("warpable"))},dragControlStart:function(r,t){var e=t.datas,n=t.inputEvent,a=r.props.target,i=n.target,o=Hl(i,e);if(!o||!a)return!1;var s=r.state,l=s.transformOrigin,u=s.is3d,f=s.targetTransform,c=s.targetMatrix,v=s.width,d=s.height,p=s.left,h=s.top;e.datas={},e.targetTransform=f,e.warpTargetMatrix=u?c:wr(c,3,4),e.targetInverseMatrix=Ws(Rr(e.warpTargetMatrix,4),3,4),e.direction=o,e.left=p,e.top=h,e.poses=[[0,0],[v,0],[0,d],[v,d]].map(function(_){return st(_,l)}),e.nextPoses=e.poses.map(function(_){var b=R(_,2),S=b[0],y=b[1];return ar(e.warpTargetMatrix,[S,y,0,1],4)}),e.startValue=Pt(4),e.prevMatrix=Pt(4),e.absolutePoses=Sr(s),e.posIndexes=sl(o),le(r,t),Un(r,t,"matrix3d"),s.snapRenderInfo={request:t.isRequest,direction:o};var g=gt(r,t,T({set:function(_){e.startValue=_}},jn(r,t))),m=rt(r,"onWarpStart",g);return m!==!1&&(e.isWarp=!0),e.isWarp},dragControl:function(r,t){var e=t.datas,n=t.isRequest,a=t.distX,i=t.distY,o=e.targetInverseMatrix,s=e.prevMatrix,l=e.isWarp,u=e.startValue,f=e.poses,c=e.posIndexes,v=e.absolutePoses;if(!l)return!1;if($n(r,t,"matrix3d"),Re(r,"warpable")){var d=c.map(function(C){return v[C]});d.length>1&&d.push([(d[0][0]+d[1][0])/2,(d[0][1]+d[1][1])/2]);var p=Jn(r,n,{horizontal:d.map(function(C){return C[1]+i}),vertical:d.map(function(C){return C[0]+a})}),h=p.horizontal,g=p.vertical;i-=h.offset,a-=g.offset}var m=Ir({datas:e,distX:a,distY:i},!0),_=e.nextPoses.slice();if(c.forEach(function(C){_[C]=xt(_[C],m)}),!tv.every(function(C){return zd(C.map(function(w){return f[w]}),C.map(function(w){return _[w]}))}))return!1;var b=li(f[0],f[2],f[1],f[3],_[0],_[2],_[1],_[3]);if(!b.length)return!1;var S=Mt(o,b,4),y=il(e,S,!0),D=Mt(Rr(s,4),y,4);e.prevMatrix=y;var x=Mt(u,y,4),E=qn(e,"matrix3d(".concat(x.join(", "),")"),"matrix3d(".concat(y.join(", "),")"));return di(t,E),rt(r,"onWarp",gt(r,t,T({delta:D,matrix:x,dist:y,multiply:Mt,transform:E},ur({transform:E},t)))),!0},dragControlEnd:function(r,t){var e=t.datas,n=t.isDrag;return e.isWarp?(e.isWarp=!1,rt(r,"onWarpEnd",gr(r,t,{})),n):!1}},kd=ot("area-pieces"),En=ot("area-piece"),Zl=ot("avoid"),Bd=ot("view-dragging");function ba(r){var t=r.areaElement;if(t){var e=r.state,n=e.width,a=e.height;Ds(t,Zl),t.style.cssText+="left: 0px; top: 0px; width: ".concat(n,"px; height: ").concat(a,"px")}}function zo(r){return r.createElement("div",{key:"area_pieces",className:kd},r.createElement("div",{className:En}),r.createElement("div",{className:En}),r.createElement("div",{className:En}),r.createElement("div",{className:En}))}var Kl={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(r,t){var e=r.props,n=e.target,a=e.dragArea,i=e.groupable,o=e.passDragArea,s=r.getState(),l=s.width,u=s.height,f=s.renderPoses,c=o?ot("area","pass"):ot("area");if(i)return[t.createElement("div",{key:"area",ref:Pr(r,"areaElement"),className:c}),zo(t)];if(!n||!a)return[];var v=li([0,0],[l,0],[0,u],[l,u],f[0],f[1],f[2],f[3]),d=v.length?Qn(v,!0):"none";return[t.createElement("div",{key:"area",ref:Pr(r,"areaElement"),className:c,style:{top:"0px",left:"0px",width:"".concat(l,"px"),height:"".concat(u,"px"),transformOrigin:"0 0",transform:d}}),zo(t)]},dragStart:function(r,t){var e=t.datas,n=t.clientX,a=t.clientY,i=t.inputEvent;if(!i)return!1;e.isDragArea=!1;var o=r.areaElement,s=r.state,l=s.moveableClientRect,u=s.renderPoses,f=s.rootMatrix,c=s.is3d,v=l.left,d=l.top,p=_r(u),h=p.left,g=p.top,m=p.width,_=p.height,b=c?4:3,S=R(xe(f,[n-v,a-d],b),2),y=S[0],D=S[1];y-=h,D-=g;var x=[{left:h,top:g,width:m,height:D-10},{left:h,top:g,width:y-10,height:_},{left:h,top:g+D+10,width:m,height:_-D-10},{left:h+y+10,top:g,width:m-y-10,height:_}],E=[].slice.call(o.nextElementSibling.children);x.forEach(function(C,w){E[w].style.cssText="left: ".concat(C.left,"px;top: ").concat(C.top,"px; width: ").concat(C.width,"px; height: ").concat(C.height,"px;")}),ys(o,Zl),s.disableNativeEvent=!0},drag:function(r,t){var e=t.datas,n=t.inputEvent;if(this.enableNativeEvent(r),!n)return!1;e.isDragArea||(e.isDragArea=!0,ba(r))},dragEnd:function(r,t){this.enableNativeEvent(r);var e=t.inputEvent,n=t.datas;if(!e)return!1;n.isDragArea||ba(r)},dragGroupStart:function(r,t){return this.dragStart(r,t)},dragGroup:function(r,t){return this.drag(r,t)},dragGroupEnd:function(r,t){return this.dragEnd(r,t)},unset:function(r){ba(r),r.state.disableNativeEvent=!1},enableNativeEvent:function(r){var t=r.state;t.disableNativeEvent&&_s(function(){t.disableNativeEvent=!1})}},Gd=sn("origin",{props:["origin","svgOrigin"],render:function(r,t){var e=r.props,n=e.zoom,a=e.svgOrigin,i=e.groupable,o=r.getState(),s=o.beforeOrigin,l=o.rotation,u=o.svg,f=o.allMatrix,c=o.is3d,v=o.left,d=o.top,p=o.offsetWidth,h=o.offsetHeight,g;if(!i&&u&&a){var m=R(Mi(a,p,h),2),_=m[0],b=m[1],S=c?4:3,y=Gt(f,[_,b],S);g=Fn(l,n,st(y,[v,d]))}else g=Fn(l,n,s);return[t.createElement("div",{className:ot("control","origin"),style:g,key:"beforeOrigin"})]}});function Nd(r){var t=r.scrollContainer;return[t.scrollLeft,t.scrollTop]}var Fd={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(r,t){var e=r.props,n=e.scrollContainer,a=n===void 0?r.getContainer():n,i=e.scrollOptions,o=new bc,s=Tr(a,!0);t.datas.dragScroll=o,r.state.dragScroll=o;var l=t.isControl?"controlGesto":"targetGesto",u=t.targets;o.on("scroll",function(f){var c=f.container,v=f.direction,d=gt(r,t,{scrollContainer:c,direction:v}),p=u?"onScrollGroup":"onScroll";u&&(d.targets=u),rt(r,p,d)}).on("move",function(f){var c=f.offsetX,v=f.offsetY,d=f.inputEvent;r[l].scrollBy(c,v,d.inputEvent,!1)}).on("scrollDrag",function(f){var c=f.next;c(r[l].getCurrentEvent())}),o.dragStart(t,T({container:s},i))},checkScroll:function(r,t){var e=t.datas.dragScroll;if(e){var n=r.props,a=n.scrollContainer,i=a===void 0?r.getContainer():a,o=n.scrollThreshold,s=o===void 0?0:o,l=n.scrollThrottleTime,u=l===void 0?0:l,f=n.getScrollPosition,c=f===void 0?Nd:f,v=n.scrollOptions;return e.drag(t,T({container:i,threshold:s,throttleTime:u,getScrollPosition:function(d){return c({scrollContainer:d.container,direction:d.direction})}},v)),!0}},drag:function(r,t){return this.checkScroll(r,t)},dragEnd:function(r,t){t.datas.dragScroll.dragEnd(),t.datas.dragScroll=null},dragControlStart:function(r,t){return this.dragStart(r,T(T({},t),{isControl:!0}))},dragControl:function(r,t){return this.drag(r,t)},dragControlEnd:function(r,t){return this.dragEnd(r,t)},dragGroupStart:function(r,t){return this.dragStart(r,T(T({},t),{targets:r.props.targets}))},dragGroup:function(r,t){return this.drag(r,T(T({},t),{targets:r.props.targets}))},dragGroupEnd:function(r,t){return this.dragEnd(r,T(T({},t),{targets:r.props.targets}))},dragGroupControlStart:function(r,t){return this.dragStart(r,T(T({},t),{targets:r.props.targets,isControl:!0}))},dragGroupControl:function(r,t){return this.drag(r,T(T({},t),{targets:r.props.targets}))},dragGroupControEnd:function(r,t){return this.dragEnd(r,T(T({},t),{targets:r.props.targets}))},unset:function(r){var t,e=r.state;(t=e.dragScroll)===null||t===void 0||t.dragEnd(),e.dragScroll=null}},Jl={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},Ld=sn("padding",{props:["padding"],render:function(r,t){var e=r.props;if(e.dragArea)return[];var n=Ul(e.padding||{}),a=n.left,i=n.top,o=n.right,s=n.bottom,l=r.getState(),u=l.renderPoses,f=l.pos1,c=l.pos2,v=l.pos3,d=l.pos4,p=[f,c,v,d],h=[];return a>0&&h.push([0,2]),i>0&&h.push([0,1]),o>0&&h.push([1,3]),s>0&&h.push([2,3]),h.map(function(g,m){var _=R(g,2),b=_[0],S=_[1],y=p[b],D=p[S],x=u[b],E=u[S],C=li([0,0],[100,0],[0,100],[100,100],y,D,x,E);if(C.length)return t.createElement("div",{key:"padding".concat(m),className:ot("padding"),style:{transform:Qn(C,!0)}})})}}),Ao=["nw","ne","se","sw"];function yn(r,t){var e=r[0]+r[1],n=e>t?t/e:1;return r[0]*=n,r[1]=t-r[1]*n,r}var Hd=[1,2,5,6],Vd=[0,3,4,7],Qr=[1,-1,-1,1],te=[1,1,-1,-1];function Ti(r,t,e,n,a,i,o,s){a===void 0&&(a=0),i===void 0&&(i=0),o===void 0&&(o=e),s===void 0&&(s=n);var l=[],u=!1,f=r.filter(function(v){return!v.virtual}),c=f.map(function(v){var d=v.horizontal,p=v.vertical,h=v.pos;if(p&&!u&&(u=!0,l.push("/")),u){var g=Math.max(0,p===1?h[1]-i:s-h[1]);return l.push(Er(g,n,t)),g}else{var g=Math.max(0,d===1?h[0]-a:o-h[0]);return l.push(Er(g,e,t)),g}});return{radiusPoses:f,styles:l,raws:c}}function Ql(r){for(var t=[0,0],e=[0,0],n=r.length,a=0;a<n;++a){var i=r[a];i.sub&&(i.horizontal&&(t[1]===0&&(t[0]=a),t[1]=a-t[0]+1,e[0]=a+1),i.vertical&&(e[1]===0&&(e[0]=a),e[1]=a-e[0]+1))}return{horizontalRange:t,verticalRange:e}}function tu(r,t,e,n,a,i,o){var s,l,u,f;i===void 0&&(i=[0,0]),o===void 0&&(o=!1);var c=r.indexOf("/"),v=(c>-1?r.slice(0,c):r).length,d=r.slice(0,v),p=r.slice(v+1),h=d.length,g=p.length,m=g>0,_=R(d,4),b=_[0],S=b===void 0?"0px":b,y=_[1],D=y===void 0?S:y,x=_[2],E=x===void 0?S:x,C=_[3],w=C===void 0?D:C,P=R(p,4),O=P[0],M=O===void 0?S:O,I=P[1],z=I===void 0?m?M:D:I,F=P[2],H=F===void 0?m?M:E:F,V=P[3],B=V===void 0?m?z:w:V,G=[S,D,E,w].map(function(U){return wt(U,t)}),A=[M,z,H,B].map(function(U){return wt(U,e)}),X=G.slice(),q=A.slice();s=R(yn([X[0],X[1]],t),2),X[0]=s[0],X[1]=s[1],l=R(yn([X[3],X[2]],t),2),X[3]=l[0],X[2]=l[1],u=R(yn([q[0],q[3]],e),2),q[0]=u[0],q[3]=u[1],f=R(yn([q[1],q[2]],e),2),q[1]=f[0],q[2]=f[1];var j=o?X:X.slice(0,Math.max(i[0],h)),Q=o?q:q.slice(0,Math.max(i[1],g));return Z(Z([],R(j.map(function(U,tt){var et=Ao[tt];return{virtual:tt>=h,horizontal:Qr[tt],vertical:0,pos:[n+U,a+(te[tt]===-1?e:0)],sub:!0,raw:G[tt],direction:et}})),!1),R(Q.map(function(U,tt){var et=Ao[tt];return{virtual:tt>=g,horizontal:0,vertical:te[tt],pos:[n+(Qr[tt]===-1?t:0),a+U],sub:!0,raw:A[tt],direction:et}})),!1)}function Wd(r,t,e,n,a){a===void 0&&(a=t.length);var i=Ql(r.slice(n)),o=i.horizontalRange,s=i.verticalRange,l=e-n,u=0;if(l===0)u=a;else if(l>0&&l<o[1])u=o[1]-l;else if(l>=s[0])u=s[0]+s[1]-l;else return;r.splice(e,u),t.splice(e,u)}function Yd(r,t,e,n,a,i,o,s,l,u,f){u===void 0&&(u=0),f===void 0&&(f=0);var c=Ql(r.slice(e)),v=c.horizontalRange,d=c.verticalRange;if(n>-1)for(var p=Qr[n]===1?i-u:s-i,h=v[1];h<=n;++h){var g=te[h]===1?f:l,m=0;if(n===h?m=i:h===0?m=u+p:Qr[h]===-1&&(m=s-(t[e][0]-u)),r.splice(e+h,0,{horizontal:Qr[h],vertical:0,pos:[m,g]}),t.splice(e+h,0,[m,g]),h===0)break}else if(a>-1){var _=te[a]===1?o-f:l-o;if(v[1]===0&&d[1]===0){var b=[u+_,f];r.push({horizontal:Qr[0],vertical:0,pos:b}),t.push(b)}for(var S=d[0],h=d[1];h<=a;++h){var m=Qr[h]===1?u:s,g=0;if(a===h?g=o:h===0?g=f+_:te[h]===1?g=t[e+S][1]:te[h]===-1&&(g=l-(t[e+S][1]-f)),r.push({horizontal:0,vertical:te[h],pos:[m,g]}),t.push([m,g]),h===0)break}}}function Xd(r,t){t===void 0&&(t=r.map(function(a){return a.raw}));var e=r.map(function(a,i){return a.horizontal?t[i]:null}).filter(function(a){return a!=null}),n=r.map(function(a,i){return a.vertical?t[i]:null}).filter(function(a){return a!=null});return{horizontals:e,verticals:n}}var $d=[[0,-1,"n"],[1,0,"e"]],qd=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function Oi(r,t,e){var n=r.props.clipRelative,a=r.state,i=a.width,o=a.height,s=t,l=s.type,u=s.poses,f=l==="rect",c=l==="circle";if(l==="polygon")return e.map(function(D){return"".concat(Er(D[0],i,n)," ").concat(Er(D[1],o,n))});if(f||l==="inset"){var v=e[1][1],d=e[3][0],p=e[7][0],h=e[5][1];if(f)return[v,d,h,p].map(function(D){return"".concat(D,"px")});var g=[v,i-d,o-h,p].map(function(D,x){return Er(D,x%2?i:o,n)});if(e.length>8){var m=R(st(e[4],e[0]),2),_=m[0],b=m[1];g.push.apply(g,Z(["round"],R(Ti(u.slice(8).map(function(D,x){return T(T({},D),{pos:e[x]})}),n,_,b,p,v,d,h).styles),!1))}return g}else if(c||l==="ellipse"){var S=e[0],y=Er($(e[1][1]-S[1]),c?Math.sqrt((i*i+o*o)/2):o,n),g=c?[y]:[Er($(e[2][0]-S[0]),i,n),y];return g.push("at",Er(S[0],i,n),Er(S[1],o,n)),g}}function Hn(r,t,e,n){var a=[n,(n+t)/2,t],i=[r,(r+e)/2,e];return qd.map(function(o){var s=R(o,3),l=s[0],u=s[1],f=s[2],c=a[l+1],v=i[u+1];return{vertical:$(u),horizontal:$(l),direction:f,pos:[c,v]}})}function ru(r){var t=[1/0,-1/0],e=[1/0,-1/0];return r.forEach(function(n){var a=n.pos;t[0]=Math.min(t[0],a[0]),t[1]=Math.max(t[1],a[0]),e[0]=Math.min(e[0],a[1]),e[1]=Math.max(e[1],a[1])}),[$(t[1]-t[0]),$(e[1]-e[0])]}function ko(r,t,e,n,a){var i,o,s,l,u,f,c,v,d;if(r){var p=a;if(!p){var h=pr(r),g=h("clipPath");p=g!=="none"?g:h("clip")}if(!((!p||p==="none"||p==="auto")&&(p=n,!p))){var m=gs(p),_=m.prefix,b=_===void 0?p:_,S=m.value,y=S===void 0?"":S,D=b==="circle",x=" ";if(b==="polygon"){var E=re(y||"0% 0%, 100% 0%, 100% 100%, 0% 100%");x=",";var C=E.map(function(Vt){var tr=R(Vt.split(" "),2),qt=tr[0],Rt=tr[1];return{vertical:1,horizontal:1,pos:[wt(qt,t),wt(Rt,e)]}}),w=oe(C.map(function(Vt){return Vt.pos}));return{type:b,clipText:p,poses:C,splitter:x,left:w.minX,right:w.maxX,top:w.minY,bottom:w.maxY}}else if(D||b==="ellipse"){var P="",O="",M=0,I=0,E=Xr(y);if(D){var z="";i=R(E,4),o=i[0],z=o===void 0?"50%":o,s=i[2],P=s===void 0?"50%":s,l=i[3],O=l===void 0?"50%":l,M=wt(z,Math.sqrt((t*t+e*e)/2)),I=M}else{var F="",H="";u=R(E,5),f=u[0],F=f===void 0?"50%":f,c=u[1],H=c===void 0?"50%":c,v=u[3],P=v===void 0?"50%":v,d=u[4],O=d===void 0?"50%":d,M=wt(F,t),I=wt(H,e)}var V=[wt(P,t),wt(O,e)],C=Z([{vertical:1,horizontal:1,pos:V,direction:"nesw"}],R($d.slice(0,D?1:2).map(function(qt){return{vertical:$(qt[1]),horizontal:qt[0],direction:qt[2],sub:!0,pos:[V[0]+qt[0]*M,V[1]+qt[1]*I]}})),!1);return{type:b,clipText:p,radiusX:M,radiusY:I,left:V[0]-M,top:V[1]-I,right:V[0]+M,bottom:V[1]+I,poses:C,splitter:x}}else if(b==="inset"){var E=Xr(y||"0 0 0 0"),B=E.indexOf("round"),G=(B>-1?E.slice(0,B):E).length,A=E.slice(G+1),X=R(E.slice(0,G),4),q=X[0],j=X[1],Q=j===void 0?q:j,U=X[2],tt=U===void 0?q:U,et=X[3],vt=et===void 0?Q:et,mt=R([q,tt].map(function(qt){return wt(qt,e)}),2),J=mt[0],nt=mt[1],Dt=R([vt,Q].map(function(qt){return wt(qt,t)}),2),ut=Dt[0],ft=Dt[1],lt=t-ft,_t=e-nt,yt=tu(A,lt-ut,_t-J,ut,J),C=Z(Z([],R(Hn(J,lt,_t,ut)),!1),R(yt),!1);return{type:"inset",clipText:p,poses:C,top:J,left:ut,right:lt,bottom:_t,radius:A,splitter:x}}else if(b==="rect"){var E=re(y||"0px, ".concat(t,"px, ").concat(e,"px, 0px"));x=",";var dt=R(E.map(function(ir){var hr=Qe(ir).value;return hr}),4),Et=dt[0],ft=dt[1],nt=dt[2],ut=dt[3],C=Hn(Et,ft,nt,ut);return{type:"rect",clipText:p,poses:C,top:Et,right:ft,bottom:nt,left:ut,values:E,splitter:x}}}}}function jd(r,t,e,n,a){var i=r[t],o=i.direction,s=i.sub,l=r.map(function(){return[0,0]}),u=o?o.split(""):[];if(n&&t<8){var f=u.filter(function(M){return M==="w"||M==="e"}),c=u.filter(function(M){return M==="n"||M==="s"}),v=f[0],d=c[0];l[t]=e;var p=R(ru(r),2),h=p[0],g=p[1],m=h&&g?h/g:0;if(m&&a){var _=(t+4)%8,b=r[_].pos,S=[0,0];o.indexOf("w")>-1?S[0]=-1:o.indexOf("e")>-1&&(S[0]=1),o.indexOf("n")>-1?S[1]=-1:o.indexOf("s")>-1&&(S[1]=1);var y=$l([h,g],e,m,S,!0),D=h+y[0],x=g+y[1],E=b[1],C=b[1],w=b[0],P=b[0];S[0]===-1?w=P-D:S[0]===1?P=w+D:(w=w-D/2,P=P+D/2),S[1]===-1?E=C-x:(S[1]===1||(E=C-x/2),C=E+x);var O=Hn(E,P,C,w);r.forEach(function(M,I){l[I][0]=O[I].pos[0]-M.pos[0],l[I][1]=O[I].pos[1]-M.pos[1]})}else r.forEach(function(M,I){var z=M.direction;z&&(z.indexOf(v)>-1&&(l[I][0]=e[0]),z.indexOf(d)>-1&&(l[I][1]=e[1]))}),v&&(l[1][0]=e[0]/2,l[5][0]=e[0]/2),d&&(l[3][1]=e[1]/2,l[7][1]=e[1]/2)}else o&&!s?u.forEach(function(M){var I=M==="n"||M==="s";r.forEach(function(z,F){var H=z.direction,V=z.horizontal,B=z.vertical;!H||H.indexOf(M)===-1||(l[F]=[I||!V?0:e[0],!I||!B?0:e[1]])})}):l[t]=e;return l}function Ud(r,t){var e=R(al(r,t),2),n=e[0],a=e[1],i=t.datas,o=i.clipPath,s=i.clipIndex,l=o,u=l.type,f=l.poses,c=l.splitter,v=f.map(function(_){return _.pos});if(u==="polygon")v.splice(s,0,[n,a]);else if(u==="inset"){var d=Hd.indexOf(s),p=Vd.indexOf(s),h=f.length;if(Yd(f,v,8,d,p,n,a,v[4][0],v[4][1],v[0][0],v[0][1]),h===f.length)return}else return;var g=Oi(r,o,v),m="".concat(u,"(").concat(g.join(c),")");rt(r,"onClip",gt(r,t,T({clipEventType:"added",clipType:u,poses:v,clipStyles:g,clipStyle:m,distX:0,distY:0},ur({clipPath:m},t))))}function Zd(r,t){var e=t.datas,n=e.clipPath,a=e.clipIndex,i=n,o=i.type,s=i.poses,l=i.splitter,u=s.map(function(d){return d.pos}),f=u.length;if(o==="polygon")s.splice(a,1),u.splice(a,1);else if(o==="inset"){if(a<8||(Wd(s,u,a,8,f),f===s.length))return}else return;var c=Oi(r,n,u),v="".concat(o,"(").concat(c.join(l),")");rt(r,"onClip",gt(r,t,T({clipEventType:"removed",clipType:o,poses:u,clipStyles:c,clipStyle:v,distX:0,distY:0},ur({clipPath:v},t))))}var Kd={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(r,t){var e=r.props,n=e.customClipPath,a=e.defaultClipPath,i=e.clipArea,o=e.zoom,s=e.groupable,l=r.getState(),u=l.target,f=l.width,c=l.height,v=l.allMatrix,d=l.is3d,p=l.left,h=l.top,g=l.pos1,m=l.pos2,_=l.pos3,b=l.pos4,S=l.clipPathState,y=l.snapBoundInfos,D=l.rotation;if(!u||s)return[];var x=ko(u,f,c,a||"inset",S||n);if(!x)return[];var E=d?4:3,C=x.type,w=x.poses,P=w.map(function(ft){var lt=Gt(v,ft.pos,E);return[lt[0]-p,lt[1]-h]}),O=[],M=[],I=C==="rect",z=C==="inset",F=C==="polygon";if(I||z||F){var H=z?P.slice(0,8):P;M=H.map(function(ft,lt){var _t=lt===0?H[H.length-1]:H[lt-1],yt=Wt(_t,ft),dt=Bl(_t,ft);return t.createElement("div",{key:"clipLine".concat(lt),className:ot("line","clip-line","snap-control"),"data-clip-index":lt,style:{width:"".concat(dt,"px"),transform:"translate(".concat(_t[0],"px, ").concat(_t[1],"px) rotate(").concat(yt,"rad) scaleY(").concat(o,")")}})})}if(O=P.map(function(ft,lt){return t.createElement("div",{key:"clipControl".concat(lt),className:ot("control","clip-control","snap-control"),"data-clip-index":lt,style:{transform:"translate(".concat(ft[0],"px, ").concat(ft[1],"px) rotate(").concat(D,"rad) scale(").concat(o,")")}})}),z&&O.push.apply(O,Z([],R(P.slice(8).map(function(ft,lt){return t.createElement("div",{key:"clipRadiusControl".concat(lt),className:ot("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+lt,style:{transform:"translate(".concat(ft[0],"px, ").concat(ft[1],"px) rotate(").concat(D,"rad) scale(").concat(o,")")}})})),!1)),C==="circle"||C==="ellipse"){var V=x.left,B=x.top,G=x.radiusX,A=x.radiusY,X=R(st(Gt(v,[V,B],E),Gt(v,[0,0],E)),2),q=X[0],j=X[1],Q="none";if(!i){for(var U=Math.max(10,G/5,A/5),tt=[],et=0;et<=U;++et){var vt=Math.PI*2/U*et;tt.push([G+(G-o)*Math.cos(vt),A+(A-o)*Math.sin(vt)])}tt.push([G,-2]),tt.push([-2,-2]),tt.push([-2,A*2+2]),tt.push([G*2+2,A*2+2]),tt.push([G*2+2,-2]),tt.push([G,-2]),Q="polygon(".concat(tt.map(function(ft){return"".concat(ft[0],"px ").concat(ft[1],"px")}).join(", "),")")}O.push(t.createElement("div",{key:"clipEllipse",className:ot("clip-ellipse","snap-control"),style:{width:"".concat(G*2,"px"),height:"".concat(A*2,"px"),clipPath:Q,transform:"translate(".concat(-p+q,"px, ").concat(-h+j,"px) ").concat(Qn(v))}}))}if(i){var mt=_r(Z([g,m,_,b],R(P),!1)),J=mt.width,nt=mt.height,Dt=mt.left,ut=mt.top;if(F||I||z){var tt=z?P.slice(0,8):P;O.push(t.createElement("div",{key:"clipArea",className:ot("clip-area","snap-control"),style:{width:"".concat(J,"px"),height:"".concat(nt,"px"),transform:"translate(".concat(Dt,"px, ").concat(ut,"px)"),clipPath:"polygon(".concat(tt.map(function(lt){return"".concat(lt[0]-Dt,"px ").concat(lt[1]-ut,"px")}).join(", "),")")}}))}}return y&&["vertical","horizontal"].forEach(function(ft){var lt=y[ft],_t=ft==="horizontal";lt.isSnap&&M.push.apply(M,Z([],R(lt.snap.posInfos.map(function(yt,dt){var Et=yt.pos,Vt=st(Gt(v,_t?[0,Et]:[Et,0],E),[p,h]),tr=st(Gt(v,_t?[f,Et]:[Et,c],E),[p,h]);return je(t,"",Vt,tr,o,"clip".concat(ft,"snap").concat(dt),"guideline")})),!1)),lt.isBound&&M.push.apply(M,Z([],R(lt.bounds.map(function(yt,dt){var Et=yt.pos,Vt=st(Gt(v,_t?[0,Et]:[Et,0],E),[p,h]),tr=st(Gt(v,_t?[f,Et]:[Et,c],E),[p,h]);return je(t,"",Vt,tr,o,"clip".concat(ft,"bounds").concat(dt),"guideline","bounds","bold")})),!1))}),Z(Z([],R(O),!1),R(M),!1)},dragControlCondition:function(r,t){return t.inputEvent&&(t.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(r,t){var e=r.props,n=e.dragWithClip,a=n===void 0?!0:n;return a?!1:this.dragControlStart(r,t)},drag:function(r,t){return this.dragControl(r,T(T({},t),{isDragTarget:!0}))},dragEnd:function(r,t){return this.dragControlEnd(r,t)},dragControlStart:function(r,t){var e=r.state,n=r.props,a=n.defaultClipPath,i=n.customClipPath,o=e.target,s=e.width,l=e.height,u=t.inputEvent?t.inputEvent.target:null,f=u&&u.getAttribute("class")||"",c=t.datas,v=ko(o,s,l,a||"inset",i);if(!v)return!1;var d=v.clipText,p=v.type,h=v.poses,g=rt(r,"onClipStart",gt(r,t,{clipType:p,clipStyle:d,poses:h.map(function(m){return m.pos})}));return g===!1?(c.isClipStart=!1,!1):(c.isControl=f&&f.indexOf("clip-control")>-1,c.isLine=f.indexOf("clip-line")>-1,c.isArea=f.indexOf("clip-area")>-1||f.indexOf("clip-ellipse")>-1,c.clipIndex=u?parseInt(u.getAttribute("data-clip-index"),10):-1,c.clipPath=v,c.isClipStart=!0,e.clipPathState=d,le(r,t),!0)},dragControl:function(r,t){var e,n,a,i=t.datas,o=t.originalDatas,s=t.isDragTarget;if(!i.isClipStart)return!1;var l=i,u=l.isControl,f=l.isLine,c=l.isArea,v=l.clipIndex,d=l.clipPath;if(!d)return!1;var p=se(r.props,"clippable"),h=p.keepRatio,g=0,m=0,_=o.draggable,b=Ir(t);s&&_?(e=R(_.prevBeforeDist,2),g=e[0],m=e[1]):(n=R(b,2),g=n[0],m=n[1]);var S=[g,m],y=r.state,D=y.width,x=y.height,E=!c&&!u&&!f,C=d.type,w=d.poses,P=d.splitter,O=w.map(function(Tt){return Tt.pos});E&&(g=-g,m=-m);var M=!u||w[v].direction==="nesw",I=C==="inset"||C==="rect",z=w.map(function(){return[0,0]});if(u&&!M){var F=w[v],H=F.horizontal,V=F.vertical,B=[g*$(H),m*$(V)];z=jd(w,v,B,I,h)}else M&&(z=O.map(function(){return[g,m]}));var G=O.map(function(Tt,or){return xt(Tt,z[or])}),A=Z([],R(G),!1);y.snapBoundInfos=null;var X=d.type==="circle",q=d.type==="ellipse";if(X||q){var j=_r(G),Q=$(j.bottom-j.top),U=$(q?j.right-j.left:Q),tt=G[0][1]+Q,et=G[0][0]-U,vt=G[0][0]+U;X&&(A.push([vt,j.bottom]),z.push([1,0])),A.push([j.left,tt]),z.push([0,1]),A.push([et,j.bottom]),z.push([1,0])}var mt=Rl((p.clipHorizontalGuidelines||[]).map(function(Tt){return wt("".concat(Tt),x)}),(p.clipVerticalGuidelines||[]).map(function(Tt){return wt("".concat(Tt),D)}),D,x),J=[],nt=[];if(X||q)J=[A[4][0],A[2][0]],nt=[A[1][1],A[3][1]];else if(I){var Dt=[A[0],A[2],A[4],A[6]],ut=[z[0],z[2],z[4],z[6]];J=Dt.filter(function(Tt,or){return ut[or][0]}).map(function(Tt){return Tt[0]}),nt=Dt.filter(function(Tt,or){return ut[or][1]}).map(function(Tt){return Tt[1]})}else J=A.filter(function(Tt,or){return z[or][0]}).map(function(Tt){return Tt[0]}),nt=A.filter(function(Tt,or){return z[or][1]}).map(function(Tt){return Tt[1]});var ft=[0,0],lt=bo(mt,p.clipTargetBounds&&{left:0,top:0,right:D,bottom:x},J,nt,5,5),_t=lt.horizontal,yt=lt.vertical,dt=_t.offset,Et=yt.offset;if(_t.isBound&&(ft[1]+=dt),yt.isBound&&(ft[0]+=Et),(q||X)&&z[0][0]===0&&z[0][1]===0){var j=_r(G),Vt=j.bottom-j.top,tr=q?j.right-j.left:Vt,qt=yt.isBound?$(Et):yt.snapIndex===0?-Et:Et,Rt=_t.isBound?$(dt):_t.snapIndex===0?-dt:dt;tr-=qt,Vt-=Rt,X&&(Vt=yl(yt,_t)>0?Vt:tr,tr=Vt);var zt=A[0];A[1][1]=zt[1]-Vt,A[2][0]=zt[0]+tr,A[3][1]=zt[1]+Vt,A[4][0]=zt[0]-tr}else if(I&&h&&u){var ir=R(ru(w),2),hr=ir[0],Ie=ir[1],Pe=hr&&Ie?hr/Ie:0,Fr=w[v],Zr=Fr.direction||"",fe=A[1][1],tt=A[5][1],et=A[7][0],vt=A[3][0];$(dt)<=$(Et)?dt=lr(dt)*$(Et)/Pe:Et=lr(Et)*$(dt)*Pe,Zr.indexOf("w")>-1?et-=Et:Zr.indexOf("e")>-1?vt-=Et:(et+=Et/2,vt-=Et/2),Zr.indexOf("n")>-1?fe-=dt:Zr.indexOf("s")>-1?tt-=dt:(fe+=dt/2,tt-=dt/2);var hu=Hn(fe,vt,tt,et);A.forEach(function(Bi,bu){var aa;aa=R(hu[bu].pos,2),Bi[0]=aa[0],Bi[1]=aa[1]})}else A.forEach(function(Tt,or){var ki=z[or];ki[0]&&(Tt[0]-=Et),ki[1]&&(Tt[1]-=dt)});var Ai=Oi(r,d,G),ea="".concat(C,"(").concat(Ai.join(P),")");if(y.clipPathState=ea,X||q)J=[A[4][0],A[2][0]],nt=[A[1][1],A[3][1]];else if(I){var Dt=[A[0],A[2],A[4],A[6]];J=Dt.map(function(or){return or[0]}),nt=Dt.map(function(or){return or[1]})}else J=A.map(function(Tt){return Tt[0]}),nt=A.map(function(Tt){return Tt[1]});if(y.snapBoundInfos=bo(mt,p.clipTargetBounds&&{left:0,top:0,right:D,bottom:x},J,nt,1,1),_){var gu=y.is3d,mu=y.allMatrix,_u=gu?4:3,na=ft;s&&(na=[S[0]+ft[0]-b[0],S[1]+ft[1]-b[1]]),_.deltaOffset=Mt(mu,[na[0],na[1],0,0],_u)}return rt(r,"onClip",gt(r,t,T({clipEventType:"changed",clipType:C,poses:G,clipStyle:ea,clipStyles:Ai,distX:g,distY:m},ur((a={},a[C==="rect"?"clip":"clipPath"]=ea,a),t)))),!0},dragControlEnd:function(r,t){this.unset(r);var e=t.isDrag,n=t.datas,a=t.isDouble,i=n.isLine,o=n.isClipStart,s=n.isControl;return o?(rt(r,"onClipEnd",gr(r,t,{})),a&&(s?Zd(r,t):i&&Ud(r,t)),a||e):!1},unset:function(r){r.state.clipPathState="",r.state.snapBoundInfos=null}},Jd={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(r,t){return t.isRequest?t.requestAble==="originDraggable":Ut(t.inputEvent.target,ot("origin"))},dragControlStart:function(r,t){var e=t.datas;le(r,t);var n=gt(r,t,{dragStart:sr.dragStart(r,new Ee().dragStart([0,0],t))}),a=rt(r,"onDragOriginStart",n);return e.startOrigin=r.state.transformOrigin,e.startTargetOrigin=r.state.targetOrigin,e.prevOrigin=[0,0],e.isDragOrigin=!0,a===!1?(e.isDragOrigin=!1,!1):n},dragControl:function(r,t){var e=t.datas,n=t.isPinch,a=t.isRequest;if(!e.isDragOrigin)return!1;var i=R(Ir(t),2),o=i[0],s=i[1],l=r.state,u=l.width,f=l.height,c=l.offsetMatrix,v=l.targetMatrix,d=l.is3d,p=r.props.originRelative,h=p===void 0?!0:p,g=d?4:3,m=[o,s];if(a){var _=t.distOrigin;(_[0]||_[1])&&(m=_)}var b=xt(e.startOrigin,m),S=xt(e.startTargetOrigin,m),y=st(m,e.prevOrigin),D=un(c,v,b,g),x=r.getRect(),E=_r(ue(D,u,f,g)),C=[x.left-E.left,x.top-E.top];e.prevOrigin=m;var w=[Er(S[0],u,h),Er(S[1],f,h)].join(" "),P=sr.drag(r,ln(t,r.state,C,!!n,!1)),O=gt(r,t,T(T({width:u,height:f,origin:b,dist:m,delta:y,transformOrigin:w,drag:P},ur({transformOrigin:w,transform:P.transform},t)),{afterTransform:P.transform}));return rt(r,"onDragOrigin",O),O},dragControlEnd:function(r,t){var e=t.datas;return e.isDragOrigin?(rt(r,"onDragOriginEnd",gr(r,t,{})),!0):!1},dragGroupControlCondition:function(r,t){return this.dragControlCondition(r,t)},dragGroupControlStart:function(r,t){var e=this.dragControlStart(r,t);return!!e},dragGroupControl:function(r,t){var e=this.dragControl(r,t);return e?(r.transformOrigin=e.transformOrigin,!0):!1},request:function(r){var t={},e=r.getRect(),n=0,a=0,i=e.transformOrigin,o=[0,0];return{isControl:!0,requestStart:function(){return{datas:t}},request:function(s){return"deltaOrigin"in s?(o[0]+=s.deltaOrigin[0],o[1]+=s.deltaOrigin[1]):"origin"in s?(o[0]=s.origin[0]-i[0],o[1]=s.origin[1]-i[1]):("x"in s?n=s.x-e.left:"deltaX"in s&&(n+=s.deltaX),"y"in s?a=s.y-e.top:"deltaY"in s&&(a+=s.deltaY)),{datas:t,distX:n,distY:a,distOrigin:o}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function Qd(r,t,e,n){var a=r.filter(function(l){var u=l.virtual,f=l.horizontal;return f&&!u}).length,i=r.filter(function(l){var u=l.virtual,f=l.vertical;return f&&!u}).length,o=-1;if(t===0&&(a===0?o=0:a===1&&(o=1)),t===2&&(a<=2?o=2:a<=3&&(o=3)),t===3&&(i===0?o=4:i<4&&(o=7)),t===1&&(i<=1?o=5:i<=2&&(o=6)),!(o===-1||!r[o].virtual)){var s=r[o];tp(r,o),o<4?s.pos[0]=e:s.pos[1]=n}}function tp(r,t){t<4?r.slice(0,t+1).forEach(function(e){e.virtual=!1}):(r[0].virtual&&(r[0].virtual=!1),r.slice(4,t+1).forEach(function(e){e.virtual=!1}))}function rp(r,t){t<4?r.slice(t,4).forEach(function(e){e.virtual=!0}):r.slice(t).forEach(function(e){e.virtual=!0})}function Bo(r,t,e,n,a){n===void 0&&(n=[0,0]);var i=[];return!r||r==="0px"?i=[]:i=Xr(r),tu(i,t,e,0,0,n,a)}function Go(r,t,e,n,a){var i=r.state,o=i.width,s=i.height,l=Ti(a,r.props.roundRelative,o,s),u=l.raws,f=l.styles,c=l.radiusPoses,v=Xd(c,u),d=v.horizontals,p=v.verticals,h=f.join(" ");i.borderRadiusState=h;var g=gt(r,t,T({horizontals:d,verticals:p,borderRadius:h,width:o,height:s,delta:n,dist:e},ur({borderRadius:h},t)));return rt(r,"onRound",g),g}function No(r){var t,e,n=r.getState().style,a=n.borderRadius||"";if(!a&&r.props.groupable){var i=r.moveables[0],o=r.getTargets()[0];o&&((i==null?void 0:i.props.target)===o?(a=(e=(t=r.moveables[0])===null||t===void 0?void 0:t.state.style.borderRadius)!==null&&e!==void 0?e:"",n.borderRadius=a):(a=Di(o).borderRadius,n.borderRadius=a))}return a}var ep={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(r){var t=r.props.roundClickable;return t===!0||t==="line"?ot("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(r,t){var e=r.getState(),n=e.target,a=e.width,i=e.height,o=e.allMatrix,s=e.is3d,l=e.left,u=e.top,f=e.borderRadiusState,c=r.props,v=c.minRoundControls,d=v===void 0?[0,0]:v,p=c.maxRoundControls,h=p===void 0?[4,4]:p,g=c.zoom,m=c.roundPadding,_=m===void 0?0:m,b=c.isDisplayShadowRoundControls,S=c.groupable;if(!n)return null;var y=f||No(r),D=s?4:3,x=Bo(y,a,i,d,!0);if(!x)return null;var E=0,C=0,w=S?[0,0]:[l,u];return x.map(function(P,O){var M=P.horizontal,I=P.vertical,z=P.direction||"",F=Z([],R(P.pos),!1);C+=Math.abs(M),E+=Math.abs(I),M&&z.indexOf("n")>-1&&(F[1]-=_),I&&z.indexOf("w")>-1&&(F[0]-=_),M&&z.indexOf("s")>-1&&(F[1]+=_),I&&z.indexOf("e")>-1&&(F[0]+=_);var H=st(Gt(o,F,D),w),V=b&&b!=="horizontal",B=P.vertical?E<=h[1]&&(V||!P.virtual):C<=h[0]&&(b||!P.virtual);return t.createElement("div",{key:"borderRadiusControl".concat(O),className:ot("control","border-radius",P.vertical?"vertical":"",P.virtual?"virtual":""),"data-radius-index":O,style:{display:B?"block":"none",transform:"translate(".concat(H[0],"px, ").concat(H[1],"px) scale(").concat(g,")")}})})},dragControlCondition:function(r,t){if(!t.inputEvent||t.isRequest)return!1;var e=t.inputEvent.target.getAttribute("class")||"";return e.indexOf("border-radius")>-1||e.indexOf("moveable-line")>-1&&e.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(r,t){return this.dragControlCondition(r,t)},dragControlStart:function(r,t){var e=t.inputEvent,n=t.datas,a=e.target,i=a.getAttribute("class")||"",o=i.indexOf("border-radius")>-1,s=i.indexOf("moveable-line")>-1&&i.indexOf("moveable-direction")>-1,l=o?parseInt(a.getAttribute("data-radius-index"),10):-1,u=-1;if(s){var f=a.getAttribute("data-line-key")||"";f&&(u=parseInt(f.replace(/render-line-/g,""),10),isNaN(u)&&(u=-1))}if(!o&&!s)return!1;var c=gt(r,t,{}),v=rt(r,"onRoundStart",c);if(v===!1)return!1;n.lineIndex=u,n.controlIndex=l,n.isControl=o,n.isLine=s,le(r,t);var d=r.props,p=d.roundRelative,h=d.minRoundControls,g=h===void 0?[0,0]:h,m=r.state,_=m.width,b=m.height;n.isRound=!0,n.prevDist=[0,0];var S=No(r),y=Bo(S||"",_,b,g,!0)||[];return n.controlPoses=y,m.borderRadiusState=Ti(y,p,_,b).styles.join(" "),c},dragControl:function(r,t){var e=t.datas,n=e.controlPoses;if(!e.isRound||!e.isControl||!n.length)return!1;var a=e.controlIndex,i=R(Ir(t),2),o=i[0],s=i[1],l=[o,s],u=st(l,e.prevDist),f=r.props.maxRoundControls,c=f===void 0?[4,4]:f,v=r.state,d=v.width,p=v.height,h=n[a],g=h.vertical,m=h.horizontal,_=n.map(function(S){var y=S.horizontal,D=S.vertical,x=[y*m*l[0],D*g*l[1]];if(y){if(c[0]===1)return x;if(c[0]<4&&y!==m)return x}else{if(c[1]===0)return x[1]=D*m*l[0]/d*p,x;if(g){if(c[1]===1)return x;if(c[1]<4&&D!==g)return x}}return[0,0]});_[a]=l;var b=n.map(function(S,y){return T(T({},S),{pos:xt(S.pos,_[y])})});return a<4?b.slice(0,a+1).forEach(function(S){S.virtual=!1}):b.slice(4,a+1).forEach(function(S){S.virtual=!1}),e.prevDist=[o,s],Go(r,t,l,u,b)},dragControlEnd:function(r,t){var e=r.state;e.borderRadiusState="";var n=t.datas,a=t.isDouble;if(!n.isRound)return!1;var i=n.isControl,o=n.controlIndex,s=n.isLine,l=n.lineIndex,u=n.controlPoses,f=u.filter(function(m){var _=m.virtual;return _}).length,c=r.props.roundClickable,v=c===void 0?!0:c;if(a&&v){if(i&&(v===!0||v==="control"))rp(u,o);else if(s&&(v===!0||v==="line")){var d=R(al(r,t),2),p=d[0],h=d[1];Qd(u,l,p,h)}f!==u.filter(function(m){var _=m.virtual;return _}).length&&Go(r,t,[0,0],[0,0],u)}var g=gr(r,t,{});return rt(r,"onRoundEnd",g),e.borderRadiusState="",g},dragGroupControlStart:function(r,t){var e=this.dragControlStart(r,t);if(!e)return!1;var n=r.moveables,a=r.props.targets,i=xr(r,"roundable",t),o=T({targets:r.props.targets,events:i.map(function(s,l){return T(T({},s),{target:a[l],moveable:n[l],currentTarget:n[l]})})},e);return rt(r,"onRoundGroupStart",o),e},dragGroupControl:function(r,t){var e=this.dragControl(r,t);if(!e)return!1;var n=r.moveables,a=r.props.targets,i=xr(r,"roundable",t),o=T({targets:r.props.targets,events:i.map(function(s,l){return T(T(T({},s),{target:a[l],moveable:n[l],currentTarget:n[l]}),ur({borderRadius:e.borderRadius},s))})},e);return rt(r,"onRoundGroup",o),o},dragGroupControlEnd:function(r,t){var e=r.moveables,n=r.props.targets,a=xr(r,"roundable",t);ta(r,"onRound",function(s){var l=T({targets:r.props.targets,events:a.map(function(u,f){return T(T(T({},u),{target:n[f],moveable:e[f],currentTarget:e[f]}),ur({borderRadius:s.borderRadius},u))})},s);rt(r,"onRoundGroup",l)});var i=this.dragControlEnd(r,t);if(!i)return!1;var o=T({targets:r.props.targets,events:a.map(function(s,l){var u;return T(T({},s),{target:n[l],moveable:e[l],currentTarget:e[l],lastEvent:(u=s.datas)===null||u===void 0?void 0:u.lastEvent})})},i);return rt(r,"onRoundGroupEnd",o),o},unset:function(r){r.state.borderRadiusState=""}};function np(r,t){var e=t?4:3,n=Pt(e),a="matrix".concat(t?"3d":"","(").concat(n.join(","),")");return r===a||r==="matrix(1,0,0,1,0,0)"}var eu={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(r,t){var e=r.state,n=e.is3d,a=e.targetMatrix,i=e.inlineTransform,o=n?"matrix3d(".concat(a.join(","),")"):"matrix(".concat(Xs(a,!0),")"),s=!i||i==="none"?o:i;t.datas.startTransforms=np(s,n)?[]:Xr(s)},resetStyle:function(r){var t=r.datas;t.nextStyle={},t.nextTransforms=r.datas.startTransforms,t.nextTransformAppendedIndexes=[]},fillDragStartParams:function(r,t){return gt(r,t,{setTransform:function(e){t.datas.startTransforms=$t(e)?e:Xr(e)},isPinch:!!t.isPinch})},fillDragParams:function(r,t){return gt(r,t,{isPinch:!!t.isPinch})},dragStart:function(r,t){this.setTransform(r,t),this.resetStyle(t),rt(r,"onBeforeRenderStart",this.fillDragStartParams(r,t))},drag:function(r,t){t.datas.startTransforms||this.setTransform(r,t),this.resetStyle(t),rt(r,"onBeforeRender",gt(r,t,{isPinch:!!t.isPinch}))},dragEnd:function(r,t){t.datas.startTransforms||(this.setTransform(r,t),this.resetStyle(t)),rt(r,"onBeforeRenderEnd",gt(r,t,{isPinch:!!t.isPinch,isDrag:t.isDrag}))},dragGroupStart:function(r,t){var e=this;this.dragStart(r,t);var n=xr(r,"beforeRenderable",t),a=r.moveables,i=n.map(function(o,s){var l=a[s];return e.setTransform(l,o),e.resetStyle(o),e.fillDragStartParams(l,o)});rt(r,"onBeforeRenderGroupStart",gt(r,t,{isPinch:!!t.isPinch,targets:r.props.targets,setTransform:function(){},events:i}))},dragGroup:function(r,t){var e=this;this.drag(r,t);var n=xr(r,"beforeRenderable",t),a=r.moveables,i=n.map(function(o,s){var l=a[s];return e.resetStyle(o),e.fillDragParams(l,o)});rt(r,"onBeforeRenderGroup",gt(r,t,{isPinch:!!t.isPinch,targets:r.props.targets,events:i}))},dragGroupEnd:function(r,t){this.dragEnd(r,t),rt(r,"onBeforeRenderGroupEnd",gt(r,t,{isPinch:!!t.isPinch,isDrag:t.isDrag,targets:r.props.targets}))},dragControlStart:function(r,t){return this.dragStart(r,t)},dragControl:function(r,t){return this.drag(r,t)},dragControlEnd:function(r,t){return this.dragEnd(r,t)},dragGroupControlStart:function(r,t){return this.dragGroupStart(r,t)},dragGroupControl:function(r,t){return this.dragGroup(r,t)},dragGroupControlEnd:function(r,t){return this.dragGroupEnd(r,t)}},nu={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(r,t){rt(r,"onRenderStart",gt(r,t,{isPinch:!!t.isPinch}))},drag:function(r,t){rt(r,"onRender",this.fillDragParams(r,t))},dragAfter:function(r,t){return this.drag(r,t)},dragEnd:function(r,t){rt(r,"onRenderEnd",this.fillDragEndParams(r,t))},dragGroupStart:function(r,t){rt(r,"onRenderGroupStart",gt(r,t,{isPinch:!!t.isPinch,targets:r.props.targets}))},dragGroup:function(r,t){var e=this,n=xr(r,"beforeRenderable",t),a=r.moveables,i=n.map(function(o,s){var l=a[s];return e.fillDragParams(l,o)});rt(r,"onRenderGroup",gt(r,t,T(T({isPinch:!!t.isPinch,targets:r.props.targets,transform:gn(t),transformObject:{}},ur(mn(t))),{events:i})))},dragGroupEnd:function(r,t){var e=this,n=xr(r,"beforeRenderable",t),a=r.moveables,i=n.map(function(o,s){var l=a[s];return e.fillDragEndParams(l,o)});rt(r,"onRenderGroupEnd",gt(r,t,T({isPinch:!!t.isPinch,isDrag:t.isDrag,targets:r.props.targets,events:i,transformObject:{},transform:gn(t)},ur(mn(t)))))},dragControlStart:function(r,t){return this.dragStart(r,t)},dragControl:function(r,t){return this.drag(r,t)},dragControlAfter:function(r,t){return this.dragAfter(r,t)},dragControlEnd:function(r,t){return this.dragEnd(r,t)},dragGroupControlStart:function(r,t){return this.dragGroupStart(r,t)},dragGroupControl:function(r,t){return this.dragGroup(r,t)},dragGroupControlEnd:function(r,t){return this.dragGroupEnd(r,t)},fillDragParams:function(r,t){var e={};return Se(An(t)||[]).forEach(function(n){e[n.name]=n.functionValue}),gt(r,t,T({isPinch:!!t.isPinch,transformObject:e,transform:gn(t)},ur(mn(t))))},fillDragEndParams:function(r,t){var e={};return Se(An(t)||[]).forEach(function(n){e[n.name]=n.functionValue}),gt(r,t,T({isPinch:!!t.isPinch,isDrag:t.isDrag,transformObject:e,transform:gn(t)},ur(mn(t))))}};function Ye(r,t,e,n,a,i,o){i.clientDistX=i.distX,i.clientDistY=i.distY;var s=a==="Start",l=a==="End",u=a==="After",f=r.state.target,c=i.isRequest,v=n.indexOf("Control")>-1;if(!f||s&&v&&!c&&r.areaElement===i.inputEvent.target)return!1;var d=Z([],R(t),!1);if(c){var p=i.requestAble;d.some(function(O){return O.name===p})||d.push.apply(d,Z([],R(r.props.ables.filter(function(O){return O.name===p})),!1))}if(!d.length||d.every(function(O){return O.dragRelation}))return!1;var h=i.inputEvent,g;l&&h&&(g=document.elementFromPoint(i.clientX,i.clientY)||h.target);var m=!1,_=function(){var O;m=!0,(O=i.stop)===null||O===void 0||O.call(i)},b=s&&(!r.targetGesto||!r.controlGesto||!r.targetGesto.isFlag()||!r.controlGesto.isFlag());b&&r.updateRect(a,!0,!1);var S=i.datas,y=v?"controlGesto":"targetGesto",D=r[y],x=function(O,M,I){if(!(M in O)||D!==r[y])return!1;var z=O.name,F=S[z]||(S[z]={});if(s&&(F.isEventStart=!I||!O[I]||O[I](r,i)),!F.isEventStart)return!1;var H=O[M](r,T(T({},i),{stop:_,datas:F,originalDatas:S,inputTarget:g}));return r._emitter.off(),s&&H===!1&&(F.isEventStart=!1),H};b&&d.forEach(function(O){O.unset&&O.unset(r)}),x(eu,"drag".concat(n).concat(a));var E=0,C=0;e.forEach(function(O){if(m)return!1;var M="".concat(O).concat(n).concat(a),I="".concat(O).concat(n,"Condition");a===""&&!c&&Xl(r.state,i);var z=d.filter(function(V){return V[M]});z=z.filter(function(V,B){return V.name&&z.indexOf(V)===B});var F=z.filter(function(V){return x(V,M,I)}),H=F.length;m&&++E,H&&++C,!m&&s&&z.length&&!H&&(E+=z.filter(function(V){var B=V.name,G=S[B];return G.isEventStart?V.dragRelation!=="strong":!1}).length?1:0)}),(!u||C)&&x(nu,"drag".concat(n).concat(a));var w=D!==r[y]||E===e.length;if((l||m||w)&&(r.state.gestos={},r.moveables&&r.moveables.forEach(function(O){O.state.gestos={}}),d.forEach(function(O){O.unset&&O.unset(r)})),s&&!w&&!c&&C&&r.props.preventDefault&&(i==null||i.preventDefault()),r.isUnmounted||w)return!1;if(!s&&C&&!o||l){var P=r.props.flushSync||zl;P(function(){r.updateRect(l?a:"",!0,!1),r.forceUpdate()})}return!s&&!l&&!u&&C&&!o&&Ye(r,t,e,n,a+"After",i),!0}function Ri(r,t){return function(e,n){var a;n===void 0&&(n=e.inputEvent.target);var i=n,o=r.areaElement,s=r._dragTarget;return!s||!t&&(!((a=r.controlGesto)===null||a===void 0)&&a.isFlag())?!1:i===s||s.contains(i)||i===o||!r.isMoveableElement(i)&&!r.controlBox.contains(i)||Ut(i,"moveable-area")||Ut(i,"moveable-padding")||Ut(i,"moveable-edgeDraggable")}}function au(r,t,e){var n=r.controlBox,a=[],i=r.props,o=i.dragArea,s=r.state.target,l=i.dragTarget;a.push(n),(!o||l)&&a.push(t),!o&&l&&s&&t!==s&&i.dragTargetSelf&&a.push(s);var u=Ri(r);return ou(r,a,"targetAbles",e,{dragStart:u,pinchStart:u})}function iu(r,t){var e=r.controlBox,n=[];n.push(e);var a=Ri(r,!0),i=function(o,s){if(s===void 0&&(s=o.inputEvent.target),s===e)return!0;var l=a(o,s);return!l};return ou(r,n,"controlAbles",t,{dragStart:i,pinchStart:i})}function ou(r,t,e,n,a){a===void 0&&(a={});var i=e==="targetAbles",o=r.props,s=o.pinchOutside,l=o.pinchThreshold,u=o.preventClickEventOnDrag,f=o.preventClickDefault,c=o.checkInput,v=o.dragFocusedInput,d=o.preventDefault,p=d===void 0?!0:d,h=o.preventRightClick,g=h===void 0?!0:h,m=o.preventWheelClick,_=m===void 0?!0:m,b=o.dragContainer,S=Tr(b,!0),y={preventDefault:p,preventRightClick:g,preventWheelClick:_,container:S||Wr(r.getControlBoxElement()),pinchThreshold:l,pinchOutside:s,preventClickEventOnDrag:i?u:!1,preventClickEventOnDragStart:i?f:!1,preventClickEventByCondition:i?null:function(E){return r.controlBox.contains(E.target)},checkInput:i?c:!1,dragFocusedInput:v},D=new Ic(t,y),x=n==="Control";return["drag","pinch"].forEach(function(E){["Start","","End"].forEach(function(C){D.on("".concat(E).concat(C),function(w){var P,O=w.eventType,M=E==="drag"&&w.isPinch;if(a[O]&&!a[O](w)){w.stop();return}if(!M){var I=E==="drag"?[E]:["drag",E],z=Z([],R(r[e]),!1),F=Ye(r,z,I,n,C,w);F?(r.props.stopPropagation||C==="Start"&&x)&&((P=w==null?void 0:w.inputEvent)===null||P===void 0||P.stopPropagation()):w.stop()}})})}),D}var ap=function(){function r(t,e,n){var a=this;this.target=t,this.moveable=e,this.eventName=n,this.ables=[],this._onEvent=function(i){var o=a.eventName,s=a.moveable;s.state.disableNativeEvent||a.ables.forEach(function(l){l[o](s,{inputEvent:i})})},t.addEventListener(n.toLowerCase(),this._onEvent)}return r.prototype.setAbles=function(t){this.ables=t},r.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},r}();function ip(r,t,e,n){var a;e===void 0&&(e=t);var i=fl(r,t),o=i.matrixes,s=i.is3d,l=i.targetMatrix,u=i.transformOrigin,f=i.targetOrigin,c=i.offsetContainer,v=i.hasFixed,d=i.zoom,p=Sv(c,e),h=p.matrixes,g=p.is3d,m=p.offsetContainer,_=p.zoom,b=n||g||s,S=b?4:3,y=r.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in r,D=l,x=Pt(S),E=Pt(S),C=Pt(S),w=Pt(S),P=o.length,O=h.map(function(B){return T(T({},B),{matrix:B.matrix?Z([],R(B.matrix),!1):void 0})}).reverse();o.reverse(),!s&&b&&(D=wr(D,3,4),Wa(o)),!g&&b&&Wa(O),O.forEach(function(B){E=Mt(E,B.matrix,S)});var M=e||Ur(r),I=((a=O[0])===null||a===void 0?void 0:a.target)||Ue(M,M,!0).offsetParent,z=O.slice(1).reduce(function(B,G){return Mt(B,G.matrix,S)},Pt(S));o.forEach(function(B,G){if(P-2===G&&(C=x.slice()),P-1===G&&(w=x.slice()),!B.matrix){var A=o[G+1],X=Dd(B,A,I,S,Mt(z,x,S));B.matrix=ie(X,S)}x=Mt(x,B.matrix,S)});var F=!y&&s;D||(D=Pt(F?4:3));var H=Qn(y&&D.length===16?wr(D,4,3):D,F),V=E;return E=Ws(E,S,S),{hasZoom:d!==1||_!==1,hasFixed:v,matrixes:o,rootMatrix:E,originalRootMatrix:V,beforeMatrix:C,offsetMatrix:w,allMatrix:x,targetMatrix:D,targetTransform:H,inlineTransform:r.style.transform,transformOrigin:u,targetOrigin:f,is3d:b,offsetContainer:c,offsetRootContainer:m}}function op(r,t,e,n){e===void 0&&(e=t);var a=0,i=0,o=0,s={},l=Gl(r);if(r&&(a=l.offsetWidth,i=l.offsetHeight),r){var u=ip(r,t,e,n),f=_e(u.allMatrix,u.transformOrigin,a,i);s=T(T({},u),f);var c=_e(u.allMatrix,[50,50],100,100);o=Nl([c.pos1,c.pos2],c.direction)}var v=n?4:3;return T(T(T({hasZoom:!1,width:a,height:i,rotation:o},l),{originalRootMatrix:Pt(v),rootMatrix:Pt(v),beforeMatrix:Pt(v),offsetMatrix:Pt(v),allMatrix:Pt(v),targetMatrix:Pt(v),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!n,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),s)}function qa(r,t,e,n,a,i){i===void 0&&(i=[]);var o=1,s=[0,0],l=bn(),u=bn(),f=bn(),c=bn(),v=[0,0],d={},p=op(t,e,a,!0);if(t){var h=pr(t);i.forEach(function(O){d[O]=h(O)});var g=p.is3d?4:3,m=_e(p.offsetMatrix,xt(p.transformOrigin,Ys(p.targetMatrix,g)),p.width,p.height);o=m.direction,s=xt(m.origin,[m.left-p.left,m.top-p.top]),c=We(p.offsetRootContainer);var _=Ue(n,n,!0).offsetParent||p.offsetRootContainer;if(p.hasZoom){var b=_e(Mt(p.originalRootMatrix,p.allMatrix),p.transformOrigin,p.width,p.height),S=_e(p.originalRootMatrix,Nn(pr(_)("transformOrigin")).map(function(O){return parseFloat(O)}),_.offsetWidth,_.offsetHeight);if(l=ma(b,c),f=ma(S,c,_,!0),r){var y=b.left,D=b.top;u=ma({left:y,top:D,bottom:D,right:D},c)}}else{l=We(t),f=bv(_),r&&(u=We(r));var x=f.left,E=f.top,C=f.clientLeft,w=f.clientTop,P=[l.left-x,l.top-E];v=st(xe(p.rootMatrix,P,4),[C+p.left,w+p.top])}}return T({targetClientRect:l,containerClientRect:f,moveableClientRect:u,rootContainerClientRect:c,beforeDirection:o,beforeOrigin:s,originalBeforeOrigin:s,target:t,style:d,offsetDelta:v},p)}function Fo(r){var t=r.pos1,e=r.pos2,n=r.pos3,a=r.pos4;if(!t||!e||!n||!a)return null;var i=oe([t,e,n,a]),o=[i.minX,i.minY],s=st(r.origin,o);return t=st(t,o),e=st(e,o),n=st(n,o),a=st(a,o),T(T({},r),{left:r.left,top:r.top,posDelta:o,pos1:t,pos2:e,pos3:n,pos4:a,origin:s,beforeOrigin:s,isPersisted:!0})}var Ce=function(r){on(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.state=T({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},qa(null)),e.renderState={},e.enabledAbles=[],e.targetAbles=[],e.controlAbles=[],e.rotation=0,e.scale=[1,1],e.isMoveableMounted=!1,e.isUnmounted=!1,e.events={mouseEnter:null,mouseLeave:null},e._emitter=new Xn,e._prevOriginalDragTarget=null,e._originalDragTarget=null,e._prevDragTarget=null,e._dragTarget=null,e._prevPropTarget=null,e._propTarget=null,e._prevDragArea=!1,e._isPropTargetChanged=!1,e._hasFirstTarget=!1,e._reiszeObserver=null,e._observerId=0,e._mutationObserver=null,e._rootContainer=null,e._viewContainer=null,e._viewClassNames=[],e._store={},e.checkUpdateRect=function(){if(!e.isDragging()){var n=e.props.parentMoveable;if(n){n.checkUpdateRect();return}Sf(e._observerId),e._observerId=_s(function(){e.isDragging()||e.updateRect()})}},e._onPreventClick=function(n){n.stopPropagation(),n.preventDefault()},e}return t.prototype.render=function(){var e=this.props,n=this.getState(),a=e.parentPosition,i=e.className,o=e.target,s=e.zoom,l=e.cspNonce,u=e.translateZ,f=e.cssStyled,c=e.groupable,v=e.linePadding,d=e.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var p=R(a||[0,0],2),h=p[0],g=p[1],m=n.left,_=n.top,b=n.target,S=n.direction,y=n.hasFixed,D=n.offsetDelta,x=e.targets,E=this.isDragging(),C={};this.getEnabledAbles().forEach(function(z){C["data-able-".concat(z.name.toLowerCase())]=!0});var w=this._getAbleClassName(),P=x&&x.length&&(b||c)||o||!this._hasFirstTarget&&this.state.isPersisted,O=this.controlBox||this.props.firstRenderState||this.props.persistData,M=[m-h,_-g];!c&&e.useAccuratePosition&&(M[0]+=D[0],M[1]+=D[1]);var I={position:y?"fixed":"absolute",display:P?"block":"none",visibility:O?"visible":"hidden",transform:"translate3d(".concat(M[0],"px, ").concat(M[1],"px, ").concat(u,")"),"--zoom":s,"--zoompx":"".concat(s,"px")};return v&&(I["--moveable-line-padding"]=v),d&&(I["--moveable-control-padding"]=d),Dr(f,T({cspNonce:l,ref:Pr(this,"controlBox"),className:"".concat(ot("control-box",S===-1?"reverse":"",E?"dragging":"")," ").concat(w," ").concat(i)},C,{onClick:this._onPreventClick,style:I}),this.renderAbles(),this._renderLines())},t.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var e=this.props,n=e.parentMoveable,a=e.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!a&&!n&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},t.prototype.componentDidUpdate=function(e){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(e)},t.prototype.componentWillUnmount=function(){var e,n;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(e=this._reiszeObserver)===null||e===void 0||e.disconnect(),(n=this._mutationObserver)===null||n===void 0||n.disconnect();var a=this._viewContainer;a&&this._changeAbleViewClassNames([]),ge(this,!1),ge(this,!0);var i=this.events;for(var o in i){var s=i[o];s&&s.destroy()}},t.prototype.getTargets=function(){var e=this.props.target;return e?[e]:[]},t.prototype.getAble=function(e){var n=this.props.ables||[];return dr(n,function(a){return a.name===e})},t.prototype.getContainer=function(){var e=this.props,n=e.parentMoveable,a=e.wrapperMoveable,i=e.container;return i||a&&a.getContainer()||n&&n.getContainer()||this.controlBox.parentElement},t.prototype.getControlBoxElement=function(){return this.controlBox},t.prototype.getDragElement=function(){return this._dragTarget},t.prototype.isMoveableElement=function(e){var n;return e&&(((n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"class"))||"").indexOf(ci)>-1},t.prototype.dragStart=function(e,n){n===void 0&&(n=e.target);var a=this.targetGesto,i=this.controlGesto;return a&&Ri(this)({inputEvent:e},n)?a.isFlag()||a.triggerDragStart(e):i&&this.isMoveableElement(n)&&(i.isFlag()||i.triggerDragStart(e)),this},t.prototype.hitTest=function(e){var n=this.state,a=n.target,i=n.pos1,o=n.pos2,s=n.pos3,l=n.pos4,u=n.targetClientRect;if(!a)return 0;var f;if(Me(e)){var c=e.getBoundingClientRect();f={left:c.left,top:c.top,width:c.width,height:c.height}}else f=T({width:0,height:0},e);var v=f.left,d=f.top,p=f.width,h=f.height,g=so([i,o,l,s],u),m=Cc(g,[[v,d],[v+p,d],[v+p,d+h],[v,d+h]]),_=js(g);return!m||!_?0:Math.min(100,m/_*100)},t.prototype.isInside=function(e,n){var a=this.state,i=a.target,o=a.pos1,s=a.pos2,l=a.pos3,u=a.pos4,f=a.targetClientRect;return i?Ra([e,n],so([o,s,u,l],f)):!1},t.prototype.updateRect=function(e,n,a){a===void 0&&(a=!0);var i=this.props,o=!i.parentPosition&&!i.wrapperMoveable;o&&ye(!0);var s=i.parentMoveable,l=this.state,u=l.target||i.target,f=this.getContainer(),c=s?s._rootContainer:this._rootContainer,v=qa(this.controlBox,u,f,f,c||f,this._getRequestStyles());if(!u&&this._hasFirstTarget&&i.persistData){var d=Fo(i.persistData);for(var p in d)v[p]=d[p]}o&&ye(),this.updateState(v,s?!1:a)},t.prototype.isDragging=function(e){var n,a,i=this.targetGesto,o=this.controlGesto;if(i!=null&&i.isFlag()){if(!e)return!0;var s=i.getEventData();return!!(!((n=s[e])===null||n===void 0)&&n.isEventStart)}if(o!=null&&o.isFlag()){if(!e)return!0;var s=o.getEventData();return!!(!((a=s[e])===null||a===void 0)&&a.isEventStart)}return!1},t.prototype.updateTarget=function(e){this.updateRect(e,!0)},t.prototype.getRect=function(){var e=this.state,n=Sr(this.state),a=R(n,4),i=a[0],o=a[1],s=a[2],l=a[3],u=_r(n),f=e.width,c=e.height,v=u.width,d=u.height,p=u.left,h=u.top,g=[e.left,e.top],m=xt(g,e.origin),_=xt(g,e.beforeOrigin),b=e.transformOrigin;return{width:v,height:d,left:p,top:h,pos1:i,pos2:o,pos3:s,pos4:l,offsetWidth:f,offsetHeight:c,beforeOrigin:_,origin:m,transformOrigin:b,rotation:this.getRotation()}},t.prototype.getManager=function(){return this},t.prototype.stopDrag=function(e){if(!e||e==="target"){var n=this.targetGesto;(n==null?void 0:n.isIdle())===!1&&Ya(this,!1),n==null||n.stop()}if(!e||e==="control"){var n=this.controlGesto;(n==null?void 0:n.isIdle())===!1&&Ya(this,!0),n==null||n.stop()}},t.prototype.getRotation=function(){var e=this.state,n=e.pos1,a=e.pos2,i=e.direction;return Od(n,a,i)},t.prototype.request=function(e,n,a){n===void 0&&(n={});var i=this,o=i.props,s=o.parentMoveable||o.wrapperMoveable||i,l=s.props.ables,u=o.groupable,f=dr(l,function(m){return m.name===e});if(this.isDragging()||!f||!f.request)return{request:function(){return this},requestEnd:function(){return this}};var c=f.request(i),v=a||n.isInstant,d=c.isControl?"controlAbles":"targetAbles",p="".concat(u?"Group":"").concat(c.isControl?"Control":""),h=Z([],R(s[d]),!1),g={request:function(m){return Ye(i,h,["drag"],p,"",T(T({},c.request(m)),{requestAble:e,isRequest:!0}),v),g},requestEnd:function(){return Ye(i,h,["drag"],p,"End",T(T({},c.requestEnd()),{requestAble:e,isRequest:!0}),v),g}};return Ye(i,h,["drag"],p,"Start",T(T({},c.requestStart(n)),{requestAble:e,isRequest:!0}),v),v?g.request(n).requestEnd():g},t.prototype.getMoveables=function(){return[this]},t.prototype.destroy=function(){this.componentWillUnmount()},t.prototype.updateRenderPoses=function(){var e=this.getState(),n=this.props,a=n.padding,i=e.originalBeforeOrigin,o=e.transformOrigin,s=e.allMatrix,l=e.is3d,u=e.pos1,f=e.pos2,c=e.pos3,v=e.pos4,d=e.left,p=e.top,h=e.isPersisted,g=n.zoom||1;if(!a&&g<=1){e.renderPoses=[u,f,c,v],e.renderLines=[[u,f],[f,v],[v,c],[c,u]];return}var m=Ul(a||{}),_=m.left,b=m.top,S=m.bottom,y=m.right,D=l?4:3,x=[];h?x=o:this.controlBox&&n.groupable?x=i:x=xt(i,[d,p]);var E=Pn(D,ie(x.map(function(I){return-I}),D),s,ie(o,D)),C=mr(E,u,[-_,-b],D),w=mr(E,f,[y,-b],D),P=mr(E,c,[-_,S],D),O=mr(E,v,[y,S],D);if(e.renderPoses=[C,w,P,O],e.renderLines=[[C,w],[w,O],[O,P],[P,C]],g){var M=g/2;e.renderLines=[[mr(E,u,[-_-M,-b],D),mr(E,f,[y+M,-b],D)],[mr(E,f,[y,-b-M],D),mr(E,v,[y,S+M],D)],[mr(E,v,[y+M,S],D),mr(E,c,[-_-M,S],D)],[mr(E,c,[-_,S+M],D),mr(E,u,[-_,-b-M],D)]]}},t.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var e=this.props,n=e.target,a=e.container,i=e.parentMoveable,o=this.state,s=o.target,l=o.container;if(!(!s&&!n)){this.updateAbles();var u=!Xa(s,n),f=u||!Xa(l,a);if(f){var c=a||this.controlBox;c&&this.unsetAbles(),this.updateState({target:n,container:a}),!i&&c&&this.updateRect("End",!1,!1),this._isPropTargetChanged=u}}},t.prototype.waitToChangeTarget=function(){return new Promise(function(){})},t.prototype.triggerEvent=function(e,n){var a=this.props;if(this._emitter.trigger(e,n),a.parentMoveable&&n.isRequest&&!n.isRequestChild)return a.parentMoveable.triggerEvent(e,n,!0);var i=a[e];return i&&i(n)},t.prototype.useCSS=function(e,n){var a=this.props.customStyledMap,i=e+n;return a[i]||(a[i]=Ks(e,n)),a[i]},t.prototype.getState=function(){var e,n=this.props;(n.target||!((e=n.targets)===null||e===void 0)&&e.length)&&(this._hasFirstTarget=!0);var a=this.controlBox,i=n.persistData,o=n.firstRenderState;if(o&&!a)return o;if(!this._hasFirstTarget&&i){var s=Fo(i);if(s)return this.updateState(s,!1),this.state}return this.state.isPersisted=!1,this.state},t.prototype.updateSelectors=function(){},t.prototype.unsetAbles=function(){var e=this;this.targetAbles.forEach(function(n){n.unset&&n.unset(e)})},t.prototype.updateAbles=function(e,n){e===void 0&&(e=this.props.ables),n===void 0&&(n="");var a=this.props,i=a.triggerAblesSimultaneously,o=this.getEnabledAbles(e),s="drag".concat(n,"Start"),l="pinch".concat(n,"Start"),u="drag".concat(n,"ControlStart"),f=Sn(o,[s,l],i),c=Sn(o,[u],i);this.enabledAbles=o,this.targetAbles=f,this.controlAbles=c},t.prototype.updateState=function(e,n){if(n){if(this.isUnmounted)return;this.setState(e)}else{var a=this.state;for(var i in e)a[i]=e[i]}},t.prototype.getEnabledAbles=function(e){e===void 0&&(e=this.props.ables);var n=this.props;return e.filter(function(a){return a&&(a.always&&n[a.name]!==!1||n[a.name])})},t.prototype.renderAbles=function(){var e=this,n=this.props,a=n.triggerAblesSimultaneously,i={createElement:Dr};return this.renderState={},wd(Yl(Sn(this.getEnabledAbles(),["render"],a).map(function(o){var s=o.render;return s(e,i)||[]})).filter(function(o){return o}),function(o){var s=o.key;return s}).map(function(o){return o[0]})},t.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},t.prototype._getRequestStyles=function(){var e=this.getEnabledAbles().reduce(function(n,a){var i,o,s=(o=(i=a.requestStyle)===null||i===void 0?void 0:i.call(a))!==null&&o!==void 0?o:[];return Z(Z([],R(n),!1),R(s),!1)},Z([],R(this.props.requestStyles||[]),!1));return e},t.prototype._updateObserver=function(e){this._updateResizeObserver(e),this._updateMutationObserver(e)},t.prototype._updateEvents=function(){var e=this.targetAbles.length,n=this.controlAbles.length,a=this._dragTarget,i=!e&&this.targetGesto||this._isTargetChanged(!0);i&&(ge(this,!1),this.updateState({gestos:{}})),n||ge(this,!0),a&&e&&!this.targetGesto&&(this.targetGesto=au(this,a,"")),!this.controlGesto&&n&&(this.controlGesto=iu(this,"Control"))},t.prototype._updateTargets=function(){var e=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=e.dragArea,this._propTarget=e.target,this._originalDragTarget=e.dragTarget||e.target,this._dragTarget=Tr(this._originalDragTarget,!0)},t.prototype._renderLines=function(){var e=this.props,n=e,a=n.zoom,i=n.hideDefaultLines,o=n.hideChildMoveableDefaultLines,s=n.parentMoveable;if(i||s&&o)return[];var l=this.getState(),u={createElement:Dr};return l.renderLines.map(function(f,c){return je(u,"",f[0],f[1],a,"render-line-".concat(c))})},t.prototype._isTargetChanged=function(e){var n=this.props,a=n.dragTarget||n.target,i=this._prevOriginalDragTarget,o=this._prevDragArea,s=n.dragArea,l=!s&&i!==a,u=(e||s)&&o!==s;return l||u||this._prevPropTarget!=this._propTarget},t.prototype._updateNativeEvents=function(){var e=this,n=this.props,a=n.dragArea?this.areaElement:this.state.target,i=this.events,o=Nr(i);if(this._isTargetChanged())for(var s in i){var l=i[s];l&&l.destroy(),i[s]=null}if(a){var u=this.enabledAbles;o.forEach(function(f){var c=Sn(u,[f]),v=c.length>0,d=i[f];if(!v){d&&(d.destroy(),i[f]=null);return}d||(d=new ap(a,e,f),i[f]=d),d.setAbles(c)})}},t.prototype._checkUpdateRootContainer=function(){var e=this.props.rootContainer;!this._rootContainer&&e&&(this._rootContainer=Tr(e,!0))},t.prototype._checkUpdateViewContainer=function(){var e=this.props.viewContainer;!this._viewContainer&&e&&(this._viewContainer=Tr(e,!0));var n=this._viewContainer;n&&this._changeAbleViewClassNames(Z(Z([],R(this._getAbleViewClassNames()),!1),[this.isDragging()?Bd:""],!1))},t.prototype._changeAbleViewClassNames=function(e){var n=this._viewContainer,a=Wl(e.filter(Boolean),function(u){return u}).map(function(u){var f=R(u,1),c=f[0];return c}),i=this._viewClassNames,o=tn(i,a),s=o.removed,l=o.added;s.forEach(function(u){Ds(n,i[u])}),l.forEach(function(u){ys(n,a[u])}),this._viewClassNames=a},t.prototype._getAbleViewClassNames=function(){var e=this;return(this.getEnabledAbles().map(function(n){var a;return((a=n.viewClassName)===null||a===void 0?void 0:a.call(n,e))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},t.prototype._getAbleClassName=function(e){var n=this;e===void 0&&(e="");var a=this.getEnabledAbles(),i=this.targetGesto,o=this.controlGesto,s=i!=null&&i.isFlag()?i.getEventData():{},l=o!=null&&o.isFlag()?o.getEventData():{};return a.map(function(u){var f,c,v,d=u.name,p=((f=u.className)===null||f===void 0?void 0:f.call(u,n))||"";return(!((c=s[d])===null||c===void 0)&&c.isEventStart||!((v=l[d])===null||v===void 0)&&v.isEventStart)&&(p+=" ".concat(ot("".concat(d).concat(e,"-dragging")))),p.trim()}).filter(Boolean).join(" ")},t.prototype._updateResizeObserver=function(e){var n,a=this.props,i=a.target,o=Wr(this.getControlBoxElement());if(!o.ResizeObserver||!i||!a.useResizeObserver){(n=this._reiszeObserver)===null||n===void 0||n.disconnect();return}if(!(e.target===i&&this._reiszeObserver)){var s=new o.ResizeObserver(this.checkUpdateRect);s.observe(i,{box:"border-box"}),this._reiszeObserver=s}},t.prototype._updateMutationObserver=function(e){var n=this,a,i=this.props,o=i.target,s=Wr(this.getControlBoxElement());if(!s.MutationObserver||!o||!i.useMutationObserver){(a=this._mutationObserver)===null||a===void 0||a.disconnect();return}if(!(e.target===o&&this._mutationObserver)){var l=new s.MutationObserver(function(u){var f,c;try{for(var v=Vc(u),d=v.next();!d.done;d=v.next()){var p=d.value;p.type==="attributes"&&p.attributeName==="style"&&n.checkUpdateRect()}}catch(h){f={error:h}}finally{try{d&&!d.done&&(c=v.return)&&c.call(v)}finally{if(f)throw f.error}}});l.observe(o,{attributes:!0}),this._mutationObserver=l}},t.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:zl,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},t}(Rs),Ii={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(r,t){var e,n=r.props,a=n.targets||[],i=r.getState(),o=i.left,s=i.top,l=i.isPersisted,u=n.zoom||1,f=r.renderGroupRects,c=((e=n.persistData)===null||e===void 0?void 0:e.children)||[];l?a=c.map(function(){return null}):c=[];var v=me(r,"parentPosition",[o,s],function(p){return p.join(",")}),d=me(r,"requestStyles",r.getRequestChildStyles(),function(p){return p.join(",")});return r.moveables=r.moveables.slice(0,a.length),Z(Z([],R(a.map(function(p,h){return t.createElement(Ce,{key:"moveable"+h,ref:ds(r,"moveables",h),target:p,origin:!1,requestStyles:d,cssStyled:n.cssStyled,customStyledMap:n.customStyledMap,useResizeObserver:n.useResizeObserver,useMutationObserver:n.useMutationObserver,hideChildMoveableDefaultLines:n.hideChildMoveableDefaultLines,parentMoveable:r,parentPosition:[o,s],persistData:c[h],zoom:u})})),!1),R(Yl(f.map(function(p,h){var g=p.pos1,m=p.pos2,_=p.pos3,b=p.pos4,S=[g,m,_,b];return[[0,1],[1,3],[3,2],[2,0]].map(function(y,D){var x=R(y,2),E=x[0],C=x[1];return je(t,"",st(S[E],v),st(S[C],v),u,"group-rect-".concat(h,"-").concat(D))})}))),!1)}},sp=sn("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(r,t){t.datas.inputTarget=t.inputEvent&&t.inputEvent.target},dragEnd:function(r,t){var e=r.props.target,n=t.inputEvent,a=t.inputTarget,i=r.isMoveableElement(a),o=!i&&r.controlBox.contains(a);if(!(!n||!a||t.isDrag||r.isMoveableElement(a)||o)){var s=e.contains(a);rt(r,"onClick",gt(r,t,{isDouble:t.isDouble,inputTarget:a,isTarget:e===a,moveableTarget:r.props.target,containsTarget:s}))}},dragGroupEnd:function(r,t){var e=t.inputEvent,n=t.inputTarget;if(!(!e||!n||t.isDrag||r.isMoveableElement(n)||t.datas.inputTarget===n)){var a=r.props.targets,i=a.indexOf(n),o=i>-1,s=!1;i===-1&&(i=Gr(a,function(l){return l.contains(n)}),s=i>-1),rt(r,"onClickGroup",gt(r,t,{isDouble:t.isDouble,targets:a,inputTarget:n,targetIndex:i,isTarget:o,containsTarget:s,moveableTarget:a[i]}))}},dragControlEnd:function(r,t){this.dragEnd(r,t)},dragGroupControlEnd:function(r,t){this.dragEnd(r,t)}});function ce(r){var t=r.originalDatas.draggable;return t||(r.originalDatas.draggable={},t=r.originalDatas.draggable),T(T({},r),{datas:t})}var lp=sn("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(r,t){var e=r.props,n=e.edgeDraggable;return n?dl(t,"edgeDraggable",n,r.getState().renderPoses,e.zoom):[]},dragCondition:function(r,t){var e,n=r.props,a=(e=t.inputEvent)===null||e===void 0?void 0:e.target;return!n.edgeDraggable||!a?!1:!n.draggable&&Ut(a,ot("direction"))&&Ut(a,ot("edge"))&&Ut(a,ot("edgeDraggable"))},dragStart:function(r,t){return sr.dragStart(r,ce(t))},drag:function(r,t){return sr.drag(r,ce(t))},dragEnd:function(r,t){return sr.dragEnd(r,ce(t))},dragGroupCondition:function(r,t){var e,n=r.props,a=(e=t.inputEvent)===null||e===void 0?void 0:e.target;return!n.edgeDraggable||!a?!1:!n.draggable&&Ut(a,ot("direction"))&&Ut(a,ot("line"))},dragGroupStart:function(r,t){return sr.dragGroupStart(r,ce(t))},dragGroup:function(r,t){return sr.dragGroup(r,ce(t))},dragGroupEnd:function(r,t){return sr.dragGroupEnd(r,ce(t))},unset:function(r){return sr.unset(r)}}),su={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},Pi=[eu,Jl,dd,Id,sr,lp,La,Pd,Ad,Uv,Fd,Ld,Gd,Jd,Kd,ep,Ii,su,sp,Kl,nu],up=Pi.reduce(function(r,t){return(t.events||[]).forEach(function(e){Es(r,e)}),r},[]),fp=Pi.reduce(function(r,t){return(t.props||[]).forEach(function(e){Es(r,e)}),r},[]);function Lo(r,t){var e=R(r,3),n=e[0],a=e[1],i=e[2];return(n*t[0]+a*t[1]+i)/Math.sqrt(n*n+a*a)}function Dn(r,t){var e=R(r,2),n=e[0],a=e[1];return-n*t[0]-a*t[1]}function Ho(r,t){return Math.max.apply(Math,Z([],R(r.map(function(e){var n=R(e,4),a=n[0],i=n[1],o=n[2],s=n[3];return Math.max(a[t],i[t],o[t],s[t])})),!1))}function Vo(r,t){return Math.min.apply(Math,Z([],R(r.map(function(e){var n=R(e,4),a=n[0],i=n[1],o=n[2],s=n[3];return Math.min(a[t],i[t],o[t],s[t])})),!1))}function cp(r,t){var e,n,a,i=[0,0],o=[0,0],s=[0,0],l=[0,0],u=0,f=0;if(!r.length)return{pos1:i,pos2:o,pos3:s,pos4:l,minX:0,minY:0,maxX:0,maxY:0,width:u,height:f,rotation:t};var c=pt(t,fr);if(c%90){var v=c/180*Math.PI,d=Math.tan(v),p=-1/d,h=[Ba,fo],g=[[0,0],[0,0]],m=[Ba,fo],_=[[0,0],[0,0]];r.forEach(function(q){q.forEach(function(j){var Q=Lo([-d,1,0],j),U=Lo([-p,1,0],j);h[0]>Q&&(g[0]=j,h[0]=Q),h[1]<Q&&(g[1]=j,h[1]=Q),m[0]>U&&(_[0]=j,m[0]=U),m[1]<U&&(_[1]=j,m[1]=U)})});var b=R(g,2),S=b[0],y=b[1],D=R(_,2),x=D[0],E=D[1],C=[-d,1,Dn([-d,1],S)],w=[-d,1,Dn([-d,1],y)],P=[-p,1,Dn([-p,1],x)],O=[-p,1,Dn([-p,1],E)];e=R([[C,P],[C,O],[w,P],[w,O]].map(function(q){var j=R(q,2),Q=j[0],U=j[1];return ui(Q,U)[0]}),4),i=e[0],o=e[1],s=e[2],l=e[3],u=m[1]-m[0],f=h[1]-h[0]}else{var M=Vo(r,0),I=Vo(r,1),z=Ho(r,0),F=Ho(r,1);if(i=[M,I],o=[z,I],s=[M,F],l=[z,F],u=z-M,f=F-I,c%180){var H=[s,i,l,o];n=R(H,4),i=n[0],o=n[1],s=n[2],l=n[3],u=F-I,f=z-M}}if(c%360>180){var H=[l,s,o,i];a=R(H,4),i=a[0],o=a[1],s=a[2],l=a[3]}var V=oe([i,o,s,l]),B=V.minX,G=V.minY,A=V.maxX,X=V.maxY;return{pos1:i,pos2:o,pos3:s,pos4:l,width:u,height:f,minX:B,minY:G,maxX:A,maxY:X,rotation:t}}function lu(r,t){var e=t.map(function(n){if($t(n)){var a=lu(r,n),i=a.length;return i>1?a:i===1?a[0]:null}else{var o=dr(r,function(s){var l=s.manager;return l.props.target===n});return o?(o.finded=!0,o.manager):null}}).filter(Boolean);return e.length===1&&$t(e[0])?e[0]:e}var vp=function(r){on(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.differ=new qs,e.moveables=[],e.transformOrigin="50% 50%",e.renderGroupRects=[],e._targetGroups=[],e._hasFirstTargets=!1,e}return t.prototype.componentDidMount=function(){r.prototype.componentDidMount.call(this)},t.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},t.prototype.getTargets=function(){return this.props.targets},t.prototype.updateRect=function(e,n,a){var i;a===void 0&&(a=!0);var o=this.state;if(!this.controlBox||o.isPersisted)return;ye(!0),this.moveables.forEach(function(et){et.updateRect(e,!1,!1)});var s=this.props,l=this.moveables,u=o.target||s.target,f=l.map(function(et){return{finded:!1,manager:et}}),c=this.props.targetGroups||[],v=lu(f,c),d=s.useDefaultGroupRotate;v.push.apply(v,Z([],R(f.filter(function(et){var vt=et.finded;return!vt}).map(function(et){var vt=et.manager;return vt})),!1));var p=[],h=!n||e!==""&&s.updateGroup,g=s.defaultGroupRotate||0;if(!this._hasFirstTargets){var m=(i=s.persistData)===null||i===void 0?void 0:i.rotation;m!=null&&(g=m)}function _(et,vt,mt){var J=et.map(function(yt){if($t(yt)){var dt=_(yt,vt),Et=[dt.pos1,dt.pos2,dt.pos3,dt.pos4];return p.push(dt),{poses:Et,rotation:dt.rotation}}else return{poses:Sr(yt.state),rotation:yt.getRotation()}}),nt=J.map(function(yt){var dt=yt.rotation;return dt}),Dt=0,ut=nt[0],ft=nt.every(function(yt){return Math.abs(ut-yt)<.1});h?Dt=!d&&ft?ut:g:Dt=!d&&!mt&&ft?ut:vt;var lt=J.map(function(yt){var dt=yt.poses;return dt}),_t=cp(lt,Dt);return _t}var b=_(v,this.rotation,!0);h&&(this.rotation=b.rotation,this.transformOrigin=s.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=c,this.renderGroupRects=p;var S=this.transformOrigin,y=this.rotation,D=this.scale,x=b.width,E=b.height,C=b.minX,w=b.minY,P=Rd([[0,0],[x,0],[0,E],[x,E]],Mi(S,x,E),this.rotation/180*Math.PI),O=oe(P.result),M=O.minX,I=O.minY,z=" rotate(".concat(y,"deg)")+" scale(".concat(lr(D[0]),", ").concat(lr(D[1]),")"),F="translate(".concat(-M,"px, ").concat(-I,"px)").concat(z);this.controlBox.style.transform="translate3d(".concat(C,"px, ").concat(w,"px, ").concat(this.props.translateZ||0,")"),u.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(S,";")+"width:".concat(x,"px;height:").concat(E,"px;")+"transform: ".concat(F),o.width=x,o.height=E;var H=this.getContainer(),V=qa(this.controlBox,u,this.controlBox,this.getContainer(),this._rootContainer||H,[]),B=[V.left,V.top],G=R(Sr(V),4),A=G[0],X=G[1],q=G[2],j=G[3],Q=oe([A,X,q,j]),U=[Q.minX,Q.minY],tt=lr(D[0]*D[1]);V.pos1=st(A,U),V.pos2=st(X,U),V.pos3=st(q,U),V.pos4=st(j,U),V.left=C-V.left+U[0],V.top=w-V.top+U[1],V.origin=st(xt(B,V.origin),U),V.beforeOrigin=st(xt(B,V.beforeOrigin),U),V.originalBeforeOrigin=xt(B,V.originalBeforeOrigin),V.transformOrigin=st(xt(B,V.transformOrigin),U),u.style.transform="translate(".concat(-M-U[0],"px, ").concat(-I-U[1],"px)")+z,ye(),this.updateState(T(T({},V),{posDelta:U,direction:tt,beforeDirection:tt}),a)},t.prototype.getRect=function(){return T(T({},r.prototype.getRect.call(this)),{children:this.moveables.map(function(e){return e.getRect()})})},t.prototype.triggerEvent=function(e,n,a){if(a||e.indexOf("Group")>-1)return r.prototype.triggerEvent.call(this,e,n);this._emitter.trigger(e,n)},t.prototype.getRequestChildStyles=function(){var e=this.getEnabledAbles().reduce(function(n,a){var i,o,s=(o=(i=a.requestChildStyle)===null||i===void 0?void 0:i.call(a))!==null&&o!==void 0?o:[];return Z(Z([],R(n),!1),R(s),!1)},[]);return e},t.prototype.getMoveables=function(){return Z([],R(this.moveables),!1)},t.prototype.updateAbles=function(){r.prototype.updateAbles.call(this,Z(Z([],R(this.props.ables),!1),[Ii],!1),"Group")},t.prototype._updateTargets=function(){r.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=Tr(this._originalDragTarget,!0)},t.prototype._updateEvents=function(){var e=this.state,n=this.props,a=this._prevDragTarget,i=n.dragTarget||this.areaElement,o=n.targets,s=this.differ.update(o),l=s.added,u=s.changed,f=s.removed,c=l.length||f.length;(c||this._prevOriginalDragTarget!==this._originalDragTarget)&&(ge(this,!1),ge(this,!0),this.updateState({gestos:{}})),a!==i&&(e.target=null),e.target||(e.target=this.areaElement,this.controlBox.style.display="block"),e.target&&(this.targetGesto||(this.targetGesto=au(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=iu(this,"GroupControl")));var v=!Xa(e.container,n.container);v&&(e.container=n.container),(v||c||this.transformOrigin!==(n.defaultGroupOrigin||"50% 50%")||u.length||o.length&&!jl(this._targetGroups,n.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!c},t.prototype._updateObserver=function(){},t.defaultProps=T(T({},Ce.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),t}(Ce),dp=function(r){on(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.moveables=[],e}return t.prototype.render=function(){var e=this,n,a=this.props,i=a.cspNonce,o=a.cssStyled,s=a.persistData,l=a.targets||[],u=l.length,f=this.isUnmounted||!u,c=(n=s==null?void 0:s.children)!==null&&n!==void 0?n:[];return f&&!u&&c.length?l=c.map(function(){return null}):f||(c=[]),Dr(o,{cspNonce:i,ref:Pr(this,"controlBox"),className:ot("control-box")},l.map(function(v,d){var p,h,g=(h=(p=a.individualGroupableProps)===null||p===void 0?void 0:p.call(a,v,d))!==null&&h!==void 0?h:{};return Dr(Ce,T({key:"moveable"+d,ref:ds(e,"moveables",d)},a,g,{target:v,wrapperMoveable:e,isWrapperMounted:e.isMoveableMounted,persistData:c[d]}))}))},t.prototype.componentDidMount=function(){},t.prototype.componentDidUpdate=function(){},t.prototype.getTargets=function(){return this.props.targets},t.prototype.updateRect=function(e,n,a){a===void 0&&(a=!0),ye(!0),this.moveables.forEach(function(i){i.updateRect(e,n,a)}),ye()},t.prototype.getRect=function(){return T(T({},r.prototype.getRect.call(this)),{children:this.moveables.map(function(e){return e.getRect()})})},t.prototype.request=function(e,n,a){n===void 0&&(n={});var i=this.moveables.map(function(l){return l.request(e,T(T({},n),{isInstant:!1}),!1)}),o=a||n.isInstant,s={request:function(l){return i.forEach(function(u){return u.request(l)}),this},requestEnd:function(){return i.forEach(function(l){return l.requestEnd()}),this}};return o?s.request(n).requestEnd():s},t.prototype.dragStart=function(e,n){n===void 0&&(n=e.target);var a=n,i=dr(this.moveables,function(o){var s=o.getTargets()[0],l=o.getControlBoxElement(),u=o.getDragElement();return!s||!u?!1:u===a||u.contains(a)||u!==s&&s===a||s.contains(a)||l===a||l.contains(a)});return i&&i.dragStart(e,n),this},t.prototype.hitTest=function(){return 0},t.prototype.isInside=function(){return!1},t.prototype.isDragging=function(){return!1},t.prototype.getDragElement=function(){return null},t.prototype.getMoveables=function(){return Z([],R(this.moveables),!1)},t.prototype.updateRenderPoses=function(){},t.prototype.checkUpdate=function(){},t.prototype.triggerEvent=function(){},t.prototype.updateAbles=function(){},t.prototype._updateEvents=function(){},t.prototype._updateObserver=function(){},t}(Ce);function uu(r,t){var e=[];return r.forEach(function(n){if(n){if(vr(n)){t[n]&&e.push.apply(e,Z([],R(t[n]),!1));return}$t(n)?e.push.apply(e,Z([],R(uu(n,t)),!1)):e.push(n)}}),e}function fu(r,t){var e=[];return r.forEach(function(n){if(n){if(vr(n)){t[n]&&e.push.apply(e,Z([],R(t[n]),!1));return}$t(n)?e.push(fu(n,t)):e.push(n)}}),e}function cu(r,t){return r.length!==t.length||r.some(function(e,n){var a=t[n];return!e&&!a?!1:e!=a?$t(e)&&$t(a)?cu(e,a):!0:!1})}var pp=function(r){on(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.refTargets=[],e.selectorMap={},e._differ=new qs,e._elementTargets=[],e._tmpRefTargets=[],e._tmpSelectorMap={},e._onChangeTargets=null,e}return t.makeStyled=function(){var e={},n=this.getTotalAbles();n.forEach(function(i){var o=i.css;o&&o.forEach(function(s){e[s]=!0})});var a=Nr(e).join(`
`);this.defaultStyled=Ks("div",uf(ci,Qc+a))},t.getTotalAbles=function(){return Z([Jl,Ii,su,Kl],R(this.defaultAbles),!1)},t.prototype.render=function(){var e,n=this.constructor;n.defaultStyled||n.makeStyled();var a=this.props,i=a.ables,o=a.props,s=Lc(a,["ables","props"]),l=R(this._updateRefs(!0),2),u=l[0],f=l[1],c=uu(u,f),v=c.length>1,d=n.getTotalAbles(),p=Z(Z([],R(d),!1),R(i||[]),!1),h=T(T(T({},s),o||{}),{ables:p,cssStyled:n.defaultStyled,customStyledMap:n.customStyledMap});this._elementTargets=c;var g=null,m=this.moveable,_=s.persistData;if(_!=null&&_.children&&(v=!0),s.individualGroupable)return Dr(dp,T({key:"individual-group",ref:Pr(this,"moveable")},h,{target:null,targets:c}));if(v){var b=fu(u,f);if(m&&!m.props.groupable&&!m.props.individualGroupable){var S=m.props.target;S&&c.indexOf(S)>-1&&(g=T({},m.state))}return Dr(vp,T({key:"group",ref:Pr(this,"moveable")},h,(e=s.groupableProps)!==null&&e!==void 0?e:{},{target:null,targets:c,targetGroups:b,firstRenderState:g}))}else{var y=c[0];if(m&&(m.props.groupable||m.props.individualGroupable)){var D=m.moveables||[],x=dr(D,function(E){return E.props.target===y});x&&(g=T({},x.state))}return Dr(Ce,T({key:"single",ref:Pr(this,"moveable")},h,{target:y,firstRenderState:g}))}},t.prototype.componentDidMount=function(){this._checkChangeTargets()},t.prototype.componentDidUpdate=function(){this._checkChangeTargets()},t.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},t.prototype.getTargets=function(){var e,n;return(n=(e=this.moveable)===null||e===void 0?void 0:e.getTargets())!==null&&n!==void 0?n:[]},t.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},t.prototype.waitToChangeTarget=function(){var e=this,n;return this._onChangeTargets=function(){e._onChangeTargets=null,n()},new Promise(function(a){n=a})},t.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},t.prototype.getManager=function(){return this.moveable},t.prototype.getMoveables=function(){return this.moveable.getMoveables()},t.prototype.getDragElement=function(){return this.moveable.getDragElement()},t.prototype._updateRefs=function(e){var n=this.refTargets,a=wi(this.props.target||this.props.targets),i=typeof document<"u",o=cu(n,a),s=this.selectorMap,l={};return this.refTargets.forEach(function u(f){if(vr(f)){var c=s[f];c?l[f]=s[f]:i&&(o=!0,l[f]=[].slice.call(document.querySelectorAll(f)))}else $t(f)&&f.forEach(u)}),this._tmpRefTargets=a,this._tmpSelectorMap=l,[a,l,!e&&o]},t.prototype._checkChangeTargets=function(){var e,n,a;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var i=this._differ.update(this._elementTargets),o=i.added,s=i.removed,l=o.length||s.length;l&&((n=(e=this.props).onChangeTargets)===null||n===void 0||n.call(e,{moveable:this.moveable,targets:this._elementTargets}),(a=this._onChangeTargets)===null||a===void 0||a.call(this));var u=R(this._updateRefs(),3),f=u[0],c=u[1],v=u[2];this.refTargets=f,this.selectorMap=c,v&&this.forceUpdate()},t.defaultAbles=[],t.customStyledMap={},t.defaultStyled=null,Hc([ff(nl)],t.prototype,"moveable",void 0),t}(Rs),hp=function(r){on(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.defaultAbles=Pi,t}(pp),ja=function(r,t){return ja=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])},ja(r,t)};function zi(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");ja(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Ze=function(){return Ze=Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ze.apply(this,arguments)};function gp(r,t,e,n){var a=arguments.length,i=a<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,n);else for(var s=r.length-1;s>=0;s--)(o=r[s])&&(i=(a<3?o(i):a>3?o(t,e,i):o(t,e))||i);return a>3&&i&&Object.defineProperty(t,e,i),i}var mp=function(r){zi(t,r);function t(n){var a=r.call(this,n)||this;return a.state={},a.state=a.props,a}var e=t.prototype;return e.render=function(){return Dr(hp,Ze({ref:Pr(this,"moveable")},this.state))},t}(ni),vu=fp,du=nl,pu=up,_p=function(r){zi(t,r);function t(n,a){a===void 0&&(a={});var i=r.call(this)||this;i.containerProvider=null,i.selfElement=null,i._warp=!1;var o=Ze({},a),s={};pu.forEach(function(f){s[ms("on ".concat(f))]=function(c){return i.trigger(f,c)}});var l;a.warpSelf?(delete a.warpSelf,i._warp=!0,l=n):(l=we(n).createElement("div"),n.appendChild(l)),i.containerProvider=ao(Dr(mp,Ze({ref:Pr(i,"innerMoveable")},o,s)),l),i.selfElement=l;var u=o.target;return $t(u)&&u.length>1&&i.updateRect(),i}var e=t.prototype;return e.setState=function(n,a){this.innerMoveable.setState(n,a)},e.forceUpdate=function(n){this.innerMoveable.forceUpdate(n)},e.dragStart=function(n,a){a===void 0&&(a=n.target);var i=this.innerMoveable;i.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(n,a)},e.destroy=function(){var n,a=this.selfElement;ao(null,a,this.containerProvider),this._warp||(n=a==null?void 0:a.parentElement)===null||n===void 0||n.removeChild(a),this.containerProvider=null,this.off(),this.selfElement=null,this.innerMoveable=null},e.getMoveable=function(){return this.innerMoveable.moveable},t=gp([Ui(du,function(n,a){n[a]||(n[a]=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s=this.getMoveable();if(!(!s||!s[a]))return s[a].apply(s,i)})}),Ui(vu,function(n,a){Object.defineProperty(n,a,{get:function(){return this.getMoveable().props[a]},set:function(i){var o;this.setState((o={},o[a]=i,o))},enumerable:!0,configurable:!0})})],t),t}(Xn),bp=function(r){zi(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t}(_p);function Sp(r){let t;return{c(){t=W("div")},l(e){t=Y(e,"DIV",{}),K(t).forEach(L)},m(e,n){ht(e,t,n),r[2](t)},p:Ct,i:Ct,o:Ct,d(e){e&&L(t),r[2](null)}}}function Ep(r,t,e){const n=xu();let a={},i,o;Cu(()=>{const u=t;a={},vu.forEach(f=>{f in u&&(a[f]=u[f])}),o&&wu().then(()=>{o.setState({...a})})}),jr(()=>{o=new bp(i,{...a,warpSelf:!0}),pu.forEach(u=>{const f=ms(`on ${u}`);o.on(u,c=>{t[f]&&t[f](c),n(u,c)})})}),is(()=>{o&&o.destroy()});function s(){return o}function l(u){ne[u?"unshift":"push"](()=>{i=u,e(0,i)})}return r.$$set=u=>{e(6,t=Gi(Gi({},t),Ni(u)))},t=Ni(t),[i,s,l]}let yp=class extends Jt{constructor(t){super(),Qt(this,t,Ep,Sp,Kt,{getInstance:1})}get getInstance(){return this.$$.ctx[1]}};const Sa=yp,Dp=(()=>{const r=Sa.prototype;return r&&du.forEach(t=>{r[t]=function(...e){const n=this.getInstance(),a=n[t](...e);return a===n?this:a}}),Sa})();function Wo(r,t,e){const n=r.slice();return n[12]=t[e],n[14]=e,n}function Yo(r,t,e){const n=r.slice();return n[12]=t[e],n[14]=e,n}function Xo(r,t,e){const n=r.slice();return n[16]=t[e],n}function $o(r){let t,e;return t=new Dp({props:{target:r[2].currentApp.target,draggable:!0,throttleDrag:1,resizable:!0,throttleResize:1,bounds:{left:0,top:0,right:0,bottom:0,position:"css",minWidth:100,minHeight:100},renderDirections:["nw","ne","sw","se"],minWidth:100}}),t.$on("drag",wp),t.$on("resizeStart",r[5]),t.$on("resize",r[6]),t.$on("resizeEnd",r[7]),{c(){At(t.$$.fragment)},l(n){Ht(t.$$.fragment,n)},m(n,a){kt(t,n,a),e=!0},p(n,a){const i={};a&4&&(i.target=n[2].currentApp.target),t.$set(i)},i(n){e||(ct(t.$$.fragment,n),e=!0)},o(n){bt(t.$$.fragment,n),e=!1},d(n){Bt(t,n)}}}function qo(r){let t,e,n,a;return e=new sf({props:{id:r[16]}}),{c(){t=W("div"),At(e.$$.fragment),n=at()},l(i){t=Y(i,"DIV",{});var o=K(t);Ht(e.$$.fragment,o),n=it(o),o.forEach(L)},m(i,o){ht(i,t,o),kt(e,t,null),k(t,n),a=!0},p:Ct,i(i){a||(ct(e.$$.fragment,i),a=!0)},o(i){bt(e.$$.fragment,i),a=!1},d(i){i&&L(t),Bt(e)}}}function jo(r){let t,e,n,a,i=Or(r[4](r[14])),o=[];for(let l=0;l<i.length;l+=1)o[l]=qo(Xo(r,i,l));const s=l=>bt(o[l],1,1,()=>{o[l]=null});return{c(){t=W("div"),e=W("div");for(let l=0;l<o.length;l+=1)o[l].c();n=at(),this.h()},l(l){t=Y(l,"DIV",{class:!0});var u=K(t);e=Y(u,"DIV",{class:!0});var f=K(e);for(let c=0;c<o.length;c+=1)o[c].l(f);f.forEach(L),n=it(u),u.forEach(L),this.h()},h(){N(e,"class","grid grid-cols-4 grid-rows-4 lg:grid-cols-5 lg:grid-rows-3 w-full items-baseline text-center"),N(t,"class","carousel-item w-full")},m(l,u){ht(l,t,u),k(t,e);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);k(t,n),a=!0},p(l,u){if(u&16){i=Or(l[4](l[14]));let f;for(f=0;f<i.length;f+=1){const c=Xo(l,i,f);o[f]?(o[f].p(c,u),ct(o[f],1)):(o[f]=qo(c),o[f].c(),ct(o[f],1),o[f].m(e,null))}for(kr(),f=i.length;f<o.length;f+=1)s(f);Br()}},i(l){if(!a){for(let u=0;u<i.length;u+=1)ct(o[u]);a=!0}},o(l){o=o.filter(Boolean);for(let u=0;u<o.length;u+=1)bt(o[u]);a=!1},d(l){l&&L(t),Je(o,l)}}}function xp(r){let t,e=Or(r[3]),n=[];for(let a=0;a<e.length;a+=1)n[a]=Uo(Wo(r,e,a));return{c(){t=W("div");for(let a=0;a<n.length;a+=1)n[a].c();this.h()},l(a){t=Y(a,"DIV",{class:!0});var i=K(t);for(let o=0;o<n.length;o+=1)n[o].l(i);i.forEach(L),this.h()},h(){N(t,"class","page-nav rounded-full bg-base-100 flex p-2 gap-2 svelte-x5226g")},m(a,i){ht(a,t,i);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(t,null)},p(a,i){if(i&1){e=Or(a[3]);let o;for(o=0;o<e.length;o+=1){const s=Wo(a,e,o);n[o]?n[o].p(s,i):(n[o]=Uo(s),n[o].c(),n[o].m(t,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=e.length}},d(a){a&&L(t),Je(n,a)}}}function Uo(r){let t,e;return{c(){t=W("div"),this.h()},l(n){t=Y(n,"DIV",{class:!0}),K(t).forEach(L),this.h()},h(){N(t,"class",e="badge badge-xs "+(r[0]===r[14]?"active":"")+" svelte-x5226g")},m(n,a){ht(n,t,a)},p(n,a){a&1&&e!==(e="badge badge-xs "+(n[0]===n[14]?"active":"")+" svelte-x5226g")&&N(t,"class",e)},d(n){n&&L(t)}}}function Cp(r){let t,e,n,a,i,o=r[2].currentApp.state===St.OPEN&&$o(r),s=Or(r[3]),l=[];for(let c=0;c<s.length;c+=1)l[c]=jo(Yo(r,s,c));const u=c=>bt(l[c],1,1,()=>{l[c]=null});let f=r[3].length>1&&xp(r);return{c(){o&&o.c(),t=at(),e=W("section"),n=W("div");for(let c=0;c<l.length;c+=1)l[c].c();a=at(),f&&f.c(),this.h()},l(c){o&&o.l(c),t=it(c),e=Y(c,"SECTION",{class:!0});var v=K(e);n=Y(v,"DIV",{class:!0});var d=K(n);for(let p=0;p<l.length;p+=1)l[p].l(d);d.forEach(L),a=it(v),f&&f.l(v),v.forEach(L),this.h()},h(){N(n,"class","carousel rounded-box w-full"),N(e,"class","p-8 flex flex-col")},m(c,v){o&&o.m(c,v),ht(c,t,v),ht(c,e,v),k(e,n);for(let d=0;d<l.length;d+=1)l[d]&&l[d].m(n,null);r[8](n),k(e,a),f&&f.m(e,null),i=!0},p(c,[v]){if(c[2].currentApp.state===St.OPEN?o?(o.p(c,v),v&4&&ct(o,1)):(o=$o(c),o.c(),ct(o,1),o.m(t.parentNode,t)):o&&(kr(),bt(o,1,1,()=>{o=null}),Br()),v&16){s=Or(c[3]);let d;for(d=0;d<s.length;d+=1){const p=Yo(c,s,d);l[d]?(l[d].p(p,v),ct(l[d],1)):(l[d]=jo(p),l[d].c(),ct(l[d],1),l[d].m(n,null))}for(kr(),d=s.length;d<l.length;d+=1)u(d);Br()}c[3].length>1&&f.p(c,v)},i(c){if(!i){ct(o);for(let v=0;v<s.length;v+=1)ct(l[v]);i=!0}},o(c){bt(o),l=l.filter(Boolean);for(let v=0;v<l.length;v+=1)bt(l[v]);i=!1},d(c){c&&(L(t),L(e)),o&&o.d(c),Je(l,c),r[8](null),f&&f.d()}}}const wp=({detail:r})=>{r.target.style.transform=r.transform};function Mp(r,t,e){let n;ee(r,rr,h=>e(2,n=h));let a=n.config,i=Object.keys(a.apps);const o=new Array(Math.ceil(i.length/fn));let s=0,l;function u(h){return i.slice(h*fn,h*fn+fn)}function f(){const h=l.scrollLeft,g=l.offsetWidth,m=Math.round(h/g);m!==s&&e(0,s=m)}jr(()=>{l.addEventListener("scroll",f)});const c=()=>{rr.setAppResizing(!0)},v=({detail:h})=>{h.target.style.width=`${h.width}px`,h.target.style.height=`${h.height}px`,h.target.style.transform=h.drag.transform,rr.setAppDimensions(h.width,h.height)},d=()=>{rr.setAppResizing(!1)};function p(h){ne[h?"unshift":"push"](()=>{l=h,e(1,l)})}return[s,l,n,o,u,c,v,d,p]}class Tp extends Jt{constructor(t){super(),Qt(this,t,Mp,Cp,Kt,{})}}function Zo(r,t,e){const n=r.slice();return n[12]=t[e],n}function Ko(r){let t,e,n,a,i,o,s=r[1]&&Jo(r),l=Or(r[0]),u=[];for(let c=0;c<l.length;c+=1)u[c]=Qo(Zo(r,l,c));const f=c=>bt(u[c],1,1,()=>{u[c]=null});return{c(){t=W("div"),s&&s.c(),e=at();for(let c=0;c<u.length;c+=1)u[c].c();this.h()},l(c){t=Y(c,"DIV",{class:!0,style:!0});var v=K(t);s&&s.l(v),e=it(v);for(let d=0;d<u.length;d+=1)u[d].l(v);v.forEach(L),this.h()},h(){N(t,"class","appwindow-bar flex gap-2 items-center text-center justify-center rounded-badge p-3 bg-base-300 min-w-[17%] max-w-[80%] svelte-12rfyhz"),Ot(t,"width",r[2]+"%")},m(c,v){ht(c,t,v),s&&s.m(t,null),k(t,e);for(let d=0;d<u.length;d+=1)u[d]&&u[d].m(t,null);a=!0,i||(o=[Nt(t,"mouseenter",r[7]),Nt(t,"mouseleave",r[7]),Nt(t,"touchstart",r[7],{passive:!0}),Nt(t,"touchend",r[7],{passive:!0})],i=!0)},p(c,v){if(c[1]?s?s.p(c,v):(s=Jo(c),s.c(),s.m(t,e)):s&&(s.d(1),s=null),v&33){l=Or(c[0]);let d;for(d=0;d<l.length;d+=1){const p=Zo(c,l,d);u[d]?(u[d].p(p,v),ct(u[d],1)):(u[d]=Qo(p),u[d].c(),ct(u[d],1),u[d].m(t,null))}for(kr(),d=l.length;d<u.length;d+=1)f(d);Br()}(!a||v&4)&&Ot(t,"width",c[2]+"%")},i(c){if(!a){for(let v=0;v<l.length;v+=1)ct(u[v]);c&&Ge(()=>{a&&(n||(n=Tn(t,On,{},!0)),n.run(1))}),a=!0}},o(c){u=u.filter(Boolean);for(let v=0;v<u.length;v+=1)bt(u[v]);c&&(n||(n=Tn(t,On,{},!1)),n.run(0)),a=!1},d(c){c&&L(t),s&&s.d(),Je(u,c),c&&n&&n.end(),i=!1,Ke(o)}}}function Jo(r){let t,e='<i class="fas fa-window-restore"></i>',n,a,i;return{c(){t=W("button"),t.innerHTML=e,this.h()},l(o){t=Y(o,"BUTTON",{class:!0,"data-svelte-h":!0}),It(t)!=="svelte-136npru"&&(t.innerHTML=e),this.h()},h(){N(t,"class","absolute right-0 btn btn-square btn-ghost btn-sm opacity-80")},m(o,s){ht(o,t,s),a||(i=[Nt(t,"click",r[6]),ss(n=vs.call(null,t,{content:r[3]}))],a=!0)},p(o,s){n&&ls(n.update)&&s&8&&n.update.call(null,{content:o[3]})},d(o){o&&L(t),a=!1,Ke(i)}}}function Qo(r){let t,e,n,a,i,o,s;e=new ra({props:{icon:r[12].icon,opacity:80}});function l(){return r[11](r[12])}return{c(){t=W("div"),At(e.$$.fragment),n=at(),this.h()},l(u){t=Y(u,"DIV",{class:!0});var f=K(t);Ht(e.$$.fragment,f),n=it(f),f.forEach(L),this.h()},h(){N(t,"class","app-icon puff-in-center svelte-12rfyhz")},m(u,f){ht(u,t,f),kt(e,t,null),k(t,n),i=!0,o||(s=[Nt(t,"click",l),ss(a=vs.call(null,t,{content:r[12].title}))],o=!0)},p(u,f){r=u;const c={};f&1&&(c.icon=r[12].icon),e.$set(c),a&&ls(a.update)&&f&1&&a.update.call(null,{content:r[12].title})},i(u){i||(ct(e.$$.fragment,u),i=!0)},o(u){bt(e.$$.fragment,u),i=!1},d(u){u&&L(t),Bt(e),o=!1,Ke(s)}}}function Op(r){let t,e,n=r[0].length>0&&!r[4]&&Ko(r);return{c(){n&&n.c(),t=wn()},l(a){n&&n.l(a),t=wn()},m(a,i){n&&n.m(a,i),ht(a,t,i),e=!0},p(a,[i]){a[0].length>0&&!a[4]?n?(n.p(a,i),i&17&&ct(n,1)):(n=Ko(a),n.c(),ct(n,1),n.m(t.parentNode,t)):n&&(kr(),bt(n,1,1,()=>{n=null}),Br())},i(a){e||(ct(n),e=!0)},o(a){bt(n),e=!1},d(a){a&&L(t),n&&n.d(a)}}}function Rp(r,t,e){let n,a,i,o,s,l;ee(r,fs,h=>e(9,s=h)),ee(r,rr,h=>e(10,l=h));let u=St.OPEN,f=!1;function c(h){h.state===St.MINIMIZED&&(h.state=St.OPEN),rr.setCurrentApp(h.id,h.target)}function v(){u===St.OPEN?(rr.minimizeAllOpenApps(),e(8,u=St.MINIMIZED)):(rr.openAllMinimizedApps(),e(8,u=St.OPEN))}function d(){e(1,f=!f)}const p=h=>c(h);return r.$$.update=()=>{r.$$.dirty&1024&&e(0,n=Object.values(l.config.apps).filter(h=>h.state!==St.CLOSED).sort((h,g)=>h.opened-g.opened)),r.$$.dirty&768&&e(3,i=u===St.OPEN?s("lenv.minimizeall"):s("lenv.openall")),r.$$.dirty&1&&e(2,o=n.length*7.5)},e(4,a=Ua()),[n,f,o,i,a,c,v,d,u,s,l,p]}class Ip extends Jt{constructor(t){super(),Qt(this,t,Rp,Op,Kt,{})}}function Pp(r){let t,e;return t=new Ip({}),{c(){At(t.$$.fragment)},l(n){Ht(t.$$.fragment,n)},m(n,a){kt(t,n,a),e=!0},p:Ct,i(n){e||(ct(t.$$.fragment,n),e=!0)},o(n){bt(t.$$.fragment,n),e=!1},d(n){Bt(t,n)}}}class zp extends Jt{constructor(t){super(),Qt(this,t,null,Pp,Kt,{})}}function Ap(r){let t,e,n,a,i,o;return t=new qu({}),n=new Tp({}),i=new zp({}),{c(){At(t.$$.fragment),e=at(),At(n.$$.fragment),a=at(),At(i.$$.fragment)},l(s){Ht(t.$$.fragment,s),e=it(s),Ht(n.$$.fragment,s),a=it(s),Ht(i.$$.fragment,s)},m(s,l){kt(t,s,l),ht(s,e,l),kt(n,s,l),ht(s,a,l),kt(i,s,l),o=!0},i(s){o||(ct(t.$$.fragment,s),ct(n.$$.fragment,s),ct(i.$$.fragment,s),o=!0)},o(s){bt(t.$$.fragment,s),bt(n.$$.fragment,s),bt(i.$$.fragment,s),o=!1},d(s){s&&(L(e),L(a)),Bt(t,s),Bt(n,s),Bt(i,s)}}}function kp(r){let t,e;return t=new Pu({props:{$$slots:{default:[Ap]},$$scope:{ctx:r}}}),{c(){At(t.$$.fragment)},l(n){Ht(t.$$.fragment,n)},m(n,a){kt(t,n,a),e=!0},p(n,[a]){const i={};a&1&&(i.$$scope={dirty:a,ctx:n}),t.$set(i)},i(n){e||(ct(t.$$.fragment,n),e=!0)},o(n){bt(t.$$.fragment,n),e=!1},d(n){Bt(t,n)}}}class Bp extends Jt{constructor(t){super(),Qt(this,t,null,kp,Kt,{})}}function Gp(r){let t,e,n;return{c(){t=W("img"),this.h()},l(a){t=Y(a,"IMG",{class:!0,style:!0,src:!0,alt:!0}),this.h()},h(){N(t,"class",e=(r[1]?"w-"+r[1]:"w-full")+" h-full inline-block"),Ot(t,"opacity",r[2]/100),Yr(t.src,n="/media/learningenvironment/appicons/"+r[0]+".svg")||N(t,"src",n),N(t,"alt","appicon")},m(a,i){ht(a,t,i)},p(a,[i]){i&2&&e!==(e=(a[1]?"w-"+a[1]:"w-full")+" h-full inline-block")&&N(t,"class",e),i&4&&Ot(t,"opacity",a[2]/100),i&1&&!Yr(t.src,n="/media/learningenvironment/appicons/"+a[0]+".svg")&&N(t,"src",n)},i:Ct,o:Ct,d(a){a&&L(t)}}}function Np(r,t,e){let{icon:n="default"}=t,{width:a}=t,{opacity:i=100}=t;return r.$$set=o=>{"icon"in o&&e(0,n=o.icon),"width"in o&&e(1,a=o.width),"opacity"in o&&e(2,i=o.opacity)},r.$$.update=()=>{r.$$.dirty&1&&e(0,n=n||"default")},[n,a,i]}class ra extends Jt{constructor(t){super(),Qt(this,t,Np,Gp,Kt,{icon:0,width:1,opacity:2})}}function Fp(r){let t,e;return{c(){t=W("iframe"),this.h()},l(n){t=Y(n,"IFRAME",{src:!0,title:!0}),K(t).forEach(L),this.h()},h(){Yr(t.src,e="/user/apps/"+yr.MAIL+"/embed")||N(t,"src",e),N(t,"title","frames-user-app")},m(n,a){ht(n,t,a)},p:Ct,i:Ct,o:Ct,d(n){n&&L(t)}}}let Lp=class extends Jt{constructor(t){super(),Qt(this,t,null,Fp,Kt,{})}};function ts(r,t,e){const n=r.slice();return n[32]=t[e],n[34]=e,n}function Hp(r){let t,e,n;return{c(){t=W("div"),e=W("i"),this.h()},l(a){t=Y(a,"DIV",{class:!0});var i=K(t);e=Y(i,"I",{class:!0}),K(e).forEach(L),i.forEach(L),this.h()},h(){N(e,"class",n="fal fa-globe "+(r[4].id===r[32].id&&r[8]?"fa-spin":"")),N(t,"class","pr-2")},m(a,i){ht(a,t,i),k(t,e)},p(a,i){i[0]&280&&n!==(n="fal fa-globe "+(a[4].id===a[32].id&&a[8]?"fa-spin":""))&&N(e,"class",n)},d(a){a&&L(t)}}}function Vp(r){let t,e,n,a;return{c(){t=W("div"),e=W("img"),this.h()},l(i){t=Y(i,"DIV",{class:!0});var o=K(t);e=Y(o,"IMG",{src:!0,class:!0,"aria-hidden":!0,alt:!0}),o.forEach(L),this.h()},h(){Yr(e.src,n=r[32].favicon)||N(e,"src",n),N(e,"class",a="h-[16px] w-[16px] "+(r[4].id===r[32].id&&r[8]?"spin-it":"")+" svelte-11mkslz"),N(e,"aria-hidden","true"),N(e,"alt","favicon"),N(t,"class","pr-2")},m(i,o){ht(i,t,o),k(t,e)},p(i,o){o[0]&8&&!Yr(e.src,n=i[32].favicon)&&N(e,"src",n),o[0]&280&&a!==(a="h-[16px] w-[16px] "+(i[4].id===i[32].id&&i[8]?"spin-it":"")+" svelte-11mkslz")&&N(e,"class",a)},d(i){i&&L(t)}}}function rs(r){let t,e='<i class="fa fa-times"></i>',n,a;function i(){return r[21](r[34])}return{c(){t=W("a"),t.innerHTML=e,this.h()},l(o){t=Y(o,"A",{class:!0,"data-svelte-h":!0}),It(t)!=="svelte-sci31h"&&(t.innerHTML=e),this.h()},h(){N(t,"class","absolute right-0 btn btn-ghost btn-sm opacity-20")},m(o,s){ht(o,t,s),n||(a=Nt(t,"click",i),n=!0)},p(o,s){r=o},d(o){o&&L(t),n=!1,a()}}}function es(r){let t,e,n,a,i=r[32].title+"",o,s,l,u,f,c;function v(m,_){return m[32].favicon?Vp:Hp}let d=v(r),p=d(r),h=r[3].length>1&&rs(r);function g(){return r[22](r[34])}return{c(){t=W("a"),e=W("div"),p.c(),n=at(),a=W("span"),o=Ft(i),s=at(),h&&h.c(),l=at(),this.h()},l(m){t=Y(m,"A",{role:!0,class:!0});var _=K(t);e=Y(_,"DIV",{class:!0});var b=K(e);p.l(b),n=it(b),a=Y(b,"SPAN",{class:!0});var S=K(a);o=Lt(S,i),S.forEach(L),s=it(b),h&&h.l(b),b.forEach(L),l=it(_),_.forEach(L),this.h()},h(){N(a,"class","pr-5 max-h-[28px]"),N(e,"class","flex items-center min-w-[100px] max-w-[240px]"),N(t,"role","tab"),N(t,"class",u="tab "+(r[4].id===r[32].id?"tab-active":"")+" pr-0 overflow-hidden svelte-11mkslz")},m(m,_){ht(m,t,_),k(t,e),p.m(e,null),k(e,n),k(e,a),k(a,o),k(e,s),h&&h.m(e,null),k(t,l),f||(c=Nt(t,"click",g),f=!0)},p(m,_){r=m,d===(d=v(r))&&p?p.p(r,_):(p.d(1),p=d(r),p&&(p.c(),p.m(e,n))),_[0]&8&&i!==(i=r[32].title+"")&&nr(o,i),r[3].length>1?h?h.p(r,_):(h=rs(r),h.c(),h.m(e,null)):h&&(h.d(1),h=null),_[0]&24&&u!==(u="tab "+(r[4].id===r[32].id?"tab-active":"")+" pr-0 overflow-hidden svelte-11mkslz")&&N(t,"class",u)},d(m){m&&L(t),p.d(),h&&h.d(),f=!1,c()}}}function Wp(r){let t,e,n='<i class="fas fa-long-arrow-left"></i>',a,i,o='<i class="fas fa-long-arrow-right"></i>',s,l,u='<i class="fas fa-redo-alt"></i>',f,c;return{c(){t=W("div"),e=W("div"),e.innerHTML=n,a=at(),i=W("div"),i.innerHTML=o,s=at(),l=W("div"),l.innerHTML=u,this.h()},l(v){t=Y(v,"DIV",{class:!0});var d=K(t);e=Y(d,"DIV",{role:!0,class:!0,"data-svelte-h":!0}),It(e)!=="svelte-1cnsw1l"&&(e.innerHTML=n),a=it(d),i=Y(d,"DIV",{role:!0,class:!0,"data-svelte-h":!0}),It(i)!=="svelte-18wxhzq"&&(i.innerHTML=o),s=it(d),l=Y(d,"DIV",{role:!0,class:!0,"data-svelte-h":!0}),It(l)!=="svelte-sj9znc"&&(l.innerHTML=u),d.forEach(L),this.h()},h(){N(e,"role","button"),N(e,"class","btn btn-ghost btn-circle"),N(i,"role","button"),N(i,"class","btn btn-ghost btn-circle"),N(l,"role","button"),N(l,"class","btn btn-ghost btn-circle"),N(t,"class","justify-start")},m(v,d){ht(v,t,d),k(t,e),k(t,a),k(t,i),k(t,s),k(t,l),f||(c=Nt(l,"click",r[17]),f=!0)},p:Ct,d(v){v&&L(t),f=!1,c()}}}function ns(r){var ut,ft;let t,e,n,a='<i class="far fa-lock"></i>',i,o,s,l,u=r[11]("browser.security")+"",f,c,v,d=((ft=(ut=r[4])==null?void 0:ut.url)==null?void 0:ft.origin)+"",p,h,g,m,_,b="<tr><th></th> <th></th> <th></th></tr>",S,y,D,x,E='<i class="far fa-lock"></i>',C,w,P,O=r[11]("browser.connectionSafe")+"",M,I,z,F=r[11]("browser.securityDescription")+"",H,V,B,G,A,X,q='<i class="far fa-check"></i>',j,Q,U,tt=r[11]("browser.validCertificate")+"",et,vt,mt,J='<div role="button" class="btn btn-ghost btn-circle"><i class="fas fa-external-link"></i></div>',nt,Dt;return{c(){t=W("div"),e=W("details"),n=W("summary"),n.innerHTML=a,i=at(),o=W("div"),s=W("div"),l=W("h3"),f=Ft(u),c=at(),v=W("p"),p=Ft(d),h=at(),g=W("div"),m=W("table"),_=W("thead"),_.innerHTML=b,S=at(),y=W("tbody"),D=W("tr"),x=W("th"),x.innerHTML=E,C=at(),w=W("td"),P=W("div"),M=Ft(O),I=at(),z=W("p"),H=Ft(F),V=at(),B=W("td"),G=at(),A=W("tr"),X=W("th"),X.innerHTML=q,j=at(),Q=W("td"),U=W("div"),et=Ft(tt),vt=at(),mt=W("td"),mt.innerHTML=J,this.h()},l(lt){t=Y(lt,"DIV",{class:!0});var _t=K(t);e=Y(_t,"DETAILS",{class:!0});var yt=K(e);n=Y(yt,"SUMMARY",{class:!0,"data-svelte-h":!0}),It(n)!=="svelte-gpi5ts"&&(n.innerHTML=a),i=it(yt),o=Y(yt,"DIV",{tabindex:!0,class:!0});var dt=K(o);s=Y(dt,"DIV",{class:!0});var Et=K(s);l=Y(Et,"H3",{class:!0});var Vt=K(l);f=Lt(Vt,u),Vt.forEach(L),c=it(Et),v=Y(Et,"P",{class:!0});var tr=K(v);p=Lt(tr,d),tr.forEach(L),h=it(Et),g=Y(Et,"DIV",{class:!0});var qt=K(g);m=Y(qt,"TABLE",{class:!0});var Rt=K(m);_=Y(Rt,"THEAD",{"data-svelte-h":!0}),It(_)!=="svelte-qrcfy4"&&(_.innerHTML=b),S=it(Rt),y=Y(Rt,"TBODY",{});var zt=K(y);D=Y(zt,"TR",{});var ir=K(D);x=Y(ir,"TH",{"data-svelte-h":!0}),It(x)!=="svelte-c5i2i0"&&(x.innerHTML=E),C=it(ir),w=Y(ir,"TD",{});var hr=K(w);P=Y(hr,"DIV",{class:!0});var Ie=K(P);M=Lt(Ie,O),Ie.forEach(L),I=it(hr),z=Y(hr,"P",{class:!0});var Pe=K(z);H=Lt(Pe,F),Pe.forEach(L),hr.forEach(L),V=it(ir),B=Y(ir,"TD",{}),K(B).forEach(L),ir.forEach(L),G=it(zt),A=Y(zt,"TR",{class:!0});var Fr=K(A);X=Y(Fr,"TH",{"data-svelte-h":!0}),It(X)!=="svelte-wtjm53"&&(X.innerHTML=q),j=it(Fr),Q=Y(Fr,"TD",{});var Zr=K(Q);U=Y(Zr,"DIV",{class:!0});var fe=K(U);et=Lt(fe,tt),fe.forEach(L),Zr.forEach(L),vt=it(Fr),mt=Y(Fr,"TD",{"data-svelte-h":!0}),It(mt)!=="svelte-1yrc848"&&(mt.innerHTML=J),Fr.forEach(L),zt.forEach(L),Rt.forEach(L),qt.forEach(L),Et.forEach(L),dt.forEach(L),yt.forEach(L),_t.forEach(L),this.h()},h(){N(n,"class","btn btn-sm btn-ghost btn-circle ml-2 text-success"),N(l,"class","card-title"),N(v,"class","text-sm opacity-50"),N(P,"class","font-bold"),N(z,"class","opacity-50"),N(U,"class","font-bold"),N(A,"class","hover cursor-pointer"),N(m,"class","table"),N(g,"class","overflow-x-auto"),N(s,"class","card-body"),N(o,"tabindex","0"),N(o,"class","dropdown-content z-[1] card card-compact bg-base-100 p-2 shadow"),N(e,"class","dropdown"),N(t,"class","absolute z-10")},m(lt,_t){ht(lt,t,_t),k(t,e),k(e,n),k(e,i),k(e,o),k(o,s),k(s,l),k(l,f),k(s,c),k(s,v),k(v,p),k(s,h),k(s,g),k(g,m),k(m,_),k(m,S),k(m,y),k(y,D),k(D,x),k(D,C),k(D,w),k(w,P),k(P,M),k(w,I),k(w,z),k(z,H),k(D,V),k(D,B),k(y,G),k(y,A),k(A,X),k(A,j),k(A,Q),k(Q,U),k(U,et),k(A,vt),k(A,mt),nt||(Dt=Nt(A,"click",r[19]),nt=!0)},p(lt,_t){var yt,dt;_t[0]&2048&&u!==(u=lt[11]("browser.security")+"")&&nr(f,u),_t[0]&16&&d!==(d=((dt=(yt=lt[4])==null?void 0:yt.url)==null?void 0:dt.origin)+"")&&nr(p,d),_t[0]&2048&&O!==(O=lt[11]("browser.connectionSafe")+"")&&nr(M,O),_t[0]&2048&&F!==(F=lt[11]("browser.securityDescription")+"")&&nr(H,F),_t[0]&2048&&tt!==(tt=lt[11]("browser.validCertificate")+"")&&nr(et,tt)},d(lt){lt&&L(t),nt=!1,Dt()}}}function as(r){let t,e,n,a;return{c(){t=W("iframe"),this.h()},l(i){t=Y(i,"IFRAME",{class:!0,style:!0,src:!0,title:!0}),K(t).forEach(L),this.h()},h(){N(t,"class","w-full min-w-full h-full svelte-11mkslz"),Ot(t,"z-index","-1"),Yr(t.src,e=r[4].url.href+"?beawaretimestamp="+new Date().getTime())||N(t,"src",e),N(t,"title","content-iframe")},m(i,o){ht(i,t,o),r[27](t),n||(a=Nt(t,"load",r[18]),n=!0)},p(i,o){o[0]&16&&!Yr(t.src,e=i[4].url.href+"?beawaretimestamp="+new Date().getTime())&&N(t,"src",e)},d(i){i&&L(t),r[27](null),n=!1,a()}}}function Yp(r){var s;let t,e=r[11]("browser.certificateViewer")+"",n,a,i=((s=r[4].url)==null?void 0:s.hostname)+"",o;return{c(){t=W("h3"),n=Ft(e),a=Ft(": "),o=Ft(i),this.h()},l(l){t=Y(l,"H3",{class:!0,slot:!0});var u=K(t);n=Lt(u,e),a=Lt(u,": "),o=Lt(u,i),u.forEach(L),this.h()},h(){N(t,"class","font-bold text-lg"),N(t,"slot","header")},m(l,u){ht(l,t,u),k(t,n),k(t,a),k(t,o)},p(l,u){var f;u[0]&2048&&e!==(e=l[11]("browser.certificateViewer")+"")&&nr(n,e),u[0]&16&&i!==(i=((f=l[4].url)==null?void 0:f.hostname)+"")&&nr(o,i)},d(l){l&&L(t)}}}function Xp(r){var F;let t,e,n,a,i="Issued To",o,s,l,u,f,c="Common Name (CN)",v,d,p,h=((F=r[4].url)==null?void 0:F.hostname)+"",g,m,_,b="<td>Organisation (O)</td> <td>Not part of the certificate</td>",S,y,D="<td>Organisational Unit (OU)</td> <td>Not part of the certificate</td>",x,E,C='<p class="mb-4">Issued By</p> <table class="table table-xs pl-4"><tbody><tr><td>Common Name (CN)</td> <td>GTS CA 1C3</td></tr> <tr><td>Organisation (O)</td> <td>Google Trust Services LLC</td></tr> <tr><td>Organisational Unit (OU)</td> <td>Not part of the certificate</td></tr></tbody></table>',w,P,O='<p class="mb-4">Validity Period</p> <table class="table table-xs pl-4"><tbody><tr><td>Issued On</td> <td>heute</td></tr> <tr><td>Expires On</td> <td>2090</td></tr></tbody></table>',M,I,z='<p class="mb-4">SHA-256 Fingerprints</p> <table class="table table-xs pl-4"><tbody><tr><td>Certificate</td> <td>3u2193u9281u838998u189u32819u3984u9u9bu982398n4ux93843249v34c3898x324c9823cn2u4xn32u4</td></tr> <tr><td>Public Key</td> <td>34i30928if2i309i3029i44324324234kml320990n93024xu49n3u29x3nu3a39s2b9832vu49b3u2u2392s</td></tr></tbody></table>';return{c(){t=W("div"),e=W("div"),n=W("div"),a=W("p"),a.textContent=i,o=at(),s=W("table"),l=W("tbody"),u=W("tr"),f=W("td"),f.textContent=c,v=at(),d=W("td"),p=Ft("*"),g=Ft(h),m=at(),_=W("tr"),_.innerHTML=b,S=at(),y=W("tr"),y.innerHTML=D,x=at(),E=W("div"),E.innerHTML=C,w=at(),P=W("div"),P.innerHTML=O,M=at(),I=W("div"),I.innerHTML=z,this.h()},l(H){t=Y(H,"DIV",{slot:!0});var V=K(t);e=Y(V,"DIV",{class:!0});var B=K(e);n=Y(B,"DIV",{class:!0});var G=K(n);a=Y(G,"P",{class:!0,"data-svelte-h":!0}),It(a)!=="svelte-1jxxf09"&&(a.textContent=i),o=it(G),s=Y(G,"TABLE",{class:!0});var A=K(s);l=Y(A,"TBODY",{});var X=K(l);u=Y(X,"TR",{});var q=K(u);f=Y(q,"TD",{"data-svelte-h":!0}),It(f)!=="svelte-1rgj0j2"&&(f.textContent=c),v=it(q),d=Y(q,"TD",{});var j=K(d);p=Lt(j,"*"),g=Lt(j,h),j.forEach(L),q.forEach(L),m=it(X),_=Y(X,"TR",{"data-svelte-h":!0}),It(_)!=="svelte-1n5lusb"&&(_.innerHTML=b),S=it(X),y=Y(X,"TR",{"data-svelte-h":!0}),It(y)!=="svelte-3wgpof"&&(y.innerHTML=D),X.forEach(L),A.forEach(L),G.forEach(L),x=it(B),E=Y(B,"DIV",{class:!0,"data-svelte-h":!0}),It(E)!=="svelte-fjxq38"&&(E.innerHTML=C),w=it(B),P=Y(B,"DIV",{class:!0,"data-svelte-h":!0}),It(P)!=="svelte-18fg6f5"&&(P.innerHTML=O),M=it(B),I=Y(B,"DIV",{class:!0,"data-svelte-h":!0}),It(I)!=="svelte-1pyo3sm"&&(I.innerHTML=z),B.forEach(L),V.forEach(L),this.h()},h(){N(a,"class","mb-4"),N(s,"class","table table-xs pl-4"),N(n,"class","mt-4 mb-4"),N(E,"class","mt-4 mb-4"),N(P,"class","mt-4 mb-4"),N(I,"class","mt-4 mb-4"),N(e,"class","overflow-x-auto"),N(t,"slot","body")},m(H,V){ht(H,t,V),k(t,e),k(e,n),k(n,a),k(n,o),k(n,s),k(s,l),k(l,u),k(u,f),k(u,v),k(u,d),k(d,p),k(d,g),k(l,m),k(l,_),k(l,S),k(l,y),k(e,x),k(e,E),k(e,w),k(e,P),k(e,M),k(e,I)},p(H,V){var B;V[0]&16&&h!==(h=((B=H[4].url)==null?void 0:B.hostname)+"")&&nr(g,h)},d(H){H&&L(t)}}}function $p(r){let t,e,n,a,i,o='<i class="fa fa-plus"></i>',s,l,u,f,c,v,d,p,h,g,m,_='<button class="btn btn-ghost btn-circle"><i class="far fa-ellipsis-v"></i></button>',b,S,y,D,x,E,C,w,P,O,M=Or(r[3]),I=[];for(let G=0;G<M.length;G+=1)I[G]=es(ts(r,M,G));let z=!r[12]&&Wp(r),F=r[4].url&&ns(r),H=r[4].url&&as(r);function V(G){r[29](G)}let B={$$slots:{body:[Xp],header:[Yp]},$$scope:{ctx:r}};return r[9]!==void 0&&(B.open=r[9]),E=new cs({props:B}),ne.push(()=>us(E,"open",V)),{c(){t=W("div"),e=W("div");for(let G=0;G<I.length;G+=1)I[G].c();n=at(),a=W("a"),i=W("a"),i.innerHTML=o,l=at(),u=W("div"),z&&z.c(),f=at(),c=W("div"),v=W("div"),F&&F.c(),d=at(),p=W("input"),g=at(),m=W("div"),m.innerHTML=_,S=at(),y=W("div"),H&&H.c(),x=at(),At(E.$$.fragment),this.h()},l(G){t=Y(G,"DIV",{class:!0});var A=K(t);e=Y(A,"DIV",{role:!0,class:!0});var X=K(e);for(let et=0;et<I.length;et+=1)I[et].l(X);n=it(X),a=Y(X,"A",{role:!0,class:!0});var q=K(a);i=Y(q,"A",{class:!0,"data-svelte-h":!0}),It(i)!=="svelte-ua5hfs"&&(i.innerHTML=o),q.forEach(L),X.forEach(L),l=it(A),u=Y(A,"DIV",{class:!0});var j=K(u);z&&z.l(j),f=it(j),c=Y(j,"DIV",{class:!0});var Q=K(c);v=Y(Q,"DIV",{class:!0});var U=K(v);F&&F.l(U),d=it(U),p=Y(U,"INPUT",{type:!0,placeholder:!0,class:!0}),U.forEach(L),Q.forEach(L),g=it(j),m=Y(j,"DIV",{class:!0,"data-svelte-h":!0}),It(m)!=="svelte-k25yx7"&&(m.innerHTML=_),j.forEach(L),S=it(A),y=Y(A,"DIV",{class:!0,style:!0});var tt=K(y);H&&H.l(tt),tt.forEach(L),A.forEach(L),x=it(G),Ht(E.$$.fragment,G),this.h()},h(){N(i,"class","btn btn-ghost btn-sm opacity-50"),N(a,"role","tab"),N(a,"class","tab max-w-[30px]"),N(e,"role","tablist"),N(e,"class","tabs tabs-lifted block match-browser-window svelte-11mkslz"),Ge(()=>r[23].call(e)),N(p,"type","text"),N(p,"placeholder",h=r[11]("browser.typeurl")),N(p,"class","input input-bordered w-full pl-14 rounded-full"),N(v,"class","w-full flex items-center"),N(c,"class","justify-center w-11/12"),N(m,"class","justify-end"),N(u,"class","navbar bg-base-200"),Ge(()=>r[26].call(u)),N(y,"class","content-frame relative w-full border-t border-base-200 overflow-hidden svelte-11mkslz"),Ot(y,"height",r[10]+"px"),N(t,"class","browser svelte-11mkslz"),Ge(()=>r[28].call(t))},m(G,A){ht(G,t,A),k(t,e);for(let X=0;X<I.length;X+=1)I[X]&&I[X].m(e,null);k(e,n),k(e,a),k(a,i),s=ia(e,r[23].bind(e)),k(t,l),k(t,u),z&&z.m(u,null),k(u,f),k(u,c),k(c,v),F&&F.m(v,null),k(v,d),k(v,p),r[24](p),Fi(p,r[5]),k(u,g),k(u,m),b=ia(u,r[26].bind(u)),k(t,S),k(t,y),H&&H.m(y,null),D=ia(t,r[28].bind(t)),ht(G,x,A),kt(E,G,A),w=!0,P||(O=[Nt(i,"click",r[13]),Nt(p,"click",jp),Nt(p,"keydown",r[16]),Nt(p,"input",r[25])],P=!0)},p(G,A){if(A[0]&49432){M=Or(G[3]);let q;for(q=0;q<M.length;q+=1){const j=ts(G,M,q);I[q]?I[q].p(j,A):(I[q]=es(j),I[q].c(),I[q].m(e,n))}for(;q<I.length;q+=1)I[q].d(1);I.length=M.length}G[12]||z.p(G,A),G[4].url?F?F.p(G,A):(F=ns(G),F.c(),F.m(v,d)):F&&(F.d(1),F=null),(!w||A[0]&2048&&h!==(h=G[11]("browser.typeurl")))&&N(p,"placeholder",h),A[0]&32&&p.value!==G[5]&&Fi(p,G[5]),G[4].url?H?H.p(G,A):(H=as(G),H.c(),H.m(y,null)):H&&(H.d(1),H=null),(!w||A[0]&1024)&&Ot(y,"height",G[10]+"px");const X={};A[0]&2064|A[1]&16&&(X.$$scope={dirty:A,ctx:G}),!C&&A[0]&512&&(C=!0,X.open=G[9],os(()=>C=!1)),E.$set(X)},i(G){w||(ct(E.$$.fragment,G),w=!0)},o(G){bt(E.$$.fragment,G),w=!1},d(G){G&&(L(t),L(x)),Je(I,G),s(),z&&z.d(),F&&F.d(),r[24](null),b(),H&&H.d(),D(),Bt(E,G),P=!1,Ke(O)}}}function qp(r){return/^https?:\/\//i.test(r)?r:`https://${r}`}const jp=r=>{r.target.focus()};function Up(r,t,e){let n,a;ee(r,fs,B=>e(11,a=B));let{config:i={}}=t;i={startscreen:"http://localhost:5173/p/microsoft",bookmarks:[],specialURLs:[{url:"http://localhost:5173/p/google",favicon:"/media/simulation/p/google/favicon.ico",title:a("phishing.google.tabtitle"),displayname:"https://accounts.google.com/v3/signin/"},{url:"http://localhost:5173/p/microsoft",favicon:"/media/simulation/p/ms/favicon.ico",title:a("phishing.ms.tabtitle"),displayname:"https://login.microsoftonline.com/common/oauth2/v2.0/authorize"}]};let o=0,s=[],l,u,f,c,v=!1,d=!1,p=Ua();h();function h(){return e(3,s=[...s,{id:o++,url:null,displayname:null,favicon:null,title:a("browser.newtab")}]),m(s.length-1)}function g(B){s[B].id===l.id&&B-1>=0&&m(B-1),s.length!==1&&e(3,s=s.filter((G,A)=>A!==B))}function m(B){e(8,v=!1),e(4,l=s[B]),l.url?e(5,u=l.displayname):(e(5,u=""),f==null||f.focus())}function _(B){(B.keyCode===13||B.which===13)&&S()}function b({tab:B,displayname:G,favicon:A,title:X}){if(i.specialURLs)for(let q=0;q<i.specialURLs.length;q++)i.specialURLs[q].url===u&&(G=i.specialURLs[q].displayname,A=i.specialURLs[q].favicon,X=i.specialURLs[q].title);u!==""?(B.url=new URL(qp(u)),B.displayname=G||B.url.href,B.favicon=A||null,B.title=X||B.url.hostname):(B.url=null,B.displayname="",B.title=a("browser.newtab")),e(4,l=B),e(3,s),e(5,u=l.displayname)}function S(){u!==""&&e(8,v=!0),b({tab:l})}function y(B){f.blur(),e(8,v=!1)}function D(){e(9,d=!0)}let x=0,E=0,C=0;jr(()=>{i.startscreen&&(e(5,u=i.startscreen),S())});const w=B=>g(B),P=B=>m(B);function O(){E=this.clientHeight,e(1,E)}function M(B){ne[B?"unshift":"push"](()=>{f=B,e(6,f)})}function I(){u=this.value,e(5,u)}function z(){C=this.clientHeight,e(2,C)}function F(B){ne[B?"unshift":"push"](()=>{c=B,e(7,c)})}function H(){x=this.clientHeight,e(0,x)}function V(B){d=B,e(9,d)}return r.$$set=B=>{"config"in B&&e(20,i=B.config)},r.$$.update=()=>{r.$$.dirty[0]&7&&e(10,n=x-(E+C))},[x,E,C,s,l,u,f,c,v,d,n,a,p,h,g,m,_,S,y,D,i,w,P,O,M,I,z,F,H,V]}class Zp extends Jt{constructor(t){super(),Qt(this,t,Up,$p,Kt,{config:20},null,[-1,-1])}}function Kp(r){let t,e;return{c(){t=W("iframe"),this.h()},l(n){t=Y(n,"IFRAME",{src:!0,title:!0}),K(t).forEach(L),this.h()},h(){Yr(t.src,e="/user/apps/"+yr.LEARNINGUNIT+"/embed")||N(t,"src",e),N(t,"title","frames-user-app")},m(n,a){ht(n,t,a)},p:Ct,i:Ct,o:Ct,d(n){n&&L(t)}}}class Jp extends Jt{constructor(t){super(),Qt(this,t,null,Kp,Kt,{})}}function Qp(r){let t,e;return t=new Bp({}),{c(){At(t.$$.fragment)},l(n){Ht(t.$$.fragment,n)},m(n,a){kt(t,n,a),e=!0},p:Ct,i(n){e||(ct(t.$$.fragment,n),e=!0)},o(n){bt(t.$$.fragment,n),e=!1},d(n){Bt(t,n)}}}class ph extends Jt{constructor(t){super(),Qt(this,t,null,Qp,Kt,{})}}export{ph as component};
