import{s as Re,e as C,c as T,l as Je,m as h,i as N,p as j,R as ye,F as xe,n as le,f as _,y as Se,J as Vt,A as ct,B as $e,N as Ve,t as Z,a as F,ab as Ml,b as D,d as $,g as X,ac as Al,I as V,h as m,r as Ol,u as Sl,j as ie,k as tt,ad as Ft,C as rn,L as Bl,S as It,T as pt,Q as Xt,K as Tt,o as Oe,ae as sn,af as an,z as un}from"../chunks/scheduler.cOHHkP0m.js";import{S as We,i as Ge,n as cn,l as fn,b as Ne,d as qe,m as He,t as Q,a as x,e as Pe,h as zt,g as je,f as Fe}from"../chunks/index.44LrZ0tY.js";import{e as Qe}from"../chunks/each.6w4Ej4nR.js";import{t as Ll,s as dn,c as Nl,l as gt,r as mt,f as ql,z as Hl}from"../chunks/index.d2CmnkrZ.js";import"../chunks/MS365Login.svelte_svelte_type_style_lang.B6GZ_MWG.js";import{t as ft}from"../chunks/index.hwPIL90K.js";import{e as hn,Q as rt}from"../chunks/shared.M8ULrqnv.js";import{P as lt,M as Pl,a as St,b as Ul,G as _n}from"../chunks/constants.dbhUNUj9.js";import"../chunks/entry.tU5bMAfH.js";import{e as pn}from"../chunks/forms.nm2FTXk8.js";import{p as gn}from"../chunks/stores.jHieH2uS.js";import{M as Rt}from"../chunks/Modal.N9oYkXC9.js";import{w as mn}from"../chunks/index.MoR2mFp7.js";import{a as bn}from"../chunks/index.j3h183Vw.js";import{t as kn}from"../chunks/types.18TL9lEU.js";const Vl=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function vn(t){let e,l='<i class="far fa-info"></i>',n,i,o;return{c(){e=C("button"),e.innerHTML=l,this.h()},l(r){e=T(r,"BUTTON",{class:!0,"data-svelte-h":!0}),Je(e)!=="svelte-1u6buej"&&(e.innerHTML=l),this.h()},h(){h(e,"class","btn btn-circle btn-xs btn-outline btn-info absolute top-2 left-2")},m(r,s){N(r,e,s),t[6](e),i||(o=[j(e,"click",t[5]),ye(n=Ll.call(null,e,{content:t[0],...t[2]}))],i=!0)},p(r,[s]){n&&xe(n.update)&&s&5&&n.update.call(null,{content:r[0],...r[2]})},i:le,o:le,d(r){r&&_(e),t[6](null),i=!1,Se(o)}}}function yn(t,e,l){let{mode:n="available"}=e,{content:i=""}=e,{timesAssigned:o=0}=e,r={},s;n.always?(r.trigger="manual",r.onHide=()=>!1,r.sticky=!0,r.plugins=[dn]):n.smart&&(r.trigger="manual");let a;Vt(()=>{n.always&&(a=new IntersectionObserver(c=>{c.forEach(u=>{u.isIntersecting&&(n.always&&s._tippy.show(),a.disconnect())})}),a.observe(s))});function d(c){ct.call(this,t,c)}function y(c){$e[c?"unshift":"push"](()=>{s=c,l(1,s)})}return t.$$set=c=>{"mode"in c&&l(3,n=c.mode),"content"in c&&l(0,i=c.content),"timesAssigned"in c&&l(4,o=c.timesAssigned)},t.$$.update=()=>{t.$$.dirty&26&&n.smart&&o>2&&s._tippy.show()},[i,s,r,n,o,d,y]}class jl extends We{constructor(e){super(),Ge(this,e,yn,vn,Re,{mode:3,content:0,timesAssigned:4})}}function Wt(t){let e,l="",n,i,o;return{c(){e=C("button"),e.innerHTML=l,this.h()},l(r){e=T(r,"BUTTON",{class:!0,"data-svelte-h":!0}),Je(e)!=="svelte-uit58s"&&(e.innerHTML=l),this.h()},h(){h(e,"class","btn btn-circle btn-xs btn-outline btn-info absolute ifb left-0 right-0 svelte-1x1kfmk")},m(r,s){N(r,e,s),t[5](e),i||(o=[j(e,"click",t[4]),ye(n=Ll.call(null,e,{content:t[0],...t[3]}))],i=!0)},p(r,s){n&&xe(n.update)&&s&9&&n.update.call(null,{content:r[0],...r[3]})},d(r){r&&_(e),t[5](null),i=!1,Se(o)}}}function wn(t){let e,l=t[1]&&Wt(t);return{c(){l&&l.c(),e=Ve()},l(n){l&&l.l(n),e=Ve()},m(n,i){l&&l.m(n,i),N(n,e,i)},p(n,[i]){n[1]?l?l.p(n,i):(l=Wt(n),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},i:le,o:le,d(n){n&&_(e),l&&l.d(n)}}}function En(t,e,l){let n,{content:i}=e,{activate:o=!1}=e,r={allowHTML:!0,interactive:!0};function s(d){ct.call(this,t,d)}function a(d){$e[d?"unshift":"push"](()=>{n=d,l(2,n)})}return t.$$set=d=>{"content"in d&&l(0,i=d.content),"activate"in d&&l(1,o=d.activate)},t.$$.update=()=>{if(t.$$.dirty&4&&n!=null&&n.parentElement&&l(3,r.triggerTarget=n.parentElement,r),t.$$.dirty&6&&o&&n){n._tippy.show();const d=setTimeout(()=>{n._tippy.hide(),clearTimeout(d)},1e3)}},[i,o,n,r,s,a]}class Cn extends We{constructor(e){super(),Ge(this,e,En,wn,Re,{content:0,activate:1})}}function Tn(t){let e,l=t[4]("quiz.task")+"",n,i,o,r,s,a,d,y,c,u,b,f,k,w,A,z,E=t[4]("core.close")+"",I,S,q,R;return{c(){e=C("button"),n=Z(l),i=F(),o=C("dialog"),r=C("div"),s=C("h3"),a=Z(t[0]),d=F(),y=C("div"),c=C("p"),u=new Ml(!1),b=F(),f=C("div"),k=F(),w=C("div"),A=C("form"),z=C("button"),I=Z(E),this.h()},l(M){e=T(M,"BUTTON",{class:!0,style:!0});var L=D(e);n=$(L,l),L.forEach(_),i=X(M),o=T(M,"DIALOG",{class:!0});var g=D(o);r=T(g,"DIV",{class:!0});var O=D(r);s=T(O,"H3",{class:!0});var H=D(s);a=$(H,t[0]),H.forEach(_),d=X(O),y=T(O,"DIV",{});var P=D(y);c=T(P,"P",{class:!0});var se=D(c);u=Al(se,!1),se.forEach(_),b=X(P),f=T(P,"DIV",{class:!0}),D(f).forEach(_),P.forEach(_),k=X(O),w=T(O,"DIV",{class:!0,style:!0});var J=D(w);A=T(J,"FORM",{method:!0});var re=D(A);z=T(re,"BUTTON",{class:!0});var ue=D(z);I=$(ue,E),ue.forEach(_),re.forEach(_),J.forEach(_),O.forEach(_),g.forEach(_),this.h()},h(){h(e,"class","btn btn-outline btn-xs absolute top-4 left-4 rounded-full"),V(e,"opacity",t[3]?0:1),V(e,"transition","opacity 0.65s"),V(e,"z-index","9999999999999999"),h(s,"class","font-bold text-lg"),u.a=null,h(c,"class","py-4"),h(f,"class","relative"),h(z,"class","btn btn-primary"),h(A,"method","dialog"),h(w,"class","modal-action"),V(w,"justify-content","center"),h(r,"class","modal-box"),h(o,"class",S="modal "+(t[3]?"grow":"shrink")+" svelte-hk53f5")},m(M,L){N(M,e,L),m(e,n),N(M,i,L),N(M,o,L),m(o,r),m(r,s),m(s,a),m(r,d),m(r,y),m(y,c),u.m(t[1],c),m(y,b),m(y,f),m(r,k),m(r,w),m(w,A),m(A,z),m(z,I),t[7](o),q||(R=[j(e,"click",t[5]),j(r,"click",Ol(t[6])),j(o,"close",t[8]),j(o,"click",Sl(t[9]))],q=!0)},p(M,[L]){L&16&&l!==(l=M[4]("quiz.task")+"")&&ie(n,l),L&8&&V(e,"opacity",M[3]?0:1),L&1&&ie(a,M[0]),L&2&&u.p(M[1]),L&16&&E!==(E=M[4]("core.close")+"")&&ie(I,E),L&8&&S!==(S="modal "+(M[3]?"grow":"shrink")+" svelte-hk53f5")&&h(o,"class",S)},i:le,o:le,d(M){M&&(_(e),_(i),_(o)),t[7](null),q=!1,Se(R)}}}function In(t,e,l){let n;tt(t,ft,b=>l(4,n=b));let i,o=!0,{title:r=""}=e,{task:s=""}=e;function a(){l(3,o=!o)}function d(b){ct.call(this,t,b)}function y(b){$e[b?"unshift":"push"](()=>{i=b,l(2,i)})}const c=()=>l(3,o=!1),u=()=>i.close();return t.$$set=b=>{"title"in b&&l(0,r=b.title),"task"in b&&l(1,s=b.task)},t.$$.update=()=>{t.$$.dirty&12&&i&&o&&i.showModal()},[r,s,i,o,n,a,d,y,c,u]}class zn extends We{constructor(e){super(),Ge(this,e,In,Tn,Re,{title:0,task:1})}}function Dn(t){let e,l=t[2]("quiz.checkSolution")+"",n,i,o,r;return{c(){e=C("button"),n=Z(l),this.h()},l(s){e=T(s,"BUTTON",{class:!0,style:!0});var a=D(e);n=$(a,l),a.forEach(_),this.h()},h(){h(e,"class",i="btn btn-active btn-primary absolute bottom-4 right-0 left-0 ml-auto mr-auto w-fit rounded-full "+(t[1]?"block":"hidden")),V(e,"z-index","9999999999999999")},m(s,a){N(s,e,a),m(e,n),t[8](e),o||(r=[j(e,"click",t[7]),j(e,"click",t[3])],o=!0)},p(s,[a]){a&4&&l!==(l=s[2]("quiz.checkSolution")+"")&&ie(n,l),a&2&&i!==(i="btn btn-active btn-primary absolute bottom-4 right-0 left-0 ml-auto mr-auto w-fit rounded-full "+(s[1]?"block":"hidden"))&&h(e,"class",i)},i:le,o:le,d(s){s&&_(e),t[8](null),o=!1,Se(r)}}}function Mn(t,e,l){let n,i;tt(t,ft,u=>l(2,i=u));let{mode:o={}}=e,{finished:r=!1}=e,{assignedElementsCount:s=0}=e,a;function d(){o.exam&&l(1,n=!1)}function y(u){ct.call(this,t,u)}function c(u){$e[u?"unshift":"push"](()=>{a=u,l(0,a)})}return t.$$set=u=>{"mode"in u&&l(4,o=u.mode),"finished"in u&&l(5,r=u.finished),"assignedElementsCount"in u&&l(6,s=u.assignedElementsCount)},t.$$.update=()=>{t.$$.dirty&48&&l(1,n=o.free||o.exam&&r),t.$$.dirty&113&&(s&&o.instant||r&&o.end)&&a.click()},[a,n,i,d,o,r,s,y,c]}class An extends We{constructor(e){super(),Ge(this,e,Mn,Dn,Re,{mode:4,finished:5,assignedElementsCount:6})}}const On=(t,e={})=>{Zt(e);let{colors:l=["#FFC700","#FF0000","#2E3191","#41BBC7"],duration:n=3500,force:i=.5,particleCount:o=150,particleShape:r="mix",particleSize:s=12,destroyAfterDone:a=!0,stageHeight:d=800,stageWidth:y=1600}=e;(function(k){const w=Bt("style");w.dataset.neoconfetti="",w.textContent='@keyframes fk9XWG_y-axis{to{transform:translate3d(0,var(--stage-height),0)}}@keyframes fk9XWG_x-axis{to{transform:translate3d(var(--x-landing-point),0,0)}}@keyframes fk9XWG_rotation{50%{transform:rotate3d(var(--half-rotation),180deg)}to{transform:rotate3d(var(--rotation),360deg)}}.fk9XWG_container{width:0;height:0;z-index:1200;position:relative;overflow:visible}.fk9XWG_particle{animation:x-axis var(--duration-chaos)forwards cubic-bezier(var(--x1),var(--x2),var(--x3),var(--x4));animation-name:fk9XWG_x-axis}.fk9XWG_particle>div{animation:y-axis var(--duration-chaos)forwards cubic-bezier(var(--y1),var(--y2),var(--y3),var(--y4));width:var(--width);height:var(--height);animation-name:fk9XWG_y-axis;position:absolute;top:0;left:0}.fk9XWG_particle>div:before{height:100%;width:100%;content:"";background-color:var(--bgcolor);animation:rotation var(--rotation-duration)infinite linear;border-radius:var(--border-radius);animation-name:fk9XWG_rotation;display:block}',Lt(document.head,w)})(),t.classList.add("fk9XWG_container"),t.style.setProperty("--stage-height",d+"px");let c,u=Jt(o,l),b=Gt(t,u);function f(k,w){const A=_t(Ye()*(qn-1)),z=r!=="rectangles"&&(r==="circles"||Hn(A)),E=(q,R)=>k.style.setProperty(q,R+"");E("--x-landing-point",Dt(Et(Kt(w,90)-180),0,180,-y/2,y/2)+"px"),E("--duration-chaos",n-_t(1e3*Ye())+"ms");const I=Ye()<Bn?at(Ye()*Ln,2):0;E("--x1",I),E("--x2",-1*I),E("--x3",I),E("--x4",at(Et(Dt(Et(Kt(w,90)-180),0,180,-1,1)),4)),E("--y1",at(Ye()*Qt,4)),E("--y2",at(Ye()*i*(Fl()?1:-1),4)),E("--y3",Qt),E("--y4",at(Nn(Dt(Et(w-180),0,180,i,-i),0),4)),E("--width",(z?s:_t(4*Ye())+s/2)+"px"),E("--height",(z?s:_t(2*Ye())+s)+"px");const S=A.toString(2).padStart(3,"0").split("");E("--half-rotation",S.map(q=>+q/2+"")),E("--rotation",S),E("--rotation-duration",at(Ye()*(Sn-Yt)+Yt)+"ms"),E("--border-radius",z?"50%":0)}for(const[k,w]of Object.entries(b))f(w,u[+k].degree);return Promise.resolve().then(()=>c=setTimeout(()=>a&&(t.innerHTML=""),n)),{update(k){Zt(k);const w=k.particleCount??o,A=k.colors??l,z=k.stageHeight??d;if(u=Jt(w,A),w===o&&JSON.stringify(l)!==JSON.stringify(A))for(const[E,{color:I}]of Object.entries(u))b[+E].style.setProperty("--bgcolor",I);w!==o&&(t.innerHTML="",b=Gt(t,u)),a&&!k.destroyAfterDone&&clearTimeout(c),t.style.setProperty("--stage-height",z+"px"),l=A,n=k.duration??n,i=k.force??i,o=w,r=k.particleShape??r,s=k.particleSize??s,a=k.destroyAfterDone??a,d=z,y=k.stageWidth??y},destroy(){clearTimeout(c)}}};function Gt(t,e=[]){const l=[];for(const{color:n}of e){const i=Bt("div");i.className="fk9XWG_particle",i.style.setProperty("--bgcolor",n);const o=Bt("div");Lt(i,o),Lt(t,i),l.push(i)}return l}const Yt=200,Sn=800,Bn=.1,Ln=.3,Qt=.5,Et=Math.abs,Ye=Math.random,_t=Math.round,Nn=Math.max,Bt=t=>document.createElement(t),Lt=(t,e)=>t.appendChild(e),Jt=(t,e)=>Array.from({length:t},(l,n)=>({color:e[n%e.length],degree:360*n/t})),at=(t,e=2)=>_t((t+Number.EPSILON)*10**e)/10**e,Dt=(t,e,l,n,i)=>(t-e)*(i-n)/(l-e)+n,Kt=(t,e)=>t+e>360?t+e-360:t+e,Fl=()=>Ye()>.5,qn=6,Hn=t=>t!==1&&Fl(),Nt=t=>t===void 0,ut=(t,e)=>{if(!Nt(t)&&Number.isSafeInteger(t)&&t<0)throw new Error(e+" must be a positive integer")},Zt=({particleCount:t,duration:e,colors:l,particleSize:n,force:i,stageHeight:o,stageWidth:r,particleShape:s})=>{if(ut(t,"particleCount"),ut(e,"duration"),ut(n,"particleSize"),ut(i,"force"),ut(o,"stageHeight"),ut(r,"stageWidth"),!Nt(s)&&!/^(mix|circles|rectangles)$/i.test(s))throw new Error('particlesShape should be either "mix" or "circles" or "rectangle"');if(!Nt(l)&&!Array.isArray(l))throw new Error("colors must be an array of strings");if(i>1)throw new Error("force must be within 0 and 1")};function $t(t){return Object.prototype.toString.call(t)==="[object Date]"}function qt(t,e){if(t===e||t!==t)return()=>t;const l=typeof t;if(l!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const n=e.map((i,o)=>qt(t[o],i));return i=>n.map(o=>o(i))}if(l==="object"){if(!t||!e)throw new Error("Object cannot be null");if($t(t)&&$t(e)){t=t.getTime(),e=e.getTime();const o=e-t;return r=>new Date(t+r*o)}const n=Object.keys(e),i={};return n.forEach(o=>{i[o]=qt(t[o],e[o])}),o=>{const r={};return n.forEach(s=>{r[s]=i[s](o)}),r}}if(l==="number"){const n=e-t;return i=>t+i*n}throw new Error(`Cannot interpolate ${l} values`)}function Pn(t,e={}){const l=mn(t);let n,i=t;function o(r,s){if(t==null)return l.set(t=r),Promise.resolve();i=r;let a=n,d=!1,{delay:y=0,duration:c=400,easing:u=rn,interpolate:b=qt}=Ft(Ft({},e),s);if(c===0)return a&&(a.abort(),a=null),l.set(t=i),Promise.resolve();const f=cn()+y;let k;return n=fn(w=>{if(w<f)return!0;d||(k=b(t,r),typeof c=="function"&&(c=c(t,r)),d=!0),a&&(a.abort(),a=null);const A=w-f;return A>c?(l.set(t=r),!1):(l.set(t=k(u(A/c))),!0)}),n.promise}return{set:o,update:(r,s)=>o(r(i,t),s),subscribe:l.subscribe}}function xt(t){let e,l,n,i;return{c(){e=C("div"),this.h()},l(o){e=T(o,"DIV",{class:!0}),D(e).forEach(_),this.h()},h(){h(e,"class","center svelte-1pxpcqo")},m(o,r){N(o,e,r),n||(i=ye(l=On.call(null,e,{particleCount:t[1],force:.9})),n=!0)},p(o,r){l&&xe(l.update)&&r&2&&l.update.call(null,{particleCount:o[1],force:.9})},d(o){o&&_(e),n=!1,i()}}}function Un(t){let e,l,n,i,o,r,s,a,d,y,c,u,b,f,k=t[5]("core.close")+"",w,A,z,E=t[0]&&t[1]>49&&xt(t);return{c(){E&&E.c(),e=F(),l=C("dialog"),n=C("div"),i=C("article"),o=C("h3"),r=Z(t[3]),s=F(),a=C("div"),d=Z(t[4]),y=Z("%"),c=F(),u=C("div"),b=C("form"),f=C("button"),w=Z(k),this.h()},l(I){E&&E.l(I),e=X(I),l=T(I,"DIALOG",{class:!0});var S=D(l);n=T(S,"DIV",{class:!0});var q=D(n);i=T(q,"ARTICLE",{class:!0});var R=D(i);o=T(R,"H3",{class:!0});var M=D(o);r=$(M,t[3]),M.forEach(_),s=X(R),a=T(R,"DIV",{class:!0,style:!0,role:!0});var L=D(a);d=$(L,t[4]),y=$(L,"%"),L.forEach(_),R.forEach(_),c=X(q),u=T(q,"DIV",{class:!0});var g=D(u);b=T(g,"FORM",{method:!0});var O=D(b);f=T(O,"BUTTON",{class:!0});var H=D(f);w=$(H,k),H.forEach(_),O.forEach(_),g.forEach(_),q.forEach(_),S.forEach(_),this.h()},h(){h(o,"class","relative"),h(a,"class","radial-progress progress svelte-1pxpcqo"),V(a,"--value",t[4]),V(a,"--thickness","2px"),V(a,"--size","3.5rem"),h(a,"role","progressbar"),h(i,"class","prose"),h(f,"class","btn btn-primary"),h(b,"method","dialog"),h(u,"class","modal-action"),h(n,"class","modal-box"),h(l,"class","modal")},m(I,S){E&&E.m(I,S),N(I,e,S),N(I,l,S),m(l,n),m(n,i),m(i,o),m(o,r),m(i,s),m(i,a),m(a,d),m(a,y),m(n,c),m(n,u),m(u,b),m(b,f),m(f,w),t[11](l),A||(z=[j(f,"click",t[10]),j(n,"click",Ol(t[9])),j(l,"close",t[12]),j(l,"click",Sl(t[13]))],A=!0)},p(I,[S]){I[0]&&I[1]>49?E?E.p(I,S):(E=xt(I),E.c(),E.m(e.parentNode,e)):E&&(E.d(1),E=null),S&8&&ie(r,I[3]),S&16&&ie(d,I[4]),S&16&&V(a,"--value",I[4]),S&32&&k!==(k=I[5]("core.close")+"")&&ie(w,k)},i:le,o:le,d(I){I&&(_(e),_(l)),E&&E.d(I),t[11](null),A=!1,Se(z)}}}function Vn(t,e,l){let n,i,o;tt(t,ft,z=>l(5,o=z));let{solved:r}=e,{feedbacks:s}=e,{result:a}=e,d,y;const c=Pn(0,{duration:800,easing:bn});tt(t,c,z=>l(8,i=z));function u(){l(1,a=parseInt(a));let z=Object.keys(s).map(Number).sort((I,S)=>I-S),E=z[0];for(let I of z)if(I>=a){E=I;break}return s[E]}function b(z){ct.call(this,t,z)}function f(z){ct.call(this,t,z)}function k(z){$e[z?"unshift":"push"](()=>{d=z,l(2,d)})}const w=()=>l(0,r=!1),A=()=>d.close();return t.$$set=z=>{"solved"in z&&l(0,r=z.solved),"feedbacks"in z&&l(7,s=z.feedbacks),"result"in z&&l(1,a=z.result)},t.$$.update=()=>{t.$$.dirty&256&&l(4,n=parseInt(i*100)),t.$$.dirty&7&&d&&r&&(l(3,y=u()),c.set(a/100),d.showModal())},[r,a,d,y,n,o,c,s,i,b,f,k,w,A]}class jn extends We{constructor(e){super(),Ge(this,e,Vn,Un,Re,{solved:0,feedbacks:7,result:1})}}function Fn(t){let e,l,n,i,o,r;return e=new zn({props:{title:t[0],task:t[1]}}),n=new An({props:{finished:t[5],assignedElementsCount:t[6],mode:t[2]}}),n.$on("click",t[9]),o=new jn({props:{feedbacks:t[3],result:t[8],solved:t[7]}}),o.$on("click",function(){xe(t[4])&&t[4].apply(this,arguments)}),{c(){Ne(e.$$.fragment),l=F(),Ne(n.$$.fragment),i=F(),Ne(o.$$.fragment)},l(s){qe(e.$$.fragment,s),l=X(s),qe(n.$$.fragment,s),i=X(s),qe(o.$$.fragment,s)},m(s,a){He(e,s,a),N(s,l,a),He(n,s,a),N(s,i,a),He(o,s,a),r=!0},p(s,[a]){t=s;const d={};a&1&&(d.title=t[0]),a&2&&(d.task=t[1]),e.$set(d);const y={};a&32&&(y.finished=t[5]),a&64&&(y.assignedElementsCount=t[6]),a&4&&(y.mode=t[2]),n.$set(y);const c={};a&8&&(c.feedbacks=t[3]),a&256&&(c.result=t[8]),a&128&&(c.solved=t[7]),o.$set(c)},i(s){r||(Q(e.$$.fragment,s),Q(n.$$.fragment,s),Q(o.$$.fragment,s),r=!0)},o(s){x(e.$$.fragment,s),x(n.$$.fragment,s),x(o.$$.fragment,s),r=!1},d(s){s&&(_(l),_(i)),Pe(e,s),Pe(n,s),Pe(o,s)}}}function Xn(t,e,l){let n,i,o,r,{type:s}=e,{title:a=""}=e,{task:d=""}=e,{elements:y=[]}=e,{mode:c="free"}=e,{feedbacks:u={}}=e,{onFeedbackClosed:b=()=>{}}=e,{checkSolution:f=()=>{}}=e;function k(){f();const w=hn(s,y);rt.receiver.finished(w)}return t.$$set=w=>{"type"in w&&l(10,s=w.type),"title"in w&&l(0,a=w.title),"task"in w&&l(1,d=w.task),"elements"in w&&l(11,y=w.elements),"mode"in w&&l(2,c=w.mode),"feedbacks"in w&&l(3,u=w.feedbacks),"onFeedbackClosed"in w&&l(4,b=w.onFeedbackClosed),"checkSolution"in w&&l(12,f=w.checkSolution)},t.$$.update=()=>{t.$$.dirty&2048&&l(6,n=y.filter(w=>typeof w.assigned<"u").length),t.$$.dirty&2112&&l(5,i=n===y.length),t.$$.dirty&2080&&l(8,o=i?y.filter(w=>w.solved).length/y.length*100:0),t.$$.dirty&2048&&l(7,r=y.filter(w=>typeof w.solved<"u").length===y.length)},[a,d,c,u,b,i,n,r,o,k,s,y,f]}class Rn extends We{constructor(e){super(),Ge(this,e,Xn,Fn,Re,{type:10,title:0,task:1,elements:11,mode:2,feedbacks:3,onFeedbackClosed:4,checkSolution:12})}}var Mt={dragStart:!0},el=(t,e,l)=>Math.min(Math.max(t,e),l),At=t=>typeof t=="string",Wn=([t,e],l,n)=>{const i=(o,r)=>r===0?0:Math.ceil(o/r)*r;return[i(l,t),i(n,e)]},tl=(t,e)=>t.some(l=>e.some(n=>l.contains(n)));function Ot(t,e){if(t===void 0)return;if(Ht(t))return t.getBoundingClientRect();if(typeof t=="object"){const{top:n=0,left:i=0,right:o=0,bottom:r=0}=t;return{top:n,right:window.innerWidth-o,bottom:window.innerHeight-r,left:i}}if(t==="parent")return e.parentNode.getBoundingClientRect();const l=document.querySelector(t);if(l===null)throw new Error("The selector provided for bound doesn't exists in the document.");return l.getBoundingClientRect()}var Ct=(t,e,l)=>t.style.setProperty(e,l),Ht=t=>t instanceof HTMLElement,Xl=(t,e={})=>{let l,n,{bounds:i,axis:o="both",gpuAcceleration:r=!0,legacyTranslate:s=!0,transform:a,applyUserSelectHack:d=!0,disabled:y=!1,ignoreMultitouch:c=!1,recomputeBounds:u=Mt,grid:b,position:f,cancel:k,handle:w,defaultClass:A="neodrag",defaultClassDragging:z="neodrag-dragging",defaultClassDragged:E="neodrag-dragged",defaultPosition:I={x:0,y:0},onDragStart:S,onDrag:q,onDragEnd:R}=e,M=!1,L=0,g=0,O=0,H=0,P=0,se=0,{x:J,y:re}=f?{x:(f==null?void 0:f.x)??0,y:(f==null?void 0:f.y)??0}:I;K(J,re);let ue,pe,ke,Ie,ge,Ce="",Be=!!f;u={...Mt,...u};const G=document.body.style,W=t.classList;function K(U=L,de=g){if(!a){if(s){let ne=`${+U}px, ${+de}px`;return Ct(t,"transform",r?`translate3d(${ne}, 0)`:`translate(${ne})`)}return Ct(t,"translate",`${+U}px ${+de}px ${r?"1px":""}`)}const be=a({offsetX:U,offsetY:de,rootNode:t});At(be)&&Ct(t,"transform",be)}const te=(U,de)=>{const be={offsetX:L,offsetY:g,rootNode:t,currentNode:ge};t.dispatchEvent(new CustomEvent(U,{detail:be})),de==null||de(be)},we=addEventListener;we("pointerdown",ze,!1),we("pointerup",ve,!1),we("pointermove",ae,!1),Ct(t,"touch-action","none");const Me=()=>{let U=t.offsetWidth/pe.width;return isNaN(U)&&(U=1),U};function ze(U){if(y||U.button===2||c&&!U.isPrimary)return;if(u.dragStart&&(ue=Ot(i,t)),At(w)&&At(k)&&w===k)throw new Error("`handle` selector can't be same as `cancel` selector");if(W.add(A),ke=function(ce,he){if(!ce)return[he];if(Ht(ce))return[ce];if(Array.isArray(ce))return ce;const ee=he.querySelectorAll(ce);if(ee===null)throw new Error("Selector passed for `handle` option should be child of the element on which the action is applied");return Array.from(ee.values())}(w,t),Ie=function(ce,he){if(!ce)return[];if(Ht(ce))return[ce];if(Array.isArray(ce))return ce;const ee=he.querySelectorAll(ce);if(ee===null)throw new Error("Selector passed for `cancel` option should be child of the element on which the action is applied");return Array.from(ee.values())}(k,t),l=/(both|x)/.test(o),n=/(both|y)/.test(o),tl(Ie,ke))throw new Error("Element being dragged can't be a child of the element on which `cancel` is applied");const de=U.composedPath()[0];if(!ke.some(ce=>{var he;return ce.contains(de)||((he=ce.shadowRoot)==null?void 0:he.contains(de))})||tl(Ie,[de]))return;ge=ke.length===1?t:ke.find(ce=>ce.contains(de)),M=!0,pe=t.getBoundingClientRect(),d&&(Ce=G.userSelect,G.userSelect="none"),te("neodrag:start",S);const{clientX:be,clientY:ne}=U,De=Me();l&&(O=be-J/De),n&&(H=ne-re/De),ue&&(P=be-pe.left,se=ne-pe.top)}function ve(){M&&(u.dragEnd&&(ue=Ot(i,t)),W.remove(z),W.add(E),d&&(G.userSelect=Ce),te("neodrag:end",R),l&&(O=L),n&&(H=g),M=!1)}function ae(U){if(!M)return;u.drag&&(ue=Ot(i,t)),W.add(z),U.preventDefault(),pe=t.getBoundingClientRect();let de=U.clientX,be=U.clientY;const ne=Me();if(ue){const De={left:ue.left+P,top:ue.top+se,right:ue.right+P-pe.width,bottom:ue.bottom+se-pe.height};de=el(de,De.left,De.right),be=el(be,De.top,De.bottom)}if(Array.isArray(b)){let[De,ce]=b;if(isNaN(+De)||De<0)throw new Error("1st argument of `grid` must be a valid positive number");if(isNaN(+ce)||ce<0)throw new Error("2nd argument of `grid` must be a valid positive number");let he=de-O,ee=be-H;[he,ee]=Wn([De/ne,ce/ne],he,ee),de=O+he,be=H+ee}l&&(L=Math.round((de-O)*ne)),n&&(g=Math.round((be-H)*ne)),J=L,re=g,te("neodrag",q),K()}return{destroy:()=>{const U=removeEventListener;U("pointerdown",ze,!1),U("pointerup",ve,!1),U("pointermove",ae,!1)},update:U=>{var be,ne;o=U.axis||"both",y=U.disabled??!1,c=U.ignoreMultitouch??!1,w=U.handle,i=U.bounds,u=U.recomputeBounds??Mt,k=U.cancel,d=U.applyUserSelectHack??!0,b=U.grid,r=U.gpuAcceleration??!0,s=U.legacyTranslate??!0,a=U.transform;const de=W.contains(E);W.remove(A,E),A=U.defaultClass??"neodrag",z=U.defaultClassDragging??"neodrag-dragging",E=U.defaultClassDragged??"neodrag-dragged",W.add(A),de&&W.add(E),Be&&(J=L=((be=U.position)==null?void 0:be.x)??L,re=g=((ne=U.position)==null?void 0:ne.y)??g,K())}}};const{window:Pt}=Vl;function ll(t,e,l){const n=t.slice();return n[88]=e[l],n[89]=e,n[90]=l,n}function nl(t,e,l){const n=t.slice();return n[91]=e[l],n}function Gn(t){let e,l=t[15]("quiz.hint")+"",n;return{c(){e=C("h3"),n=Z(l),this.h()},l(i){e=T(i,"H3",{class:!0,slot:!0});var o=D(e);n=$(o,l),o.forEach(_),this.h()},h(){h(e,"class","font-bold text-lg"),h(e,"slot","header")},m(i,o){N(i,e,o),m(e,n)},p(i,o){o[0]&32768&&l!==(l=i[15]("quiz.hint")+"")&&ie(n,l)},d(i){i&&_(e)}}}function il(t){let e,l='<i class="fal fa-times"></i>',n,i;return{c(){e=C("div"),e.innerHTML=l,this.h()},l(o){e=T(o,"DIV",{class:!0,"data-svelte-h":!0}),Je(e)!=="svelte-1c7v269"&&(e.innerHTML=l),this.h()},h(){h(e,"class","absolute right-2 btn btn-xs btn-circle btn-ghost mt-3")},m(o,r){N(o,e,r),n||(i=j(e,"click",t[42]),n=!0)},p:le,d(o){o&&_(e),n=!1,i()}}}function Yn(t){var b,f;let e,l,n=t[15]("quiz.addHintDescription")+"",i,o,r,s,a,d=((f=(b=t[11])==null?void 0:b.hint)==null?void 0:f.trim().length)>0,y,c,u=d&&il(t);return{c(){e=C("div"),l=C("p"),i=Z(n),o=F(),r=C("div"),s=C("input"),a=F(),u&&u.c(),this.h()},l(k){e=T(k,"DIV",{slot:!0});var w=D(e);l=T(w,"P",{class:!0});var A=D(l);i=$(A,n),A.forEach(_),o=X(w),r=T(w,"DIV",{class:!0});var z=D(r);s=T(z,"INPUT",{type:!0,class:!0}),a=X(z),u&&u.l(z),z.forEach(_),w.forEach(_),this.h()},h(){h(l,"class","py-4"),h(s,"type","text"),h(s,"class","input input-bordered w-full pr-10"),h(r,"class","relative"),h(e,"slot","body")},m(k,w){N(k,e,w),m(e,l),m(l,i),m(e,o),m(e,r),m(r,s),Tt(s,t[11].hint),m(r,a),u&&u.m(r,null),y||(c=[j(s,"input",t[41]),j(s,"input",t[16])],y=!0)},p(k,w){var A,z;w[0]&32768&&n!==(n=k[15]("quiz.addHintDescription")+"")&&ie(i,n),w[0]&2048&&s.value!==k[11].hint&&Tt(s,k[11].hint),w[0]&2048&&(d=((z=(A=k[11])==null?void 0:A.hint)==null?void 0:z.trim().length)>0),d?u?u.p(k,w):(u=il(k),u.c(),u.m(r,null)):u&&(u.d(1),u=null)},d(k){k&&_(e),u&&u.d(),y=!1,Se(c)}}}function Qn(t){let e,l=t[15]("core.close")+"",n;return{c(){e=C("button"),n=Z(l),this.h()},l(i){e=T(i,"BUTTON",{class:!0,slot:!0});var o=D(e);n=$(o,l),o.forEach(_),this.h()},h(){h(e,"class","btn btn-primary"),h(e,"slot","footer")},m(i,o){N(i,e,o),m(e,n)},p(i,o){o[0]&32768&&l!==(l=i[15]("core.close")+"")&&ie(n,l)},d(i){i&&_(e)}}}function Jn(t){let e,l=t[15]("quiz.feedback.add")+"",n;return{c(){e=C("h3"),n=Z(l),this.h()},l(i){e=T(i,"H3",{class:!0,slot:!0});var o=D(e);n=$(o,l),o.forEach(_),this.h()},h(){h(e,"class","font-bold text-lg"),h(e,"slot","header")},m(i,o){N(i,e,o),m(e,n)},p(i,o){o[0]&32768&&l!==(l=i[15]("quiz.feedback.add")+"")&&ie(n,l)},d(i){i&&_(e)}}}function ol(t){let e,l='<i class="fal fa-times"></i>',n,i;return{c(){e=C("div"),e.innerHTML=l,this.h()},l(o){e=T(o,"DIV",{class:!0,"data-svelte-h":!0}),Je(e)!=="svelte-rw62dz"&&(e.innerHTML=l),this.h()},h(){h(e,"class","absolute right-2 btn btn-xs btn-circle btn-ghost mt-3")},m(o,r){N(o,e,r),n||(i=j(e,"click",t[45]),n=!0)},p:le,d(o){o&&_(e),n=!1,i()}}}function Kn(t){var b;let e,l,n=t[15]("quiz.feedback.description")+"",i,o,r,s,a,d=((b=t[11].feedback)==null?void 0:b.trim().length)>0,y,c,u=d&&ol(t);return{c(){e=C("div"),l=C("p"),i=Z(n),o=F(),r=C("div"),s=C("input"),a=F(),u&&u.c(),this.h()},l(f){e=T(f,"DIV",{slot:!0});var k=D(e);l=T(k,"P",{class:!0});var w=D(l);i=$(w,n),w.forEach(_),o=X(k),r=T(k,"DIV",{class:!0});var A=D(r);s=T(A,"INPUT",{type:!0,class:!0}),a=X(A),u&&u.l(A),A.forEach(_),k.forEach(_),this.h()},h(){h(l,"class","py-4"),h(s,"type","text"),h(s,"class","input input-bordered w-full pr-10"),h(r,"class","relative"),h(e,"slot","body")},m(f,k){N(f,e,k),m(e,l),m(l,i),m(e,o),m(e,r),m(r,s),Tt(s,t[11].feedback),m(r,a),u&&u.m(r,null),y||(c=[j(s,"input",t[44]),j(s,"input",t[16])],y=!0)},p(f,k){var w;k[0]&32768&&n!==(n=f[15]("quiz.feedback.description")+"")&&ie(i,n),k[0]&2048&&s.value!==f[11].feedback&&Tt(s,f[11].feedback),k[0]&2048&&(d=((w=f[11].feedback)==null?void 0:w.trim().length)>0),d?u?u.p(f,k):(u=ol(f),u.c(),u.m(r,null)):u&&(u.d(1),u=null)},d(f){f&&_(e),u&&u.d(),y=!1,Se(c)}}}function Zn(t){let e,l=t[15]("core.close")+"",n;return{c(){e=C("button"),n=Z(l),this.h()},l(i){e=T(i,"BUTTON",{class:!0,slot:!0});var o=D(e);n=$(o,l),o.forEach(_),this.h()},h(){h(e,"class","btn btn-primary"),h(e,"slot","footer")},m(i,o){N(i,e,o),m(e,n)},p(i,o){o[0]&32768&&l!==(l=i[15]("core.close")+"")&&ie(n,l)},d(i){i&&_(e)}}}function $n(t){let e,l;return{c(){e=C("img"),this.h()},l(n){e=T(n,"IMG",{class:!0,src:!0}),this.h()},h(){h(e,"class","w-full h-full object-contain"),Oe(e.src,l=t[88].src)||h(e,"src",l)},m(n,i){N(n,e,i)},p(n,i){i[0]&128&&!Oe(e.src,l=n[88].src)&&h(e,"src",l)},i:le,o:le,d(n){n&&_(e)}}}function xn(t){let e,l=t[88].src+"",n,i,o;return{c(){e=C("div"),n=Z(l),this.h()},l(r){e=T(r,"DIV",{class:!0});var s=D(e);n=$(s,l),s.forEach(_),this.h()},h(){h(e,"class","text-black text-center edit-group mt-20 mb-20 svelte-1yydgt2")},m(r,s){N(r,e,s),m(e,n),i||(o=[ye(gt.call(null,e)),ye(mt.call(null,e))],i=!0)},p(r,s){s[0]&128&&l!==(l=r[88].src+"")&&ie(n,l)},i:le,o:le,d(r){r&&_(e),i=!1,Se(o)}}}function ei(t){let e,l=t[88].src+"",n,i,o,r;function s(){return t[49](t[88])}function a(...d){return t[50](t[88],...d)}return{c(){e=C("div"),n=Z(l),this.h()},l(d){e=T(d,"DIV",{class:!0,contenteditable:!0});var y=D(e);n=$(y,l),y.forEach(_),this.h()},h(){h(e,"class","text-black text-center edit-group mt-20 mb-20 svelte-1yydgt2"),h(e,"contenteditable",!0)},m(d,y){N(d,e,y),m(e,n),o||(r=[ye(gt.call(null,e)),ye(i=ql.call(null,e,t[88].isEditing)),ye(mt.call(null,e)),j(e,"blur",s),j(e,"keyup",a)],o=!0)},p(d,y){t=d,y[0]&128&&l!==(l=t[88].src+"")&&sn(n,l,!0),i&&xe(i.update)&&y[0]&128&&i.update.call(null,t[88].isEditing)},i:le,o:le,d(d){d&&_(e),o=!1,Se(r)}}}function ti(t){let e,l;function n(...i){return t[47](t[88],...i)}return e=new Rl({props:{color:"btn-accent-light",types:{text:!0,image:!0},textText:t[15]("quiz.groupassignment.backgroundText"),imageText:t[15]("quiz.groupassignment.backgroundImage")}}),e.$on("click:text",n),e.$on("click:image",t[48]),{c(){Ne(e.$$.fragment)},l(i){qe(e.$$.fragment,i)},m(i,o){He(e,i,o),l=!0},p(i,o){t=i;const r={};o[0]&32768&&(r.textText=t[15]("quiz.groupassignment.backgroundText")),o[0]&32768&&(r.imageText=t[15]("quiz.groupassignment.backgroundImage")),e.$set(r)},i(i){l||(Q(e.$$.fragment,i),l=!0)},o(i){x(e.$$.fragment,i),l=!1},d(i){Pe(e,i)}}}function rl(t){let e,l,n=t[15]("quiz.groupassignment.deleteGroup")+"",i,o,r;function s(...a){return t[55](t[88],...a)}return{c(){e=C("li"),l=C("a"),i=Z(n),this.h()},l(a){e=T(a,"LI",{});var d=D(e);l=T(d,"A",{class:!0});var y=D(l);i=$(y,n),y.forEach(_),d.forEach(_),this.h()},h(){h(l,"class","text-error")},m(a,d){N(a,e,d),m(e,l),m(l,i),o||(r=j(l,"click",s),o=!0)},p(a,d){t=a,d[0]&32768&&n!==(n=t[15]("quiz.groupassignment.deleteGroup")+"")&&ie(i,n)},d(a){a&&_(e),o=!1,r()}}}function sl(t){var st;let e,l,n,i,o,r=t[91].hint&&t[91].hint.trim().length>0,s,a,d,y,c,u,b,f='<i class="far fa-ellipsis-v"></i>',k,w,A,z,E,I=t[15]("quiz.hint")+"",S,q,R=t[15](t[91].hint?"core.change":"core.add")+"",M,L,g,O,H=t[15]("quiz.feedback.title")+"",P,se,J=t[15](t[91].feedback?"core.change":"core.add")+"",re,ue,pe,ke,Ie=t[15]("quiz.groupassignment.deleteCard")+"",ge,Ce,Be,G,W,K,te,we;const Me=[ri,oi,ii,ni,li],ze=[];function ve(oe,B){return oe[91].type?oe[91].type=="text"?1:oe[91].type=="image"?2:oe[91].type=="video"?3:oe[91].type=="audio"?4:-1:0}~(n=ve(t))&&(i=ze[n]=Me[n](t));let ae=r&&al(t),U=!t[91].isEditing&&((st=t[91].tts)==null?void 0:st.enabled)&&ul(t);function de(...oe){return t[65](t[91],...oe)}function be(...oe){return t[66](t[91],...oe)}function ne(...oe){return t[67](t[91],...oe)}function De(...oe){return t[68](t[91],...oe)}function ce(...oe){return t[69](t[91],...oe)}function he(...oe){return t[70](t[91],...oe)}function ee(...oe){return t[71](t[91],...oe)}return{c(){e=C("div"),l=C("div"),i&&i.c(),o=F(),ae&&ae.c(),s=F(),U&&U.c(),a=F(),d=C("div"),y=F(),c=C("div"),u=C("div"),b=C("label"),b.innerHTML=f,k=F(),w=C("div"),A=C("ul"),z=C("li"),E=C("a"),S=Z(I),q=F(),M=Z(R),L=F(),g=C("li"),O=C("a"),P=Z(H),se=F(),re=Z(J),ue=F(),pe=C("li"),ke=C("a"),ge=Z(Ie),this.h()},l(oe){e=T(oe,"DIV",{id:!0,class:!0,style:!0});var B=D(e);l=T(B,"DIV",{class:!0});var Y=D(l);i&&i.l(Y),Y.forEach(_),o=X(B),ae&&ae.l(B),s=X(B),U&&U.l(B),a=X(B),d=T(B,"DIV",{class:!0,style:!0}),D(d).forEach(_),y=X(B),c=T(B,"DIV",{class:!0,style:!0});var Te=D(c);u=T(Te,"DIV",{class:!0});var _e=D(u);b=T(_e,"LABEL",{tabindex:!0,class:!0,"data-svelte-h":!0}),Je(b)!=="svelte-1tc6nyk"&&(b.innerHTML=f),k=X(_e),w=T(_e,"DIV",{tabindex:!0,class:!0});var Ue=D(w);A=T(Ue,"UL",{class:!0});var Xe=D(A);z=T(Xe,"LI",{});var Le=D(z);E=T(Le,"A",{class:!0});var Ke=D(E);S=$(Ke,I),q=X(Ke),M=$(Ke,R),Ke.forEach(_),Le.forEach(_),L=X(Xe),g=T(Xe,"LI",{});var nt=D(g);O=T(nt,"A",{class:!0});var Ze=D(O);P=$(Ze,H),se=X(Ze),re=$(Ze,J),Ze.forEach(_),nt.forEach(_),ue=X(Xe),pe=T(Xe,"LI",{});var it=D(pe);ke=T(it,"A",{class:!0});var ot=D(ke);ge=$(ot,Ie),ot.forEach(_),it.forEach(_),Xe.forEach(_),Ue.forEach(_),_e.forEach(_),Te.forEach(_),B.forEach(_),this.h()},h(){h(l,"class","w-full h-full relative inline-block"),h(d,"class","pin"),V(d,"background-color",t[7][t[91].group].backgroundColor),h(b,"tabindex","0"),h(b,"class","btn btn-xs btn-circle btn-ghost"),h(E,"class","text-info"),h(O,"class","text-warning"),h(ke,"class","text-error"),h(A,"class","p-2 shadow menu dropdown-content z-[1] bg-base-100 rounded-box w-52"),h(w,"tabindex","0"),h(w,"class","card compact dropdown-content z-[1] shadow bg-base-100 rounded-box w-64"),h(u,"class","dropdown dropdown-end"),h(c,"class","absolute right-0 top-0 user-card-actions svelte-1yydgt2"),h(c,"style",Ce="z-index:"+(t[10]+1)+"}; "+(t[91].isEditing?"display: none;":"")),h(e,"id",Be="user-card-"+t[91].id),h(e,"class",G="absolute card bg-white shadow border cursor-grab user-card display-inline-block "+(t[91].feedback?"shadow-warning shadow-md":"")+" svelte-1yydgt2"),V(e,"left",t[91].x),V(e,"top",t[91].y),V(e,"z-index",t[91].zIndex),V(e,"width",t[6].width+"px"),V(e,"padding",t[6].padding+"px"),V(e,"opacity",t[88].isEditing||t[14]&&t[11].id!==t[91].id?.3:1)},m(oe,B){N(oe,e,B),m(e,l),~n&&ze[n].m(l,null),m(e,o),ae&&ae.m(e,null),m(e,s),U&&U.m(e,null),m(e,a),m(e,d),m(e,y),m(e,c),m(c,u),m(u,b),m(u,k),m(u,w),m(w,A),m(A,z),m(z,E),m(E,S),m(E,q),m(E,M),m(A,L),m(A,g),m(g,O),m(O,P),m(O,se),m(O,re),m(A,ue),m(A,pe),m(pe,ke),m(ke,ge),K=!0,te||(we=[j(E,"click",de),j(O,"click",be),ye(Nl.call(null,ke,{sound:"/media/delete-sound.mp3"})),j(ke,"click",ne),ye(W=Xl.call(null,e,{bounds:"body",ignoreMultitouch:!1,DragBoundsCoords:{top:0,left:0,right:t[1],bottom:t[0]},position:{x:t[91].x,y:t[91].y}})),j(e,"neodrag:start",De),j(e,"mousedown",ce),j(e,"mouseup",he),j(e,"mouseleave",ee)],te=!0)},p(oe,B){var Te;t=oe;let Y=n;n=ve(t),n===Y?~n&&ze[n].p(t,B):(i&&(je(),x(ze[Y],1,1,()=>{ze[Y]=null}),Fe()),~n?(i=ze[n],i?i.p(t,B):(i=ze[n]=Me[n](t),i.c()),Q(i,1),i.m(l,null)):i=null),B[0]&256&&(r=t[91].hint&&t[91].hint.trim().length>0),r?ae?(ae.p(t,B),B[0]&256&&Q(ae,1)):(ae=al(t),ae.c(),Q(ae,1),ae.m(e,s)):ae&&(je(),x(ae,1,1,()=>{ae=null}),Fe()),!t[91].isEditing&&((Te=t[91].tts)!=null&&Te.enabled)?U?U.p(t,B):(U=ul(t),U.c(),U.m(e,a)):U&&(U.d(1),U=null),(!K||B[0]&384)&&V(d,"background-color",t[7][t[91].group].backgroundColor),(!K||B[0]&32768)&&I!==(I=t[15]("quiz.hint")+"")&&ie(S,I),(!K||B[0]&33024)&&R!==(R=t[15](t[91].hint?"core.change":"core.add")+"")&&ie(M,R),(!K||B[0]&32768)&&H!==(H=t[15]("quiz.feedback.title")+"")&&ie(P,H),(!K||B[0]&33024)&&J!==(J=t[15](t[91].feedback?"core.change":"core.add")+"")&&ie(re,J),(!K||B[0]&32768)&&Ie!==(Ie=t[15]("quiz.groupassignment.deleteCard")+"")&&ie(ge,Ie),(!K||B[0]&1280&&Ce!==(Ce="z-index:"+(t[10]+1)+"}; "+(t[91].isEditing?"display: none;":"")))&&h(c,"style",Ce),(!K||B[0]&256&&Be!==(Be="user-card-"+t[91].id))&&h(e,"id",Be),(!K||B[0]&256&&G!==(G="absolute card bg-white shadow border cursor-grab user-card display-inline-block "+(t[91].feedback?"shadow-warning shadow-md":"")+" svelte-1yydgt2"))&&h(e,"class",G),(!K||B[0]&256)&&V(e,"left",t[91].x),(!K||B[0]&256)&&V(e,"top",t[91].y),(!K||B[0]&256)&&V(e,"z-index",t[91].zIndex),(!K||B[0]&64)&&V(e,"width",t[6].width+"px"),(!K||B[0]&64)&&V(e,"padding",t[6].padding+"px"),(!K||B[0]&18816)&&V(e,"opacity",t[88].isEditing||t[14]&&t[11].id!==t[91].id?.3:1),W&&xe(W.update)&&B[0]&259&&W.update.call(null,{bounds:"body",ignoreMultitouch:!1,DragBoundsCoords:{top:0,left:0,right:t[1],bottom:t[0]},position:{x:t[91].x,y:t[91].y}})},i(oe){K||(Q(i),Q(ae),K=!0)},o(oe){x(i),x(ae),K=!1},d(oe){oe&&_(e),~n&&ze[n].d(),ae&&ae.d(),U&&U.d(),te=!1,Se(we)}}}function li(t){let e,l,n,i;return{c(){e=C("audio"),l=C("source"),this.h()},l(o){e=T(o,"AUDIO",{class:!0});var r=D(e);l=T(r,"SOURCE",{src:!0,type:!0}),r.forEach(_),this.h()},h(){Oe(l.src,n=t[91].src)||h(l,"src",n),h(l,"type",i=t[91].type),e.controls=!0,h(e,"class","w-full h-full object-cover rounded-2xl")},m(o,r){N(o,e,r),m(e,l)},p(o,r){r[0]&256&&!Oe(l.src,n=o[91].src)&&h(l,"src",n),r[0]&256&&i!==(i=o[91].type)&&h(l,"type",i)},i:le,o:le,d(o){o&&_(e)}}}function ni(t){let e,l,n;return{c(){e=C("video"),l=C("source"),this.h()},l(i){e=T(i,"VIDEO",{class:!0});var o=D(e);l=T(o,"SOURCE",{src:!0}),o.forEach(_),this.h()},h(){Oe(l.src,n=t[91].src)||h(l,"src",n),e.controls=!0,h(e,"class","w-full h-full object-cover rounded-2xl")},m(i,o){N(i,e,o),m(e,l)},p(i,o){o[0]&256&&!Oe(l.src,n=i[91].src)&&h(l,"src",n)},i:le,o:le,d(i){i&&_(e)}}}function ii(t){let e,l,n,i,o;return{c(){e=C("img"),this.h()},l(r){e=T(r,"IMG",{src:!0,class:!0,style:!0}),this.h()},h(){Oe(e.src,l=t[91].src)||h(e,"src",l),h(e,"class","w-full h-full object-cover rounded-2xl"),h(e,"style",n=t[14]?"pointer-events: none;":"")},m(r,s){N(r,e,s),i||(o=ye(Hl.call(null,e)),i=!0)},p(r,s){s[0]&256&&!Oe(e.src,l=r[91].src)&&h(e,"src",l),s[0]&16384&&n!==(n=r[14]?"pointer-events: none;":"")&&h(e,"style",n)},i:le,o:le,d(r){r&&_(e),i=!1,o()}}}function oi(t){let e,l=t[91].src+"",n,i,o,r,s,a,d,y=t[15]("quiz.tts")+"",c,u,b,f,k,w;function A(...I){return t[60](t[91],...I)}function z(...I){return t[61](t[91],...I)}function E(...I){return t[62](t[91],...I)}return{c(){e=C("div"),n=Z(l),r=F(),s=C("div"),a=C("label"),d=C("span"),c=Z(y),u=F(),b=C("input"),this.h()},l(I){e=T(I,"DIV",{contenteditable:!0,class:!0});var S=D(e);n=$(S,l),S.forEach(_),r=X(I),s=T(I,"DIV",{class:!0,style:!0});var q=D(s);a=T(q,"LABEL",{class:!0});var R=D(a);d=T(R,"SPAN",{class:!0});var M=D(d);c=$(M,y),M.forEach(_),u=X(R),b=T(R,"INPUT",{type:!0,class:!0}),R.forEach(_),q.forEach(_),this.h()},h(){var I;h(e,"contenteditable","true"),h(e,"class","w-full user-text"),h(d,"class","label-text"),h(b,"type","checkbox"),h(b,"class","toggle"),b.checked=f=(I=t[91].tts)==null?void 0:I.enabled,h(a,"class","label cursor-pointer"),h(s,"class","form-control"),V(s,"visibility",t[91].isEditing?"visible":"hidden")},m(I,S){N(I,e,S),m(e,n),N(I,r,S),N(I,s,S),m(s,a),m(a,d),m(d,c),m(a,u),m(a,b),k||(w=[ye(i=ql.call(null,e,t[91].isEditing)),ye(o=mt.call(null,e,{parentId:"user-card-"+t[91].id})),ye(gt.call(null,e)),j(e,"mousedown",A),j(e,"keyup",z),j(s,"click",E)],k=!0)},p(I,S){var q;t=I,S[0]&256&&l!==(l=t[91].src+"")&&an(n,l),i&&xe(i.update)&&S[0]&256&&i.update.call(null,t[91].isEditing),o&&xe(o.update)&&S[0]&256&&o.update.call(null,{parentId:"user-card-"+t[91].id}),S[0]&32768&&y!==(y=t[15]("quiz.tts")+"")&&ie(c,y),S[0]&256&&f!==(f=(q=t[91].tts)==null?void 0:q.enabled)&&(b.checked=f),S[0]&256&&V(s,"visibility",t[91].isEditing?"visible":"hidden")},i:le,o:le,d(I){I&&(_(e),_(r),_(s)),k=!1,Se(w)}}}function ri(t){let e,l;function n(...o){return t[58](t[91],...o)}function i(...o){return t[59](t[91],...o)}return e=new Rl({}),e.$on("click:text",n),e.$on("click:media",i),{c(){Ne(e.$$.fragment)},l(o){qe(e.$$.fragment,o)},m(o,r){He(e,o,r),l=!0},p(o,r){t=o},i(o){l||(Q(e.$$.fragment,o),l=!0)},o(o){x(e.$$.fragment,o),l=!1},d(o){Pe(e,o)}}}function al(t){let e,l;function n(...i){return t[63](t[91],...i)}return e=new jl({props:{content:t[91].hint}}),e.$on("click",n),{c(){Ne(e.$$.fragment)},l(i){qe(e.$$.fragment,i)},m(i,o){He(e,i,o),l=!0},p(i,o){t=i;const r={};o[0]&256&&(r.content=t[91].hint),e.$set(r)},i(i){l||(Q(e.$$.fragment,i),l=!0)},o(i){x(e.$$.fragment,i),l=!1},d(i){Pe(e,i)}}}function ul(t){let e,l='<i class="far fa-ear"></i>',n,i;return{c(){e=C("button"),e.innerHTML=l,this.h()},l(o){e=T(o,"BUTTON",{class:!0,"data-svelte-h":!0}),Je(e)!=="svelte-16as8a9"&&(e.innerHTML=l),this.h()},h(){h(e,"class","btn btn-circle btn-info btn-xs btn-outline text-info absolute bottom-2 right-2")},m(o,r){N(o,e,r),n||(i=j(e,"click",t[64]),n=!0)},p:le,d(o){o&&_(e),n=!1,i()}}}function cl(t){let e,l,n=t[91].group==t[88].id&&sl(t);return{c(){n&&n.c(),e=Ve()},l(i){n&&n.l(i),e=Ve()},m(i,o){n&&n.m(i,o),N(i,e,o),l=!0},p(i,o){i[91].group==i[88].id?n?(n.p(i,o),o[0]&384&&Q(n,1)):(n=sl(i),n.c(),Q(n,1),n.m(e.parentNode,e)):n&&(je(),x(n,1,1,()=>{n=null}),Fe())},i(i){l||(Q(n),l=!0)},o(i){x(n),l=!1},d(i){i&&_(e),n&&n.d(i)}}}function fl(t){let e,l,n,i,o,r,s,a,d='<i class="far fa-ellipsis-v"></i>',y,c,u,b,f,k=t[15]("quiz.groupassignment.changeBackgroundText")+"",w,A,z,E,I=t[15]("quiz.groupassignment.changeBackgroundImage")+"",S,q,R,M,L=t[15]("quiz.groupassignment.changeBackgroundColor")+"",g,O,H,P,se,J,re,ue=t[15]("quiz.groupassignment.resetBackground")+"",pe,ke,Ie,ge,Ce,Be,G,W,K,te,we,Me;const ze=[ti,ei,xn,$n],ve=[];function ae(B,Y){return!B[88].type&&B[88].isEditing?0:B[88].type==="text"&&B[88].isEditing?1:B[88].type==="text"&&!B[88].isEditing?2:B[88].type==="image"?3:-1}~(n=ae(t))&&(i=ve[n]=ze[n](t));function U(...B){return t[51](t[88],...B)}function de(...B){return t[53](t[88],...B)}function be(...B){return t[54](t[88],...B)}let ne=t[7].length>2&&rl(t);function De(...B){return t[56](t[88],...B)}function ce(){return t[57](t[88],t[89],t[90])}let he=Qe(t[8]),ee=[];for(let B=0;B<he.length;B+=1)ee[B]=cl(nl(t,he,B));const st=B=>x(ee[B],1,1,()=>{ee[B]=null});function oe(...B){return t[72](t[88],...B)}return{c(){e=C("div"),l=C("div"),i&&i.c(),o=F(),r=C("div"),s=C("div"),a=C("label"),a.innerHTML=d,y=F(),c=C("div"),u=C("ul"),b=C("li"),f=C("a"),w=Z(k),A=F(),z=C("li"),E=C("a"),S=Z(I),q=F(),R=C("li"),M=C("a"),g=Z(L),O=C("label"),H=C("input"),se=F(),J=C("li"),re=C("a"),pe=Z(ue),ke=F(),ne&&ne.c(),Ie=F(),ge=C("button"),Ce=C("i"),Be=F();for(let B=0;B<ee.length;B+=1)ee[B].c();G=F(),this.h()},l(B){e=T(B,"DIV",{class:!0,style:!0,id:!0});var Y=D(e);l=T(Y,"DIV",{class:!0,style:!0});var Te=D(l);i&&i.l(Te),Te.forEach(_),o=X(Y),r=T(Y,"DIV",{class:!0,style:!0});var _e=D(r);s=T(_e,"DIV",{class:!0});var Ue=D(s);a=T(Ue,"LABEL",{tabindex:!0,class:!0,"data-svelte-h":!0}),Je(a)!=="svelte-7pwrsu"&&(a.innerHTML=d),y=X(Ue),c=T(Ue,"DIV",{tabindex:!0,class:!0});var Xe=D(c);u=T(Xe,"UL",{class:!0});var Le=D(u);b=T(Le,"LI",{});var Ke=D(b);f=T(Ke,"A",{});var nt=D(f);w=$(nt,k),nt.forEach(_),Ke.forEach(_),A=X(Le),z=T(Le,"LI",{});var Ze=D(z);E=T(Ze,"A",{});var it=D(E);S=$(it,I),it.forEach(_),Ze.forEach(_),q=X(Le),R=T(Le,"LI",{});var ot=D(R);M=T(ot,"A",{});var dt=D(M);g=$(dt,L),O=T(dt,"LABEL",{class:!0,style:!0});var bt=D(O);H=T(bt,"INPUT",{type:!0,class:!0}),bt.forEach(_),dt.forEach(_),ot.forEach(_),se=X(Le),J=T(Le,"LI",{});var kt=D(J);re=T(kt,"A",{});var vt=D(re);pe=$(vt,ue),vt.forEach(_),kt.forEach(_),ke=X(Le),ne&&ne.l(Le),Le.forEach(_),Xe.forEach(_),Ue.forEach(_),_e.forEach(_),Ie=X(Y),ge=T(Y,"BUTTON",{type:!0,class:!0,style:!0});var yt=D(ge);Ce=T(yt,"I",{class:!0}),D(Ce).forEach(_),yt.forEach(_),Be=X(Y);for(let ht=0;ht<ee.length;ht+=1)ee[ht].l(Y);G=X(Y),Y.forEach(_),this.h()},h(){h(l,"class","absolute top-0 left-0 w-full h-full flex items-center justify-center"),V(l,"opacity",t[9][t[90]]||!t[88].type?1:.5),V(l,"background",t[9][t[90]]||!t[88].type?"rgba(0,0,0,.2)":"unset"),h(a,"tabindex","0"),h(a,"class","btn btn-circle btn-ghost"),h(H,"type","color"),h(H,"class","invisible"),H.value=P=t[88].backgroundColor,h(O,"class","btn btn-circle btn-sm btn-ghost"),V(O,"background-color",t[88].backgroundColor),h(u,"class","p-2 shadow menu dropdown-content z-[1] bg-base-100 rounded-box w-52"),h(c,"tabindex","0"),h(c,"class","card compact dropdown-content z-[1] shadow bg-base-100 rounded-box w-64"),h(s,"class","dropdown dropdown-end"),h(r,"class","flex-none absolute right-0 top-0 group-actions svelte-1yydgt2"),V(r,"z-index",t[10]+1),h(Ce,"class","fal fa-plus"),h(ge,"type","button"),h(ge,"class","absolute right-2 bottom-2 btn btn-circle btn-primary add-element svelte-1yydgt2"),V(ge,"z-index",t[10]+1),h(e,"class",W="col-span-"+lt[t[7].length][t[2]].span[t[90]]+" relative group svelte-1yydgt2"),V(e,"background-color",t[88].backgroundColor+"40"),h(e,"id",K="group-"+t[88].id)},m(B,Y){N(B,e,Y),m(e,l),~n&&ve[n].m(l,null),m(e,o),m(e,r),m(r,s),m(s,a),m(s,y),m(s,c),m(c,u),m(u,b),m(b,f),m(f,w),m(u,A),m(u,z),m(z,E),m(E,S),m(u,q),m(u,R),m(R,M),m(M,g),m(M,O),m(O,H),m(u,se),m(u,J),m(J,re),m(re,pe),m(u,ke),ne&&ne.m(u,null),m(e,Ie),m(e,ge),m(ge,Ce),m(e,Be);for(let Te=0;Te<ee.length;Te+=1)ee[Te]&&ee[Te].m(e,null);m(e,G),te=!0,we||(Me=[j(f,"click",U),j(E,"click",t[52]),j(H,"input",de),j(M,"click",ui),j(re,"click",be),j(r,"click",De),j(ge,"click",ce),ye(Nl.call(null,ge,{sound:"/media/pop-sound.mp3"})),j(e,"mouseenter",oe)],we=!0)},p(B,Y){t=B;let Te=n;if(n=ae(t),n===Te?~n&&ve[n].p(t,Y):(i&&(je(),x(ve[Te],1,1,()=>{ve[Te]=null}),Fe()),~n?(i=ve[n],i?i.p(t,Y):(i=ve[n]=ze[n](t),i.c()),Q(i,1),i.m(l,null)):i=null),(!te||Y[0]&640)&&V(l,"opacity",t[9][t[90]]||!t[88].type?1:.5),(!te||Y[0]&640)&&V(l,"background",t[9][t[90]]||!t[88].type?"rgba(0,0,0,.2)":"unset"),(!te||Y[0]&32768)&&k!==(k=t[15]("quiz.groupassignment.changeBackgroundText")+"")&&ie(w,k),(!te||Y[0]&32768)&&I!==(I=t[15]("quiz.groupassignment.changeBackgroundImage")+"")&&ie(S,I),(!te||Y[0]&32768)&&L!==(L=t[15]("quiz.groupassignment.changeBackgroundColor")+"")&&ie(g,L),(!te||Y[0]&128&&P!==(P=t[88].backgroundColor))&&(H.value=P),(!te||Y[0]&128)&&V(O,"background-color",t[88].backgroundColor),(!te||Y[0]&32768)&&ue!==(ue=t[15]("quiz.groupassignment.resetBackground")+"")&&ie(pe,ue),t[7].length>2?ne?ne.p(t,Y):(ne=rl(t),ne.c(),ne.m(u,null)):ne&&(ne.d(1),ne=null),(!te||Y[0]&1024)&&V(r,"z-index",t[10]+1),(!te||Y[0]&1024)&&V(ge,"z-index",t[10]+1),Y[0]&1090178499|Y[1]&14){he=Qe(t[8]);let _e;for(_e=0;_e<he.length;_e+=1){const Ue=nl(t,he,_e);ee[_e]?(ee[_e].p(Ue,Y),Q(ee[_e],1)):(ee[_e]=cl(Ue),ee[_e].c(),Q(ee[_e],1),ee[_e].m(e,G))}for(je(),_e=he.length;_e<ee.length;_e+=1)st(_e);Fe()}(!te||Y[0]&132&&W!==(W="col-span-"+lt[t[7].length][t[2]].span[t[90]]+" relative group svelte-1yydgt2"))&&h(e,"class",W),(!te||Y[0]&128)&&V(e,"background-color",t[88].backgroundColor+"40"),(!te||Y[0]&128&&K!==(K="group-"+t[88].id))&&h(e,"id",K)},i(B){if(!te){Q(i);for(let Y=0;Y<he.length;Y+=1)Q(ee[Y]);te=!0}},o(B){x(i),ee=ee.filter(Boolean);for(let Y=0;Y<ee.length;Y+=1)x(ee[Y]);te=!1},d(B){B&&_(e),~n&&ve[n].d(),ne&&ne.d(),pt(ee,B),we=!1,Se(Me)}}}function si(t){let e,l,n,i,o,r,s,a,d,y,c,u,b,f,k,w;Bl(t[39]);function A(g){t[40](g)}let z={handleClose:t[18]};t[3]!==void 0&&(z.openFileuploader=t[3]),n=new zi({props:z}),$e.push(()=>zt(n,"openFileuploader",A));function E(g){t[43](g)}let I={$$slots:{footer:[Qn],body:[Yn],header:[Gn]},$$scope:{ctx:t}};t[4]!==void 0&&(I.open=t[4]),r=new Rt({props:I}),$e.push(()=>zt(r,"open",E));function S(g){t[46](g)}let q={$$slots:{footer:[Zn],body:[Kn],header:[Jn]},$$scope:{ctx:t}};t[5]!==void 0&&(q.open=t[5]),d=new Rt({props:q}),$e.push(()=>zt(d,"open",S));let R=Qe(t[7]),M=[];for(let g=0;g<R.length;g+=1)M[g]=fl(ll(t,R,g));const L=g=>x(M[g],1,1,()=>{M[g]=null});return{c(){e=C("span"),l=F(),Ne(n.$$.fragment),o=F(),Ne(r.$$.fragment),a=F(),Ne(d.$$.fragment),c=F(),u=C("div");for(let g=0;g<M.length;g+=1)M[g].c();this.h()},l(g){e=T(g,"SPAN",{class:!0}),D(e).forEach(_),l=X(g),qe(n.$$.fragment,g),o=X(g),qe(r.$$.fragment,g),a=X(g),qe(d.$$.fragment,g),c=X(g),u=T(g,"DIV",{class:!0});var O=D(u);for(let H=0;H<M.length;H+=1)M[H].l(O);O.forEach(_),this.h()},h(){h(e,"class","hidden grid-rows-1 grid-rows-2 grid-rows-3 col-span-3 col-span-4 col-span-6 col-span-12"),h(u,"class",b="grid grid-cols-12 grid-rows-"+lt[t[7].length][t[2]].rows+" overflow-hidden h-screen svelte-1yydgt2")},m(g,O){N(g,e,O),N(g,l,O),He(n,g,O),N(g,o,O),He(r,g,O),N(g,a,O),He(d,g,O),N(g,c,O),N(g,u,O);for(let H=0;H<M.length;H+=1)M[H]&&M[H].m(u,null);f=!0,k||(w=[j(Pt,"resize",t[39]),j(u,"mousemove",t[35])],k=!0)},p(g,O){const H={};!i&&O[0]&8&&(i=!0,H.openFileuploader=g[3],It(()=>i=!1)),n.$set(H);const P={};O[0]&34816|O[3]&2&&(P.$$scope={dirty:O,ctx:g}),!s&&O[0]&16&&(s=!0,P.open=g[4],It(()=>s=!1)),r.$set(P);const se={};if(O[0]&34816|O[3]&2&&(se.$$scope={dirty:O,ctx:g}),!y&&O[0]&32&&(y=!0,se.open=g[5],It(()=>y=!1)),d.$set(se),O[0]&2147155911|O[1]&15){R=Qe(g[7]);let J;for(J=0;J<R.length;J+=1){const re=ll(g,R,J);M[J]?(M[J].p(re,O),Q(M[J],1)):(M[J]=fl(re),M[J].c(),Q(M[J],1),M[J].m(u,null))}for(je(),J=R.length;J<M.length;J+=1)L(J);Fe()}(!f||O[0]&132&&b!==(b="grid grid-cols-12 grid-rows-"+lt[g[7].length][g[2]].rows+" overflow-hidden h-screen svelte-1yydgt2"))&&h(u,"class",b)},i(g){if(!f){Q(n.$$.fragment,g),Q(r.$$.fragment,g),Q(d.$$.fragment,g);for(let O=0;O<R.length;O+=1)Q(M[O]);f=!0}},o(g){x(n.$$.fragment,g),x(r.$$.fragment,g),x(d.$$.fragment,g),M=M.filter(Boolean);for(let O=0;O<M.length;O+=1)x(M[O]);f=!1},d(g){g&&(_(e),_(l),_(o),_(a),_(c),_(u)),Pe(n,g),Pe(r,g),Pe(d,g),pt(M,g),k=!1,Se(w)}}}function ai(t,e){e.src=t.target.innerText}const ui=t=>{};function ci(t,e,l){let n;tt(t,ft,p=>l(15,n=p));let{gamestate:i}=e,{id:o}=e,r=!1,s=!1,a=!1,d=0,y=0,c={width:0,padding:0},u,b,f=[],k=[],w,A=Array(f.length).fill(!1),z=0,E=-1,I={},S,q,R,M,L=!1,g=0,O=0;function H(p){l(7,f),l(13,q=p||S),rt.receiver.updateParent()}function P(p){l(8,k),l(13,q=p||I),rt.receiver.updateParent()}function se(p,v){l(3,r=!0)}function J(p){if(p){const{url:v,type:fe}=p;q==S?(l(12,S.src=v,S),l(12,S.type=fe,S),l(12,S.isEditing=!1,S),H()):q==I&&(l(11,I.src=v,I),l(11,I.type=fe,I),P())}l(3,r=!1)}function re(p){p.hint=p.hint&&p.hint!==""?p.hint:"",l(4,s=!0)}function ue(p){p.feedback=p.feedback&&p.feedback!==""?p.feedback:"",l(5,a=!0)}function pe(p,v){v.src=v.src?v.src:"",v.type="text",v.isEditing=!0,P(v)}function ke(p,v){var fe;v.isEditing=!1,((fe=v.src)==null?void 0:fe.trim().length)===0&&(v.src=null,v.type=null),P(v)}function Ie(p,v){var fe=p.target.querySelector("[contenteditable]");fe&&fe.blur(),ke(p,v)}function ge(p,v){v.tts||(v.tts={enabled:!1}),v.tts.enabled=!v.tts.enabled,P(v)}function Ce(p,v){v.isEditing=!0,v.src=v.src?v.src:"",v.type="text",H(v)}function Be(p,v){v.backgroundColor=p.target.value,H(v)}function G(p,v){v.src=p.target.innerText,H(v)}function W(p){if(f.length+1>Pl)return;const v=_n;l(7,f=[...f,{id:g++,type:p==null?void 0:p.type,src:p==null?void 0:p.src,isEditing:!(p&&typeof p.type<"u"&&typeof p.src<"u"),backgroundColor:p!=null&&p.backgroundColor?p==null?void 0:p.backgroundColor:v[g%v.length]}])}function K(p){let v=f.findIndex(fe=>fe.id==p.id);l(7,f[v].type=null,f),l(7,f[v].src=null,f),l(7,f[v].backgroundColor=null,f),l(7,f[v].isEditing=!0,f),H(p)}function te(p){f.length-1<St||(l(7,f=f.filter(v=>v.id!==p.id)),H(p),De())}function we(p,v){if(k.length+1>Ul)return;p=typeof p<"u"?p:v==null?void 0:v.group;const{x:fe,y:Ee}=ne(p);l(10,z++,z),l(8,k=[...k,{id:O++,group:p,x:fe,y:Ee,zIndex:z,type:v==null?void 0:v.type,src:v==null?void 0:v.src,isEditing:!1,hint:v==null?void 0:v.hint,feedback:v==null?void 0:v.feedback,tts:v==null?void 0:v.tts}]),he()}function Me(p){k.splice(k.indexOf(p),1),P(p)}function ze(p){p.isEditing=!p.isEditing,l(12,S=p.isEditing?p:null),H(p)}function ve(p,v){v.zIndex=l(10,z++,z),w=p.target,w.style.zIndex=v.zIndex}function ae(p,v){E!==-1&&I.group!==E&&l(11,I.group=E,I);const fe=document.getElementById("group-"+E),Ae=p.target.closest(".card").getBoundingClientRect(),me=fe.getBoundingClientRect(),wt=Ae.left-me.left,et=Ae.top-me.top;v.x=wt,v.y=et,P(v),w=null,l(9,A=Array(f.length).fill(!1))}function U(p,v){l(11,I=v),l(13,q=I),R=p.pageX,M=p.pageY}function de(p,v){const Ee=Math.abs(p.pageX-R),Ae=Math.abs(p.pageY-M);Ee<6&&Ae<6?w=null:ae(p,v),l(14,L=!1)}function be(p,v){if(w)l(14,L=!0);else{l(14,L=!1);return}const{clientX:fe,clientY:Ee}=p;let Ae=[];for(let me=0;me<f.length;me++){const et=document.querySelector(`#group-${f[me].id}`).getBoundingClientRect(),jt=fe>=et.left&&fe<=et.right&&Ee>=et.top&&Ee<=et.bottom;Ae.push(jt),jt&&(E=f[me].id)}l(9,A=Ae)}function ne(p){const v=document.querySelector("#group-"+p),fe=c.width,Ee=100,Ae=v.clientWidth-fe,me=v.clientHeight-Ee,wt=Math.floor(Math.random()*Ae),et=Math.floor(Math.random()*me);return{x:wt,y:et}}function De(){for(let p=0;p<k.length;p++){let v=k[p];const{x:fe,y:Ee}=ne(v.group);v.x=fe,v.y=Ee}P()}function ce(){function p(){let Ee=[];for(let Ae=0;Ae<k.length;Ae++){let me=k[Ae];me.src&&me.type&&Ee.push({id:me.id,group:me.group,src:me.src,type:me.type,tts:me.tts,hint:me.hint,feedback:me.feedback})}return Ee}function v(){let Ee=[];for(let Ae=0;Ae<f.length;Ae++){let me=f[Ae];Ee.push({src:me.src,type:me.type,id:me.id,backgroundColor:me.backgroundColor})}return Ee}const fe={elements:p(),groups:v()};return JSON.stringify(fe)}function he(){if(f.length===0)return;const p=f.length,v=document.querySelector("#group-"+f[0].id),fe=Math.min(v.clientWidth,v.clientHeight),Ee=c.width*.04;l(6,c={width:Math.ceil(fe/p+1),padding:Ee<15?15:Ee})}function ee(p){if(p&&Object.keys(p).length>0){if(p.groups)for(let v=0;v<p.groups.length;v++)W(p.groups[v]);Xt().then(()=>{if(p.elements)for(let v=0;v<p.elements.length;v++)we(f[p.elements[v].group.id],p.elements[v]);rt.receiver.updateParent()})}else for(let v=0;v<St;v++)W()}Vt(()=>(ee(i),rt.receiver.init({addContainer:W,removeContainer:te,resetContainer:K,addElement:we,removeElement:Me,updateParent:ce,initalData:{task:i==null?void 0:i.task,title:i==null?void 0:i.title,feedbacks:i==null?void 0:i.feedbacks,options:i==null?void 0:i.options,groups:i==null?void 0:i.groups,elements:i==null?void 0:i.elements,id:o}}),rt.receiver.updateParent(),window.top.addEventListener("resize",he),()=>{window.top.removeEventListener("resize",he)}));function st(){l(1,y=Pt.innerWidth),l(0,d=Pt.innerHeight)}function oe(p){r=p,l(3,r)}function B(){I.hint=this.value,l(11,I)}const Y=p=>{l(11,I.hint=null,I),P()};function Te(p){s=p,l(4,s)}function _e(){I.feedback=this.value,l(11,I)}const Ue=p=>{l(11,I.feedback=null,I),P()};function Xe(p){a=p,l(5,a)}const Le=(p,v)=>{Ce(v,p)},Ke=p=>{se()},nt=p=>ze(p),Ze=(p,v)=>G(v,p),it=(p,v)=>{Ce(v,p)},ot=p=>{se()},dt=(p,v)=>{Be(v,p)},bt=(p,v)=>{K(p)},kt=(p,v)=>{te(p)},vt=(p,v)=>{l(13,q=p)},yt=(p,v,fe)=>{l(7,v[fe].isEditing=!1,f),we(p.id)},ht=(p,v)=>{pe(v,p)},Wl=(p,v)=>{se()},Gl=(p,v)=>pe(v,p),Yl=(p,v)=>ai(v,p),Ql=(p,v)=>ge(v,p),Jl=(p,v)=>{re(v)},Kl=p=>{var v=new SpeechSynthesisUtterance;v.text=I.src,v.lang="de",window.speechSynthesis.speak(v)},Zl=(p,v)=>{re(v)},$l=(p,v)=>{ue(v)},xl=(p,v)=>{Me(p)},en=(p,v)=>{ve(v,p)},tn=(p,v)=>U(v,p),ln=(p,v)=>de(v,p),nn=(p,v)=>Ie(v,p),on=(p,v)=>{l(12,S=p),l(13,q=S)};return t.$$set=p=>{"gamestate"in p&&l(36,i=p.gamestate),"id"in p&&l(37,o=p.id)},t.$$.update=()=>{t.$$.dirty[0]&7|t.$$.dirty[1]&128&&(l(2,u=d>y?"portrait":"landscape"),b!==u&&Xt().then(De),l(38,b=u))},[d,y,u,r,s,a,c,f,k,A,z,I,S,q,L,n,P,se,J,re,ue,pe,Ie,ge,Ce,Be,G,K,te,we,Me,ze,ve,U,de,be,i,o,b,st,oe,B,Y,Te,_e,Ue,Xe,Le,Ke,nt,Ze,it,ot,dt,bt,kt,vt,yt,ht,Wl,Gl,Yl,Ql,Jl,Kl,Zl,$l,xl,en,tn,ln,nn,on]}class fi extends We{constructor(e){super(),Ge(this,e,ci,si,Re,{gamestate:36,id:37},null,[-1,-1,-1,-1])}}const{window:Ut}=Vl;function dl(t,e,l){const n=t.slice();return n[37]=e[l],n[39]=l,n}function hl(t,e,l){const n=t.slice();return n[40]=e[l],n[42]=l,n}function di(t){let e,l="no gamestate found";return{c(){e=C("p"),e.textContent=l},l(n){e=T(n,"P",{"data-svelte-h":!0}),Je(e)!=="svelte-69ezww"&&(e.textContent=l)},m(n,i){N(n,e,i)},p:le,i:le,o:le,d(n){n&&_(e)}}}function hi(t){let e,l,n,i,o,r,s;e=new Rn({props:{title:t[13],task:t[12],elements:t[0],mode:t[16].mode,checkSolution:t[22],onFeedbackClosed:t[23],feedbacks:t[15],type:kn.groupassignment}});let a=Qe(t[14]),d=[];for(let c=0;c<a.length;c+=1)d[c]=kl(dl(t,a,c));const y=c=>x(d[c],1,1,()=>{d[c]=null});return{c(){Ne(e.$$.fragment),l=F(),n=C("div");for(let c=0;c<d.length;c+=1)d[c].c();this.h()},l(c){qe(e.$$.fragment,c),l=X(c),n=T(c,"DIV",{class:!0});var u=D(n);for(let b=0;b<d.length;b+=1)d[b].l(u);u.forEach(_),this.h()},h(){h(n,"class",i="grid grid-cols-12 grid-rows-"+lt[t[14].length][t[3]].rows+" overflow-hidden h-screen svelte-143136f")},m(c,u){He(e,c,u),N(c,l,u),N(c,n,u);for(let b=0;b<d.length;b+=1)d[b]&&d[b].m(n,null);o=!0,r||(s=j(n,"mousemove",t[21]),r=!0)},p(c,u){const b={};if(u[0]&1&&(b.elements=c[0]),e.$set(b),u[0]&2052031){a=Qe(c[14]);let f;for(f=0;f<a.length;f+=1){const k=dl(c,a,f);d[f]?(d[f].p(k,u),Q(d[f],1)):(d[f]=kl(k),d[f].c(),Q(d[f],1),d[f].m(n,null))}for(je(),f=a.length;f<d.length;f+=1)y(f);Fe()}(!o||u[0]&8&&i!==(i="grid grid-cols-12 grid-rows-"+lt[c[14].length][c[3]].rows+" overflow-hidden h-screen svelte-143136f"))&&h(n,"class",i)},i(c){if(!o){Q(e.$$.fragment,c);for(let u=0;u<a.length;u+=1)Q(d[u]);o=!0}},o(c){x(e.$$.fragment,c),d=d.filter(Boolean);for(let u=0;u<d.length;u+=1)x(d[u]);o=!1},d(c){c&&(_(l),_(n)),Pe(e,c),pt(d,c),r=!1,s()}}}function _i(t){let e,l;return{c(){e=C("img"),this.h()},l(n){e=T(n,"IMG",{class:!0,src:!0}),this.h()},h(){h(e,"class","w-full h-full object-contain"),Oe(e.src,l=t[37].src)||h(e,"src",l)},m(n,i){N(n,e,i)},p:le,d(n){n&&_(e)}}}function pi(t){let e,l=t[37].src+"",n,i,o;return{c(){e=C("div"),n=Z(l),this.h()},l(r){e=T(r,"DIV",{class:!0});var s=D(e);n=$(s,l),s.forEach(_),this.h()},h(){h(e,"class","text-black text-center edit-group mt-20 mb-20")},m(r,s){N(r,e,s),m(e,n),i||(o=[ye(gt.call(null,e)),ye(mt.call(null,e))],i=!0)},p:le,d(r){r&&_(e),i=!1,Se(o)}}}function gi(t){var M;let e,l,n,i,o=t[40].hint&&t[40].hint.trim().length>0,r,s=t[40].feedback&&t[40].feedback.trim().length>0,a,d,y,c,u,b,f=typeof t[40].assigned<"u"&&_l(t);function k(L,g){if(L[40].type=="text")return vi;if(L[40].type=="image")return ki;if(L[40].type=="video")return bi;if(L[40].type=="audio")return mi}let w=k(t),A=w&&w(t),z=o&&pl(t),E=s&&gl(t),I=((M=t[40].tts)==null?void 0:M.enabled)&&ml();function S(...L){return t[28](t[40],...L)}function q(...L){return t[29](t[40],...L)}function R(...L){return t[30](t[40],...L)}return{c(){e=C("div"),f&&f.c(),l=F(),n=C("div"),A&&A.c(),i=F(),z&&z.c(),r=F(),E&&E.c(),a=F(),I&&I.c(),this.h()},l(L){e=T(L,"DIV",{id:!0,class:!0,style:!0});var g=D(e);f&&f.l(g),l=X(g),n=T(g,"DIV",{class:!0});var O=D(n);A&&A.l(O),O.forEach(_),i=X(g),z&&z.l(g),r=X(g),E&&E.l(g),a=X(g),I&&I.l(g),g.forEach(_),this.h()},h(){h(n,"class","w-full h-full relative inline-block"),h(e,"id","user-card-"+t[42]),h(e,"class",d="absolute card bg-white shadow border cursor-grab user-card "+(t[40].solved?"user-card-solved":"")+" "+(t[40].solved===!1?"user-card-unsolved":"")+" svelte-143136f"),V(e,"top","35vmin"),V(e,"left",t[11]+"px"),V(e,"width",t[5].width+"px"),V(e,"padding",t[5].padding+"px"),V(e,"z-index",t[40].zIndex),V(e,"display",t[4]>=t[42]?"inline-block":"none"),V(e,"opacity",t[8]&&t[10]!=t[40]?.3:1)},m(L,g){N(L,e,g),f&&f.m(e,null),m(e,l),m(e,n),A&&A.m(n,null),m(e,i),z&&z.m(e,null),m(e,r),E&&E.m(e,null),m(e,a),I&&I.m(e,null),c=!0,u||(b=[ye(y=Xl.call(null,e,{bounds:"body",ignoreMultitouch:!1,DragBoundsCoords:{top:0,left:0,right:t[2],bottom:t[1]}})),j(e,"neodrag:start",S),j(e,"mouseup",q),j(e,"mousedown",R)],u=!0)},p(L,g){var O;t=L,typeof t[40].assigned<"u"?f?f.p(t,g):(f=_l(t),f.c(),f.m(e,l)):f&&(f.d(1),f=null),w===(w=k(t))&&A?A.p(t,g):(A&&A.d(1),A=w&&w(t),A&&(A.c(),A.m(n,null))),g[0]&1&&(o=t[40].hint&&t[40].hint.trim().length>0),o?z?(z.p(t,g),g[0]&1&&Q(z,1)):(z=pl(t),z.c(),Q(z,1),z.m(e,r)):z&&(je(),x(z,1,1,()=>{z=null}),Fe()),g[0]&1&&(s=t[40].feedback&&t[40].feedback.trim().length>0),s?E?(E.p(t,g),g[0]&1&&Q(E,1)):(E=gl(t),E.c(),Q(E,1),E.m(e,a)):E&&(je(),x(E,1,1,()=>{E=null}),Fe()),(O=t[40].tts)!=null&&O.enabled?I||(I=ml(),I.c(),I.m(e,null)):I&&(I.d(1),I=null),(!c||g[0]&1&&d!==(d="absolute card bg-white shadow border cursor-grab user-card "+(t[40].solved?"user-card-solved":"")+" "+(t[40].solved===!1?"user-card-unsolved":"")+" svelte-143136f"))&&h(e,"class",d),(!c||g[0]&2048)&&V(e,"left",t[11]+"px"),(!c||g[0]&32)&&V(e,"width",t[5].width+"px"),(!c||g[0]&32)&&V(e,"padding",t[5].padding+"px"),(!c||g[0]&1)&&V(e,"z-index",t[40].zIndex),(!c||g[0]&16)&&V(e,"display",t[4]>=t[42]?"inline-block":"none"),(!c||g[0]&1281)&&V(e,"opacity",t[8]&&t[10]!=t[40]?.3:1),y&&xe(y.update)&&g[0]&6&&y.update.call(null,{bounds:"body",ignoreMultitouch:!1,DragBoundsCoords:{top:0,left:0,right:t[2],bottom:t[1]}})},i(L){c||(Q(z),Q(E),c=!0)},o(L){x(z),x(E),c=!1},d(L){L&&_(e),f&&f.d(),A&&A.d(),z&&z.d(),E&&E.d(),I&&I.d(),u=!1,Se(b)}}}function _l(t){let e;return{c(){e=C("div"),this.h()},l(l){e=T(l,"DIV",{class:!0,style:!0}),D(e).forEach(_),this.h()},h(){h(e,"class","pin"),V(e,"background-color",t[17](t[40]))},m(l,n){N(l,e,n)},p(l,n){n[0]&1&&V(e,"background-color",l[17](l[40]))},d(l){l&&_(e)}}}function mi(t){let e,l,n,i;return{c(){e=C("audio"),l=C("source"),this.h()},l(o){e=T(o,"AUDIO",{class:!0});var r=D(e);l=T(r,"SOURCE",{src:!0,type:!0}),r.forEach(_),this.h()},h(){Oe(l.src,n=t[40].src)||h(l,"src",n),h(l,"type",i=t[40].type),e.controls=!0,h(e,"class","w-full h-full object-cover rounded-2xl")},m(o,r){N(o,e,r),m(e,l)},p(o,r){r[0]&1&&!Oe(l.src,n=o[40].src)&&h(l,"src",n),r[0]&1&&i!==(i=o[40].type)&&h(l,"type",i)},d(o){o&&_(e)}}}function bi(t){let e,l,n;return{c(){e=C("video"),l=C("source"),this.h()},l(i){e=T(i,"VIDEO",{class:!0});var o=D(e);l=T(o,"SOURCE",{src:!0}),o.forEach(_),this.h()},h(){Oe(l.src,n=t[40].src)||h(l,"src",n),e.controls=!0,h(e,"class","w-full h-full object-cover rounded-2xl")},m(i,o){N(i,e,o),m(e,l)},p(i,o){o[0]&1&&!Oe(l.src,n=i[40].src)&&h(l,"src",n)},d(i){i&&_(e)}}}function ki(t){let e,l,n,i,o;return{c(){e=C("img"),this.h()},l(r){e=T(r,"IMG",{src:!0,class:!0,style:!0}),this.h()},h(){Oe(e.src,l=t[40].src)||h(e,"src",l),h(e,"class","w-full h-full object-cover rounded-2xl"),h(e,"style",n=t[8]?"pointer-events: none;":"")},m(r,s){N(r,e,s),i||(o=ye(Hl.call(null,e)),i=!0)},p(r,s){s[0]&1&&!Oe(e.src,l=r[40].src)&&h(e,"src",l),s[0]&256&&n!==(n=r[8]?"pointer-events: none;":"")&&h(e,"style",n)},d(r){r&&_(e),i=!1,o()}}}function vi(t){let e,l,n=t[40].src+"",i,o;return{c(){e=C("div"),l=new Ml(!1),this.h()},l(r){e=T(r,"DIV",{class:!0});var s=D(e);l=Al(s,!1),s.forEach(_),this.h()},h(){l.a=null,h(e,"class","w-full user-text")},m(r,s){N(r,e,s),l.m(n,e),i||(o=[ye(mt.call(null,e,{parentId:"user-card-"+t[42]})),ye(gt.call(null,e))],i=!0)},p(r,s){t=r,s[0]&1&&n!==(n=t[40].src+"")&&l.p(n)},d(r){r&&_(e),i=!1,Se(o)}}}function pl(t){let e,l;return e=new jl({props:{content:t[40].hint,mode:t[16].hints,timesAssigned:t[40].timesAssigned}}),{c(){Ne(e.$$.fragment)},l(n){qe(e.$$.fragment,n)},m(n,i){He(e,n,i),l=!0},p(n,i){const o={};i[0]&1&&(o.content=n[40].hint),i[0]&1&&(o.timesAssigned=n[40].timesAssigned),e.$set(o)},i(n){l||(Q(e.$$.fragment,n),l=!0)},o(n){x(e.$$.fragment,n),l=!1},d(n){Pe(e,n)}}}function gl(t){let e,l;return e=new Cn({props:{content:t[40].feedback,activate:t[7]}}),{c(){Ne(e.$$.fragment)},l(n){qe(e.$$.fragment,n)},m(n,i){He(e,n,i),l=!0},p(n,i){const o={};i[0]&1&&(o.content=n[40].feedback),i[0]&128&&(o.activate=n[7]),e.$set(o)},i(n){l||(Q(e.$$.fragment,n),l=!0)},o(n){x(e.$$.fragment,n),l=!1},d(n){Pe(e,n)}}}function ml(t){let e,l='<i class="far fa-ear"></i>',n,i;return{c(){e=C("button"),e.innerHTML=l,this.h()},l(o){e=T(o,"BUTTON",{class:!0,"data-svelte-h":!0}),Je(e)!=="svelte-lv52vx"&&(e.innerHTML=l),this.h()},h(){h(e,"class","btn btn-circle btn-info btn-xs btn-outline text-info absolute bottom-2 right-2")},m(o,r){N(o,e,r),n||(i=j(e,"click",wi),n=!0)},d(o){o&&_(e),n=!1,i()}}}function bl(t){let e,l,n=t[37].id===0&&gi(t);return{c(){n&&n.c(),e=Ve()},l(i){n&&n.l(i),e=Ve()},m(i,o){n&&n.m(i,o),N(i,e,o),l=!0},p(i,o){i[37].id===0&&n.p(i,o)},i(i){l||(Q(n),l=!0)},o(i){x(n),l=!1},d(i){i&&_(e),n&&n.d(i)}}}function kl(t){let e,l,n,i,o,r;function s(b,f){if(b[37].type==="text")return pi;if(b[37].type==="image")return _i}let a=s(t),d=a&&a(t),y=Qe(t[0]),c=[];for(let b=0;b<y.length;b+=1)c[b]=bl(hl(t,y,b));const u=b=>x(c[b],1,1,()=>{c[b]=null});return{c(){e=C("div"),l=C("div"),d&&d.c(),n=F();for(let b=0;b<c.length;b+=1)c[b].c();i=F(),this.h()},l(b){e=T(b,"DIV",{class:!0,style:!0,id:!0});var f=D(e);l=T(f,"DIV",{class:!0,style:!0});var k=D(l);d&&d.l(k),k.forEach(_),n=X(f);for(let w=0;w<c.length;w+=1)c[w].l(f);i=X(f),f.forEach(_),this.h()},h(){h(l,"class","absolute top-0 left-0 w-full h-full flex items-center justify-center z-0"),V(l,"opacity",t[9][t[39]]?1:.5),V(l,"background",t[9][t[39]]?"rgba(0,0,0,.2)":"unset"),h(e,"class",o="col-span-"+lt[t[14].length][t[3]].span[t[39]]+" relative group svelte-143136f"),V(e,"background-color",t[37].backgroundColor+"40"),h(e,"id","group-"+t[37].id)},m(b,f){N(b,e,f),m(e,l),d&&d.m(l,null),m(e,n);for(let k=0;k<c.length;k+=1)c[k]&&c[k].m(e,null);m(e,i),r=!0},p(b,f){if(d&&d.p(b,f),(!r||f[0]&512)&&V(l,"opacity",b[9][b[39]]?1:.5),(!r||f[0]&512)&&V(l,"background",b[9][b[39]]?"rgba(0,0,0,.2)":"unset"),f[0]&2051511){y=Qe(b[0]);let k;for(k=0;k<y.length;k+=1){const w=hl(b,y,k);c[k]?(c[k].p(w,f),Q(c[k],1)):(c[k]=bl(w),c[k].c(),Q(c[k],1),c[k].m(e,i))}for(je(),k=y.length;k<c.length;k+=1)u(k);Fe()}(!r||f[0]&8&&o!==(o="col-span-"+lt[b[14].length][b[3]].span[b[39]]+" relative group svelte-143136f"))&&h(e,"class",o)},i(b){if(!r){for(let f=0;f<y.length;f+=1)Q(c[f]);r=!0}},o(b){c=c.filter(Boolean);for(let f=0;f<c.length;f+=1)x(c[f]);r=!1},d(b){b&&_(e),d&&d.d(),pt(c,b)}}}function yi(t){let e,l,n,i,o,r,s,a;Bl(t[27]);const d=[hi,di],y=[];function c(u,b){return u[6]?0:1}return n=c(t),i=y[n]=d[n](t),{c(){e=C("span"),l=F(),i.c(),o=Ve(),this.h()},l(u){e=T(u,"SPAN",{class:!0}),D(e).forEach(_),l=X(u),i.l(u),o=Ve(),this.h()},h(){h(e,"class","hidden grid-rows-1 grid-rows-2 grid-rows-3 col-span-3 col-span-4 col-span-6 col-span-12")},m(u,b){N(u,e,b),N(u,l,b),y[n].m(u,b),N(u,o,b),r=!0,s||(a=j(Ut,"resize",t[27]),s=!0)},p(u,b){let f=n;n=c(u),n===f?y[n].p(u,b):(je(),x(y[f],1,1,()=>{y[f]=null}),Fe(),i=y[n],i?i.p(u,b):(i=y[n]=d[n](u),i.c()),Q(i,1),i.m(o.parentNode,o))},i(u){r||(Q(i),r=!0)},o(u){x(i),r=!1},d(u){u&&(_(e),_(l),_(o)),y[n].d(u),s=!1,a()}}}const wi=t=>{};function Ei(t,e,l){let n,i,{gamestate:o}=e,r=o==null?void 0:o.task,s=o==null?void 0:o.title,a=o==null?void 0:o.groups,d=o==null?void 0:o.elements,y=o==null?void 0:o.feedbacks,c=o==null?void 0:o.options,u=!1,b,f,k=0,w=0,A,z,E,I=!1,S=100,q=-1,R=n?Array(a.length).fill(!1):[],M=0,L,g={width:0,padding:0};function O(G){if(typeof G.assigned<"u"){let W=a[G.assigned].backgroundColor;if(W=W.length===9?W.substring(0,W.length-2):W,W)return W}return"none"}function H(G,W){b=G.pageX,f=G.pageY}function P(G,W){l(10,L=W),W.zIndex=l(26,S++,S),E=G.target,E.style.zIndex=W.zIndex,L.solved!=="undefined"&&(delete L.solved,l(0,d),l(6,n),l(4,M),l(26,S),l(24,o))}function se(G,W){E=null,L.assigned!==q&&l(10,L.timesAssigned=L.timesAssigned?L.timesAssigned+1:1,L),l(10,L.assigned=q,L),l(4,M=M+1),l(9,R=Array(a.length).fill(!1)),l(0,d),l(6,n),l(4,M),l(26,S),l(24,o)}function J(G,W){const te=Math.abs(G.pageX-b),we=Math.abs(G.pageY-f);te<6&&we<6?E=null:se(),l(8,I=!1)}function re(G,W){if(E)l(8,I=!0);else{l(8,I=!1);return}const{clientX:K,clientY:te}=G;let we=[];for(let Me=0;Me<a.length;Me++){const ve=document.querySelector(`#group-${a[Me].id}`).getBoundingClientRect(),ae=K>=ve.left&&K<=ve.right&&te>=ve.top&&te<=ve.bottom;we.push(ae),ae&&(q=a[Me].id)}l(9,R=we)}function ue(){const G=a.length,W=document.querySelector("#group-"+a[0].id),K=Math.min(W.clientWidth,W.clientHeight),te=g.width*.04;l(5,g={width:Math.ceil(K/G+1),padding:te<15?15:te})}function pe(){for(let G=0;G<d.length;G++)typeof d[G].assigned<"u"&&l(0,d[G].solved=d[G].assigned===d[G].group,d)}function ke(){l(7,u=!0)}Vt(()=>(n&&(rt.receiver.start(),ue()),window.addEventListener("resize",ue),()=>{window.removeEventListener("resize",ue)}));function Ie(){l(2,w=Ut.innerWidth),l(1,k=Ut.innerHeight)}const ge=(G,W)=>{P(W,G)},Ce=(G,W)=>{J(W)},Be=(G,W)=>{H(W)};return t.$$set=G=>{"gamestate"in G&&l(24,o=G.gamestate)},t.$$.update=()=>{var G,W,K;t.$$.dirty[0]&16777216&&l(6,n=((G=o==null?void 0:o.groups)==null?void 0:G.length)>=St&&((W=o==null?void 0:o.groups)==null?void 0:W.length)<=Pl&&((K=o==null?void 0:o.elements)==null?void 0:K.length)<Ul&&(o==null?void 0:o.options)),t.$$.dirty[0]&67108945&&n&&d[M]&&l(0,d[M].zIndex=l(26,S++,S),d),t.$$.dirty[0]&36&&l(11,i=(w-(g.width-g.padding/2))/2+25),t.$$.dirty[0]&33554446&&(l(3,A=k>w?"portrait":"landscape"),l(25,z=A))},[d,k,w,A,M,g,n,u,I,R,L,i,r,s,a,y,c,O,H,P,J,re,pe,ke,o,z,S,Ie,ge,Ce,Be]}class Ci extends We{constructor(e){super(),Ge(this,e,Ei,yi,Re,{gamestate:24},null,[-1,-1])}}function vl(t,e,l){const n=t.slice();return n[11]=e[l],n}function yl(t){let e,l=t[4].form.error+"",n;return{c(){e=C("p"),n=Z(l),this.h()},l(i){e=T(i,"P",{class:!0});var o=D(e);n=$(o,l),o.forEach(_),this.h()},h(){h(e,"class","error")},m(i,o){N(i,e,o),m(e,n)},p(i,o){o&16&&l!==(l=i[4].form.error+"")&&ie(n,l)},d(i){i&&_(e)}}}function wl(t){let e,l=t[3]("core.fileuploader.upload")+"",n;return{c(){e=C("button"),n=Z(l),this.h()},l(i){e=T(i,"BUTTON",{type:!0,class:!0});var o=D(e);n=$(o,l),o.forEach(_),this.h()},h(){h(e,"type","submit"),h(e,"class","btn btn-primary")},m(i,o){N(i,e,o),m(e,n)},p(i,o){o&8&&l!==(l=i[3]("core.fileuploader.upload")+"")&&ie(n,l)},d(i){i&&_(e)}}}function El(t){let e,l,n,i,o;return{c(){e=C("img"),this.h()},l(r){e=T(r,"IMG",{src:!0,class:!0,alt:!0}),this.h()},h(){Oe(e.src,l=t[11])||h(e,"src",l),h(e,"class","w-40"),h(e,"alt",n=t[11].name)},m(r,s){N(r,e,s),i||(o=j(e,"click",t[6]),i=!0)},p(r,s){s&4&&!Oe(e.src,l=r[11])&&h(e,"src",l),s&4&&n!==(n=r[11].name)&&h(e,"alt",n)},d(r){r&&_(e),i=!1,o()}}}function Ti(t){var L;let e,l,n,i,o="✕",r,s,a=t[3]("core.fileuploader.dnd")+"",d,y,c,u=t[3]("core.fileuploader.browse")+"",b,f,k,w,A,z,E,I,S=((L=t[4].form)==null?void 0:L.error)&&yl(t),q=t[2].length>0&&wl(t),R=Qe(t[2]),M=[];for(let g=0;g<R.length;g+=1)M[g]=El(vl(t,R,g));return{c(){e=C("dialog"),l=C("div"),n=C("form"),i=C("button"),i.textContent=o,r=F(),s=C("h3"),d=Z(a),y=F(),c=C("p"),b=Z(u),f=F(),k=C("input"),w=F(),S&&S.c(),A=F(),q&&q.c(),z=F();for(let g=0;g<M.length;g+=1)M[g].c();this.h()},l(g){e=T(g,"DIALOG",{class:!0});var O=D(e);l=T(O,"DIV",{class:!0});var H=D(l);n=T(H,"FORM",{method:!0,enctype:!0});var P=D(n);i=T(P,"BUTTON",{class:!0,"data-svelte-h":!0}),Je(i)!=="svelte-1am3xy4"&&(i.textContent=o),r=X(P),s=T(P,"H3",{class:!0});var se=D(s);d=$(se,a),se.forEach(_),y=X(P),c=T(P,"P",{class:!0});var J=D(c);b=$(J,u),J.forEach(_),f=X(P),k=T(P,"INPUT",{name:!0,type:!0,class:!0}),w=X(P),S&&S.l(P),A=X(P),q&&q.l(P),P.forEach(_),z=X(H);for(let re=0;re<M.length;re+=1)M[re].l(H);H.forEach(_),O.forEach(_),this.h()},h(){h(i,"class","btn btn-sm btn-circle btn-ghost absolute right-2 top-2"),h(s,"class","font-bold text-lg"),h(c,"class","py-4"),h(k,"name","file"),h(k,"type","file"),h(k,"class","file-input w-full max-w-xs"),h(n,"method","post"),h(n,"enctype","multipart/form-data"),h(l,"class","modal-box items-center text-center"),h(e,"class","modal")},m(g,O){N(g,e,O),m(e,l),m(l,n),m(n,i),m(n,r),m(n,s),m(s,d),m(n,y),m(n,c),m(c,b),m(n,f),m(n,k),m(n,w),S&&S.m(n,null),m(n,A),q&&q.m(n,null),m(l,z);for(let H=0;H<M.length;H+=1)M[H]&&M[H].m(l,null);t[10](e),E||(I=[j(i,"click",t[8]),j(k,"change",t[5]),ye(pn.call(null,n,t[9]))],E=!0)},p(g,[O]){var H;if(O&8&&a!==(a=g[3]("core.fileuploader.dnd")+"")&&ie(d,a),O&8&&u!==(u=g[3]("core.fileuploader.browse")+"")&&ie(b,u),(H=g[4].form)!=null&&H.error?S?S.p(g,O):(S=yl(g),S.c(),S.m(n,A)):S&&(S.d(1),S=null),g[2].length>0?q?q.p(g,O):(q=wl(g),q.c(),q.m(n,null)):q&&(q.d(1),q=null),O&68){R=Qe(g[2]);let P;for(P=0;P<R.length;P+=1){const se=vl(g,R,P);M[P]?M[P].p(se,O):(M[P]=El(se),M[P].c(),M[P].m(l,null))}for(;P<M.length;P+=1)M[P].d(1);M.length=R.length}},i:le,o:le,d(g){g&&_(e),S&&S.d(),q&&q.d(),pt(M,g),t[10](null),E=!1,Se(I)}}}function Ii(t,e,l){let n,i;tt(t,ft,f=>l(3,n=f)),tt(t,gn,f=>l(4,i=f));let{openFileuploader:o=!1}=e,{handleClose:r=()=>{}}=e,s=[],a;function d(f){const k=f.target.files;if(k.length>0){const w=k[0],A=new FileReader;A.onload=z=>{l(2,s=[...s,z.target.result])},A.readAsDataURL(w)}}function y(f){a.close(),f.target&&(f={url:f.target.src,type:"image"}),r(f)}const c=()=>{a.close(),r()},u=({formElement:f})=>async({result:k,update:w})=>{k.type=="success"&&(f.reset(),y(k.data)),w()};function b(f){$e[f?"unshift":"push"](()=>{a=f,l(1,a)})}return t.$$set=f=>{"openFileuploader"in f&&l(7,o=f.openFileuploader),"handleClose"in f&&l(0,r=f.handleClose)},t.$$.update=()=>{t.$$.dirty&130&&a&&o&&a.showModal()},[r,a,s,n,i,d,y,o,c,u,b]}class zi extends We{constructor(e){super(),Ge(this,e,Ii,Ti,Re,{openFileuploader:7,handleClose:0})}}const Di=!0,Mi=!0,Ai=!0,Oi=!0,Si={text:Di,image:Mi,video:Ai,audio:Oi};function Cl(t){let e,l;return{c(){e=C("p"),l=Z(t[0]),this.h()},l(n){e=T(n,"P",{class:!0});var i=D(e);l=$(i,t[0]),i.forEach(_),this.h()},h(){h(e,"class","mt-1 text-sm mb-6 pl-4 pr-4")},m(n,i){N(n,e,i),m(e,l)},p(n,i){i&1&&ie(l,n[0])},d(n){n&&_(e)}}}function Tl(t){let e,l,n,i,o;return{c(){e=C("button"),l=Z(t[2]),this.h()},l(r){e=T(r,"BUTTON",{class:!0});var s=D(e);l=$(s,t[2]),s.forEach(_),this.h()},h(){h(e,"class",n="btn "+t[1]+" join-item")},m(r,s){N(r,e,s),m(e,l),i||(o=j(e,"click",t[8]),i=!0)},p(r,s){s&4&&ie(l,r[2]),s&2&&n!==(n="btn "+r[1]+" join-item")&&h(e,"class",n)},d(r){r&&_(e),i=!1,o()}}}function Bi(t){let e,l,n,i=t[7].image&&Il(t),o=t[7].video&&zl(t),r=t[7].audio&&Dl(t);return{c(){i&&i.c(),e=F(),o&&o.c(),l=F(),r&&r.c(),n=Ve()},l(s){i&&i.l(s),e=X(s),o&&o.l(s),l=X(s),r&&r.l(s),n=Ve()},m(s,a){i&&i.m(s,a),N(s,e,a),o&&o.m(s,a),N(s,l,a),r&&r.m(s,a),N(s,n,a)},p(s,a){s[7].image?i?i.p(s,a):(i=Il(s),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),s[7].video?o?o.p(s,a):(o=zl(s),o.c(),o.m(l.parentNode,l)):o&&(o.d(1),o=null),s[7].audio?r?r.p(s,a):(r=Dl(s),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},d(s){s&&(_(e),_(l),_(n)),i&&i.d(s),o&&o.d(s),r&&r.d(s)}}}function Li(t){let e,l,n,i,o;return{c(){e=C("button"),l=Z(t[3]),this.h()},l(r){e=T(r,"BUTTON",{class:!0});var s=D(e);l=$(s,t[3]),s.forEach(_),this.h()},h(){h(e,"class",n="btn "+t[1]+" join-item")},m(r,s){N(r,e,s),m(e,l),i||(o=j(e,"click",t[12]),i=!0)},p(r,s){s&8&&ie(l,r[3]),s&2&&n!==(n="btn "+r[1]+" join-item")&&h(e,"class",n)},d(r){r&&_(e),i=!1,o()}}}function Il(t){let e,l,n,i,o;return{c(){e=C("button"),l=Z(t[4]),this.h()},l(r){e=T(r,"BUTTON",{class:!0});var s=D(e);l=$(s,t[4]),s.forEach(_),this.h()},h(){h(e,"class",n="btn "+t[1]+" join-item")},m(r,s){N(r,e,s),m(e,l),i||(o=j(e,"click",t[9]),i=!0)},p(r,s){s&16&&ie(l,r[4]),s&2&&n!==(n="btn "+r[1]+" join-item")&&h(e,"class",n)},d(r){r&&_(e),i=!1,o()}}}function zl(t){let e,l,n,i,o;return{c(){e=C("button"),l=Z(t[5]),this.h()},l(r){e=T(r,"BUTTON",{class:!0});var s=D(e);l=$(s,t[5]),s.forEach(_),this.h()},h(){h(e,"class",n="btn "+t[1]+" join-item")},m(r,s){N(r,e,s),m(e,l),i||(o=j(e,"click",t[10]),i=!0)},p(r,s){s&32&&ie(l,r[5]),s&2&&n!==(n="btn "+r[1]+" join-item")&&h(e,"class",n)},d(r){r&&_(e),i=!1,o()}}}function Dl(t){let e,l,n,i,o;return{c(){e=C("button"),l=Z(t[6]),this.h()},l(r){e=T(r,"BUTTON",{class:!0});var s=D(e);l=$(s,t[6]),s.forEach(_),this.h()},h(){h(e,"class",n="btn "+t[1]+" join-item")},m(r,s){N(r,e,s),m(e,l),i||(o=j(e,"click",t[11]),i=!0)},p(r,s){s&64&&ie(l,r[6]),s&2&&n!==(n="btn "+r[1]+" join-item")&&h(e,"class",n)},d(r){r&&_(e),i=!1,o()}}}function Ni(t){let e,l,n,i,o=t[0]&&Cl(t),r=t[7].text&&Tl(t);function s(y,c){return y[13]?Li:Bi}let d=s(t)(t);return{c(){e=C("div"),o&&o.c(),l=F(),n=C("div"),r&&r.c(),i=F(),d.c(),this.h()},l(y){e=T(y,"DIV",{class:!0});var c=D(e);o&&o.l(c),l=X(c),n=T(c,"DIV",{class:!0});var u=D(n);r&&r.l(u),i=X(u),d.l(u),u.forEach(_),c.forEach(_),this.h()},h(){h(n,"class","join justify-center"),h(e,"class","flex flex-col text-center")},m(y,c){N(y,e,c),o&&o.m(e,null),m(e,l),m(e,n),r&&r.m(n,null),m(n,i),d.m(n,null)},p(y,[c]){y[0]?o?o.p(y,c):(o=Cl(y),o.c(),o.m(e,l)):o&&(o.d(1),o=null),y[7].text?r?r.p(y,c):(r=Tl(y),r.c(),r.m(n,i)):r&&(r.d(1),r=null),d.p(y,c)},i:le,o:le,d(y){y&&_(e),o&&o.d(),r&&r.d(),d.d()}}}function qi(t,e,l){let n;tt(t,ft,E=>l(14,n=E));const i=un();function o(E){i("click:text")}function r(E){i("click:image")}function s(E){i("click:video")}function a(E){i("click:audio")}function d(E){i("click:media")}let{description:y=!1}=e,{color:c="btn-primary"}=e,{textText:u=n("core.fileuploader.text")}=e,{mediaText:b=n("core.fileuploader.media")}=e,{imageText:f=n("core.fileuploader.image")}=e,{videoText:k=n("core.fileuploader.video")}=e,{audioText:w=n("core.fileuploader.audio")}=e,{types:A=Si}=e,z=A.image&&A.video&&A.audio;return t.$$set=E=>{"description"in E&&l(0,y=E.description),"color"in E&&l(1,c=E.color),"textText"in E&&l(2,u=E.textText),"mediaText"in E&&l(3,b=E.mediaText),"imageText"in E&&l(4,f=E.imageText),"videoText"in E&&l(5,k=E.videoText),"audioText"in E&&l(6,w=E.audioText),"types"in E&&l(7,A=E.types)},[y,c,u,b,f,k,w,A,o,r,s,a,d,z]}class Rl extends We{constructor(e){super(),Ge(this,e,qi,Ni,Re,{description:0,color:1,textText:2,mediaText:3,imageText:4,videoText:5,audioText:6,types:7})}}async function Hi({url:t,params:e,fetch:l}){let n=t.searchParams.get("mode")!=="null"?t.searchParams.get("mode"):"",i=t.searchParams.get("id")!=="null"?t.searchParams.get("id"):null,o;if(i){const r=await l(`/quizzes/${e.type}/${i}.json`);return o=r.status===200?await r.json():{},{mode:n,gamestate:o}}return{mode:n,gamestate:o}}const no=Object.freeze(Object.defineProperty({__proto__:null,load:Hi},Symbol.toStringTag,{value:"Module"}));function Pi(t){let e,l;return e=new Ci({props:{gamestate:t[0].gamestate}}),{c(){Ne(e.$$.fragment)},l(n){qe(e.$$.fragment,n)},m(n,i){He(e,n,i),l=!0},p(n,i){const o={};i&1&&(o.gamestate=n[0].gamestate),e.$set(o)},i(n){l||(Q(e.$$.fragment,n),l=!0)},o(n){x(e.$$.fragment,n),l=!1},d(n){Pe(e,n)}}}function Ui(t){let e,l;return e=new fi({props:{gamestate:t[0].gamestate,id:t[0].id}}),{c(){Ne(e.$$.fragment)},l(n){qe(e.$$.fragment,n)},m(n,i){He(e,n,i),l=!0},p(n,i){const o={};i&1&&(o.gamestate=n[0].gamestate),i&1&&(o.id=n[0].id),e.$set(o)},i(n){l||(Q(e.$$.fragment,n),l=!0)},o(n){x(e.$$.fragment,n),l=!1},d(n){Pe(e,n)}}}function Vi(t){let e,l,n,i;const o=[Ui,Pi],r=[];function s(a,d){return a[0].mode==="edit"?0:1}return e=s(t),l=r[e]=o[e](t),{c(){l.c(),n=Ve()},l(a){l.l(a),n=Ve()},m(a,d){r[e].m(a,d),N(a,n,d),i=!0},p(a,[d]){let y=e;e=s(a),e===y?r[e].p(a,d):(je(),x(r[y],1,1,()=>{r[y]=null}),Fe(),l=r[e],l?l.p(a,d):(l=r[e]=o[e](a),l.c()),Q(l,1),l.m(n.parentNode,n))},i(a){i||(Q(l),i=!0)},o(a){x(l),i=!1},d(a){a&&_(n),r[e].d(a)}}}function ji(t,e,l){let{data:n}=e;return t.$$set=i=>{"data"in i&&l(0,n=i.data)},[n]}class io extends We{constructor(e){super(),Ge(this,e,ji,Vi,Re,{data:0})}}export{io as component,no as universal};
